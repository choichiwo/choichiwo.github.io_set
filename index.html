<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Report</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Report"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Report"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Report"><meta property="og:url" content="https://choichiwo.github.io/"><meta property="og:site_name" content="Report"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://choichiwo.github.io/img/og_image.png"><meta property="article:author" content="choi"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://choichiwo.github.io"},"headline":"Report","image":["https://choichiwo.github.io/img/og_image.png"],"author":{"@type":"Person","name":"choi"},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Report" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-11-06T08:58:19.289Z" title="2020-11-06T08:58:19.289Z">2020-11-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-11-03T14:28:54.000Z" title="2020-11-03T14:28:54.000Z">2020-11-03</time></span><span class="level-item">17 minutes read (About 2530 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/11/06/Seaborn_with_Matplotlib_4/">Seaborn with Matplotlib (4)</a></h1><div class="content"><h1 id="4-seaborn-figure-level-다듬기"><a href="#4-seaborn-figure-level-다듬기" class="headerlink" title="4. seaborn figure-level 다듬기"></a>4. seaborn <code>figure-level</code> 다듬기</h1><ul>
<li>seaborn + matplotlib 마지막 시간입니다.</li>
<li><code>figure-level</code> 그림을 그리고 다듬어 봅니다.</li>
<li>자체적으로 지원하는 명령어를 사용해보고,</li>
<li>개흉 심장마사지 방법을 알아보겠습니다.</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/api.html">seaborn API</a>  </p>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/tutorial.html">seaborn tutorial</a>  </p>
<h2 id="4-1-figure-level으로-편리하게-그리기-pairplot"><a href="#4-1-figure-level으로-편리하게-그리기-pairplot" class="headerlink" title="4.1. figure-level으로 편리하게 그리기: pairplot()"></a>4.1. <code>figure-level</code>으로 편리하게 그리기: <code>pairplot()</code></h2><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Exploratory_data_analysis">wikipedia: Exploratory data analysis</a>  </p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Anscombe%27s_quartet">wikipedia: Anscombe’s quartet</a>  </p>
<p><a target="_blank" rel="noopener" href="https://www.autodesk.com/research/publications/same-stats-different-graphs">autodesk: datasaurus</a>  </p>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.pairplot.html#seaborn.pairplot">seaborn.pairplot</a>  </p>
<ul>
<li><p>EDA에서 피할 수 없는 과정이 상관도입니다.</p>
<ul>
<li>두 변수 사이의 관계를 그려 관계를 파악합니다.</li>
<li>대개 산점도<code>scatter plot</code>나 밀도 함수<code>density plot</code>를 쓰고,</li>
<li>추세선<code>regression</code>을 덧붙이는 경우도 있습니다.</li>
</ul>
</li>
<li><p>데이터 분포는 통계값으로만 확인하면 안됩니다.</p>
<ul>
<li><strong>평균과 표준편차는 같은데 분포는 다른 경우</strong>가 많습니다.</li>
<li><strong>반드시 분포를 그려 봐야</strong> 합니다.</li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Anscombe%27s_quartet">Anscombe’s quartet</a>이 아주 좋은 예시입니다.</li>
</ul>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97935547-48f4ec00-1dbc-11eb-915e-42b5364c47e9.png" alt="Anscombe&#39;s quartet"></p>
<ul>
<li><p>N개의 인자 사이에는 \(N(N−1)/2\)가지 관계가 있습니다.</p>
</li>
<li><p>seaborn의 <code>pairplot()</code>은 여러 인자 사이의 수많은 상관도를 쉽게 그려줍니다.</p>
</li>
<li><p>붓꽃<code>iris</code> 데이터셋으로 상관도를 그려봅니다.</p>
<ul>
<li>꽃받침<code>sepal</code>과 꽃잎<code>petal</code>,</li>
<li>길이<code>length</code>와 폭<code>width</code> 네 가지 인자로부터</li>
<li>여섯 가지의 상관도,</li>
<li>네 가지의 히스토그램이 나옵니다.</li>
</ul>
</li>
<li><p>코드 한 줄로 그려봅시다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">iris = sns.load_dataset(<span class="string">&quot;iris&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97935771-e51ef300-1dbc-11eb-90f2-7fd32d5d0440.png"></p>
<ul>
<li>종<code>species</code>별 분포를 그려봅니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g = sns.pairplot(iris, hue=<span class="string">&quot;species&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97935966-7a21ec00-1dbd-11eb-90d2-aab23c3c1782.png"></p>
<ul>
<li><p><code>hue=</code>라는 인자 하나만 추가했을 뿐입니다.</p>
<ul>
<li>그림이 갑자기 예뻐졌습니다.</li>
<li>히스토그램도 밀도함수로 바뀌어서 훨씬 보기 좋습니다.</li>
</ul>
</li>
<li><p>여기에 다른 그림을 겹쳐보겠습니다.</p>
<ul>
<li><strong>대각선 위</strong> : 2차원 밀도함수 + 추세선</li>
<li><strong>대각선 아래</strong> : 2차원 밀도함수 + 산포도</li>
</ul>
</li>
<li><p>seaborn <code>figure-level</code> 기능만으로 가능합니다.</p>
</li>
<li><p><code>.map_lower()</code>와 <code>.map_upper</code>를 사용합니다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g = sns.pairplot(iris, hue=<span class="string">&quot;species&quot;</span>, kind=<span class="string">&quot;kde&quot;</span>, plot_kws=&#123;<span class="string">&quot;alpha&quot;</span>:<span class="number">0.3</span>&#125;)</span><br><span class="line">g.map_lower(sns.scatterplot)</span><br><span class="line">g.map_upper(sns.regplot, scatter=<span class="literal">False</span>, truncate=<span class="literal">False</span>, ci=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97937021-cb7faa80-1dc0-11eb-8763-113cff99e523.png"></p>
<ul>
<li><code>map_lower()</code>와 <code>map_upper()</code>는 대각선의 위와 아래에 <strong>그림을 덧씌우는</strong><code>map</code> <strong>함수</strong>입니다.<ul>
<li>앞서 완성한 pairplot에 새로운 그림을 덧붙입니다.</li>
<li>인자로는 <strong>함수 이름</strong>과 이 <strong>함수의 옵션들</strong>을 연달아 넣어 줍니다.</li>
<li>함수에 맞는 인자를 넣어줘야 합니다.</li>
</ul>
</li>
</ul>
<h2 id="4-2-figure-level-그림-뼈대부터-세우기-PairGrid"><a href="#4-2-figure-level-그림-뼈대부터-세우기-PairGrid" class="headerlink" title="4.2. figure-level 그림 뼈대부터 세우기: PairGrid()"></a>4.2. <code>figure-level</code> 그림 뼈대부터 세우기: <code>PairGrid()</code></h2><p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.PairGrid.html">seaborn.PairGrid</a>  </p>
<ul>
<li><p>pairplot을 단계별로 그리는 방법입니다.</p>
<ul>
<li>코드 양은 <code>pairplot()</code>한 줄보다 늘어납니다.</li>
<li>그러나 자유도가 늘어납니다.</li>
</ul>
</li>
<li><p><code>.pairplot()</code> 으로는 위 아래를 완전히 다르게 할 수 없습니다.</p>
</li>
<li><p>대각선의 아래엔 산점도와 추세선을 그리고</p>
</li>
<li><p>대각선 위에는 밀도함수만 그려보겠습니다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 틀 만들기</span></span><br><span class="line">g = sns.PairGrid(iris, hue=<span class="string">&quot;species&quot;</span>, diag_sharey=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># diagonal</span></span><br><span class="line">g.map_diag(sns.kdeplot, fill=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># lower</span></span><br><span class="line">g.map_lower(plt.scatter, s=<span class="number">30</span>, edgecolor=<span class="string">&quot;w&quot;</span>)</span><br><span class="line">g.map_lower(sns.regplot, scatter=<span class="literal">False</span>, truncate=<span class="literal">False</span>, ci=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># upper</span></span><br><span class="line">g.map_upper(sns.kdeplot, alpha=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># legend</span></span><br><span class="line">g.add_legend()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97937176-3fba4e00-1dc1-11eb-979f-863304efca5d.png">  </p>
<ul>
<li><p><code>.pairplot()</code>과 같은 형식의 그림이 나왔습니다.</p>
</li>
<li><p>내 의도를 더 잘 반영할 수 있게 되었습니다.</p>
</li>
<li><p>8번째 줄에는 <code>plt.scatter</code>가 들어가 있습니다.</p>
</li>
<li><p><code>.pairplot()</code>도 마찬가지지만 <code>.map()</code>에는 seaborn대신 matplotlib   - 함수를 사용할 수 있습니다.</p>
</li>
<li><p>중복되는 오른쪽 윗부분을 생략할 수 있습니다.</p>
<ul>
<li><code>corner=True</code>를 넣어줍니다.</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">g = sns.PairGrid(iris, hue=<span class="string">&quot;species&quot;</span>, diag_sharey=<span class="literal">False</span>, corner=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># diagonal</span></span><br><span class="line">g.map_diag(sns.kdeplot, fill=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># lower</span></span><br><span class="line">g.map_lower(plt.scatter, s=<span class="number">30</span>, edgecolor=<span class="string">&quot;w&quot;</span>)</span><br><span class="line">g.map_lower(sns.regplot, scatter=<span class="literal">False</span>, truncate=<span class="literal">False</span>, ci=<span class="literal">False</span>)</span><br><span class="line">g.map_lower(sns.kdeplot, alpha=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># legend</span></span><br><span class="line">g.add_legend()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97937292-92940580-1dc1-11eb-82b7-8f5b6650fc2f.png">  </p>
<ul>
<li><p>이제 작은 수정을 해봅니다.</p>
<ol>
<li>대각선에 <strong>사각 테두리</strong> 치기</li>
<li><strong>범례를 그림 안으로</strong> 가져오기</li>
</ol>
</li>
<li><p>가슴을 열고 심장마사지를 할 시간입니다.</p>
</li>
</ul>
<h2 id="4-3-figure-level-그림-객체-접근"><a href="#4-3-figure-level-그림-객체-접근" class="headerlink" title="4.3. figure-level 그림 객체 접근"></a>4.3. <code>figure-level</code> 그림 객체 접근</h2><p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.FacetGrid.html?highlight=facetgrid#seaborn.FacetGrid">seaborn.FacetGrid</a>  </p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html">matplotlib.figure.Figure</a>  </p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes">matplotlib.axes.Axes</a>  </p>
<ul>
<li>matplolib 그림은 <a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html">figure</a>와 <a target="_blank" rel="noopener" href="https://matplotlib.org/3.3.2/api/axes_api.html">axes</a>로 나뉩니다.<ul>
<li>seaborn 그림도 결국 matplotlib 그림입니다.</li>
<li><strong>seaborn의 figure와 axes</strong>에 접근하면 됩니다.</li>
</ul>
</li>
</ul>
<h3 id="4-3-1-axes-axes"><a href="#4-3-1-axes-axes" class="headerlink" title="4.3.1. axes: .axes"></a>4.3.1. axes: <code>.axes</code></h3><ul>
<li>이전 글에서 <code>axes</code>를 이용해 jointplot을 재현했습니다.</li>
<li>axes 객체는 <code>.axes</code>를 이용해 접근 가능합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g.axes</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97937634-92483a00-1dc2-11eb-824a-cca398b27594.png" alt="37_s2m4_8">  </p>
<ul>
<li>확인 결과 <code>AxesSubplot</code>의 array입니다.</li>
</ul>
<h4 id="4-3-1-1-특정-axes-윤곽선-그리기"><a href="#4-3-1-1-특정-axes-윤곽선-그리기" class="headerlink" title="4.3.1.1. 특정 axes 윤곽선 그리기"></a>4.3.1.1. 특정 axes 윤곽선 그리기</h4><p><a target="_blank" rel="noopener" href="https://jehyunlee.github.io/2020/10/03/Python-DS-35-seaborn_matplotlib2/">Seaborn with Matplotlib (2)</a>  </p>
<p><a target="_blank" rel="noopener" href="https://jehyunlee.github.io/2020/08/27/Python-DS-28-mpl_spines_grids/">Spines &amp; Grids</a>  </p>
<ul>
<li>정체를 알았으니 <code>axes[i][j]</code>로 접근할 수 있습니다.</li>
<li><code>g.axes[i][j]</code>의 spine을 보이게 합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">g = sns.PairGrid(iris, hue=<span class="string">&quot;species&quot;</span>, diag_sharey=<span class="literal">False</span>, corner=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># diagonal</span></span><br><span class="line">g.map_diag(sns.kdeplot, fill=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    g.axes[i][i].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">True</span>)</span><br><span class="line">    g.axes[i][i].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">True</span>)</span><br><span class="line">    g.axes[i][i].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># lower</span></span><br><span class="line">g.map_lower(plt.scatter, s=<span class="number">30</span>, edgecolor=<span class="string">&quot;w&quot;</span>)</span><br><span class="line">g.map_lower(sns.regplot, scatter=<span class="literal">False</span>, truncate=<span class="literal">False</span>, ci=<span class="literal">False</span>)</span><br><span class="line">g.map_lower(sns.kdeplot, alpha=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># legend</span></span><br><span class="line">g.add_legend()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97938009-a476a800-1dc3-11eb-9a84-cbfc55fd7ddc.png">  </p>
<h4 id="4-3-1-2-범례-조정"><a href="#4-3-1-2-범례-조정" class="headerlink" title="4.3.1.2. 범례 조정"></a>4.3.1.2. 범례 조정</h4><p><a target="_blank" rel="noopener" href="https://github.com/mwaskom/seaborn/blob/master/seaborn/axisgrid.py">seaborn axisgrid.py 소스코드</a>  </p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.3.1/api/_as_gen/matplotlib.axes.Axes.get_legend_handles_labels.html">matplotlib.axes.Axes.get_legend_handles_labels</a>  </p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.legend.html?highlight=legend#matplotlib.axes.Axes.legend">matplotlib.axes.Axes.legend</a>  </p>
<ul>
<li><p>legend 정보를 가져와서 legend로 삽입합니다.</p>
<ul>
<li>대개 legend에 필요한 handles와 labels는 <code>.get_legend_handles_labels()</code>로 가져옵니다.</li>
<li>하지만 seaborn <code>figure-level</code> 그림엔 이 명령이 통하지 않습니다.</li>
<li>private처럼 보이는 <code>._legend_data</code>를 사용합니다.</li>
<li><strong>공식 문서에 없습니다. 소스 코드를 뒤적여야 합니다.</strong></li>
</ul>
</li>
<li><p><code>._legend_data</code> 정체를 확인합니다.</p>
</li>
<li><p>범례가 <code>dict</code> 형식으로 들어 있습니다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g._legend_data</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97938370-9b3a0b00-1dc4-11eb-9c51-da01d0834fc4.png">  </p>
<ul>
<li>아래 코드를 추가하여 범례를 이동합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">handles = g._legend_data.values()</span><br><span class="line">labels = g._legend_data.keys()</span><br><span class="line"></span><br><span class="line"><span class="comment"># axes[1][0] 기준으로 오른쪽 멀리 범례 삽입</span></span><br><span class="line">g.axes[<span class="number">1</span>][<span class="number">0</span>].legend(handles=handles, labels=labels,</span><br><span class="line">                    bbox_to_anchor=(<span class="number">3.45</span>, <span class="number">1</span>),</span><br><span class="line">                    fontsize=<span class="string">&quot;large&quot;</span>, frameon=<span class="literal">False</span></span><br><span class="line">                   )</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97941646-5368b300-1dc7-11eb-88b1-441f5d1ebae3.png">  </p>
<ul>
<li>이런 방식으로 특정 axes만 제어할 수 있습니다.<ul>
<li><strong>원하는 그림, 글자</strong>을 넣을 수 있고</li>
<li><strong>특정 데이터의 색상</strong>을 변경할 수 있습니다.</li>
</ul>
</li>
</ul>
<h3 id="4-3-2-figure-fig"><a href="#4-3-2-figure-fig" class="headerlink" title="4.3.2. figure: .fig"></a>4.3.2. figure: <code>.fig</code></h3><ul>
<li>개별 공간은 axes로 제어하지만</li>
<li>여러 axes가 연관된 공간은 figure로 제어합니다.</li>
<li>figure 객체는 <code>.fig</code>를 이용해 접근 가능합니다</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span>(g.fig)</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97943005-b22e2c80-1dc7-11eb-8b3e-b0c623a18890.png">  </p>
<ul>
<li><code>type()</code>으로 감싸주지 않으면 그림이 통으로 출력됩니다.</li>
</ul>
<h4 id="4-3-2-1-ylabel-alignment"><a href="#4-3-2-1-ylabel-alignment" class="headerlink" title="4.3.2.1. ylabel alignment"></a>4.3.2.1. ylabel alignment</h4><p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.3.1/api/_as_gen/matplotlib.figure.Figure.html?highlight=align_ylabels#matplotlib.figure.Figure.align_ylabels">matplolib.figure.Figure #align_ylabels</a>  </p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.3.1/gallery/pyplots/align_ylabels.html">matplotlib Align y-labels</a>  </p>
<ul>
<li><p>위 그림에서 ylabel 줄이 잘 맞지 않습니다.</p>
<ul>
<li>맨 왼쪽 아래 axes[3][0]의 label이 비죽 나왔네요.</li>
<li>다른 ylabel을 움직여서 열을 맞춰 봅시다.</li>
</ul>
</li>
<li><p>위 그림 코드의 맨 마지막 줄에 한 줄만 추가합니다</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g.fig.align_ylabels(g.axes[:,<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97944840-1d2c3300-1dc9-11eb-9f77-d66c7bc235de.png">  </p>
<h4 id="4-3-2-2-범례-조정"><a href="#4-3-2-2-범례-조정" class="headerlink" title="4.3.2.2. 범례 조정"></a>4.3.2.2. 범례 조정</h4><p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.3.1/api/_as_gen/matplotlib.figure.Figure.html?highlight=legend#matplotlib.figure.Figure.legend">matplolib.figure.Figure #legend</a>    </p>
<ul>
<li>범례는 figure 기준으로도 삽입 가능합니다.</li>
<li>아래 코드는 위의 <code>axes[1][0].legend()</code>와 동일합니다.</li>
<li>전체적인 그림의 위치를 잡을 수 있어 더 좋습니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g.fig.legend(handles=handles, labels=labels,</span><br><span class="line">             bbox_to_anchor=(<span class="number">0.75</span>, <span class="number">0.75</span>),</span><br><span class="line">             fontsize=<span class="string">&quot;large&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97944930-5e244780-1dc9-11eb-9b6c-ce932da49fcf.png">  </p>
<h4 id="4-3-2-3-suptitle"><a href="#4-3-2-3-suptitle" class="headerlink" title="4.3.2.3. suptitle"></a>4.3.2.3. suptitle</h4><p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.3.1/api/_as_gen/matplotlib.figure.Figure.html?highlight=suptitle#matplotlib.figure.Figure.suptitle">matplolib.figure.Figure #suptitle</a>  </p>
<ul>
<li>그림 전체에 제목을 붙일 수 있습니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">g.fig.suptitle(<span class="string">&quot;iris dataset&quot;</span>, y=<span class="number">1.01</span>,</span><br><span class="line">               weight=<span class="string">&quot;bold&quot;</span>, fontsize=<span class="string">&quot;x-large&quot;</span></span><br><span class="line">              )</span><br><span class="line">g.fig.tight_layout()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97996875-a4aa8e00-1e2b-11eb-84de-29871d01a7f5.png">  </p>
<h4 id="4-3-2-4-facecolor-edgecolor"><a href="#4-3-2-4-facecolor-edgecolor" class="headerlink" title="4.3.2.4. facecolor, edgecolor"></a>4.3.2.4. facecolor, edgecolor</h4><p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.3.1/api/_as_gen/matplotlib.figure.Figure.html?highlight=set_facecolor#matplotlib.figure.Figure.set_facecolor">matplolib.figure.Figure #set_facecolor</a>  </p>
<ul>
<li>그림 바탕색을 칠합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g.fig.set_facecolor(<span class="string">&quot;whitesmoke&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97996943-be4bd580-1e2b-11eb-8480-5c47dde25396.png">  </p>
<h3 id="4-3-3-최종"><a href="#4-3-3-최종" class="headerlink" title="4.3.3. 최종"></a>4.3.3. 최종</h3><ul>
<li>x, ylabel까지 정리하면 이렇습니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">g = sns.PairGrid(iris, hue=<span class="string">&quot;species&quot;</span>, diag_sharey=<span class="literal">False</span>, corner=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># diagonal</span></span><br><span class="line">g.map_diag(sns.kdeplot, fill=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    g.axes[i][i].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">True</span>)</span><br><span class="line">    g.axes[i][i].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">True</span>)</span><br><span class="line">    g.axes[i][i].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># lower</span></span><br><span class="line">g.map_lower(plt.scatter, s=<span class="number">30</span>, edgecolor=<span class="string">&quot;w&quot;</span>)</span><br><span class="line">g.map_lower(sns.regplot, scatter=<span class="literal">False</span>, truncate=<span class="literal">False</span>, ci=<span class="literal">False</span>)</span><br><span class="line">g.map_lower(sns.kdeplot, alpha=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># legend</span></span><br><span class="line">handles = g._legend_data.values()</span><br><span class="line">labels = g._legend_data.keys()</span><br><span class="line">g.fig.legend(handles=handles, labels=labels,</span><br><span class="line">             bbox_to_anchor=(<span class="number">0.75</span>, <span class="number">0.75</span>),</span><br><span class="line">             fontsize=<span class="string">&quot;large&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># x, y labels</span></span><br><span class="line">labels = [<span class="string">&quot;Sepal Length&quot;</span>, <span class="string">&quot;Sepal Width&quot;</span>, <span class="string">&quot;Petal Length&quot;</span>, <span class="string">&quot;Petal Width&quot;</span>]</span><br><span class="line">font_labels = &#123;<span class="string">&quot;fontsize&quot;</span>:<span class="string">&quot;large&quot;</span>, <span class="string">&quot;color&quot;</span>:<span class="string">&quot;gray&quot;</span>, <span class="string">&quot;fontweight&quot;</span>:<span class="string">&quot;bold&quot;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    g.axes[<span class="number">3</span>, i].set_xlabel(labels[i], fontdict=font_labels)</span><br><span class="line">    g.axes[i, <span class="number">0</span>].set_ylabel(labels[i], fontdict=font_labels)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ylabel alignment</span></span><br><span class="line">g.fig.align_ylabels(g.axes[:,<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># suptitle</span></span><br><span class="line">g.fig.suptitle(<span class="string">&quot;iris dataset&quot;</span>, y=<span class="number">1.01</span>,</span><br><span class="line">               weight=<span class="string">&quot;bold&quot;</span>, fontsize=<span class="string">&quot;x-large&quot;</span></span><br><span class="line">              )</span><br><span class="line">g.fig.tight_layout()</span><br><span class="line"></span><br><span class="line"><span class="comment"># facecolor</span></span><br><span class="line">g.fig.set_facecolor(<span class="string">&quot;whitesmoke&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97997030-e0455800-1e2b-11eb-9ec5-357ae8c8d2b4.png">  </p>
<h1 id="5-결론"><a href="#5-결론" class="headerlink" title="5. 결론"></a>5. 결론</h1><ul>
<li>네 편의 글에 걸쳐 matplotlib + seaborn 연계기를 정리했습니다.<ul>
<li>개별적인 코드와 기술보다는 <strong>본질</strong>에 집중합시다.</li>
<li><strong>figure</strong>와 <strong>axes</strong>를 통하면 <strong>웬만한건 다 된다</strong>는 겁니다.</li>
</ul>
</li>
<li>0.11에서 seaborn의 공식문서가 대폭 정리됐습니다.<ul>
<li>하지만 아직 부족한 점이 많습니다.</li>
<li>특히 많은 경우 matplotlib에 숙달되었다고 전제합니다.</li>
<li><strong>일단 matplotlib</strong>부터 제대로 익혀봅시다.</li>
</ul>
</li>
</ul>
<p>출저: <a target="_blank" rel="noopener" href="https://jehyunlee.github.io/2020/10/10/Python-DS-37-seaborn_matplotlib4/">https://jehyunlee.github.io/2020/10/10/Python-DS-37-seaborn_matplotlib4/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-11-06T08:58:19.271Z" title="2020-11-06T08:58:19.271Z">2020-11-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-11-02T06:26:24.000Z" title="2020-11-02T06:26:24.000Z">2020-11-02</time></span><span class="level-item">8 minutes read (About 1181 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/11/06/Seaborn_with_Matplotlib_1/">Seaborn with Matplotlib (1)</a></h1><div class="content"><h1 id="1-seaborn-matplotlib"><a href="#1-seaborn-matplotlib" class="headerlink" title="1. seaborn + matplotlib"></a>1. seaborn + matplotlib</h1><ul>
<li>seaborn을 matplotlib과 섞어쓰는 방법입니다.</li>
<li>4부 중 첫 번째 시간입니다.</li>
<li>seaborn 함수 중 matplotlib axes를 반환하는 함수들에 관한 내용입니다.</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/api.html">seaborn API</a></p>
<ul>
<li><p>seaborn은 matplotlib을 쉽고 아름답게 쓰고자 만들어졌습니다.</p>
</li>
<li><p>따라서 seaborn의 결과물은 당연히 matplotlib의 결과물입니다.</p>
</li>
<li><p>그러나 간혹 seaborn이 그린 그림의 폰트, 색상에 접근이 되지 않아 난처합니다.</p>
</li>
<li><p>seaborn의 구조를 잘 이해하지 못하면 해결도 어렵습니다.</p>
</li>
<li><p>v0.11 기준으로 seaborn에는 다음 함수들이 있습니다.<br><img src="https://user-images.githubusercontent.com/72365663/97834102-4f328c00-1d1a-11eb-8d10-2ccaed2a085e.png"></p>
</li>
<li><p>matplotlib의 출력물은 <code>figure</code>와 <code>axes</code>만을 반환합니다.</p>
<ul>
<li>seaborn의 명령어 중 <code>axes</code>를 반환하는 것들은 matplotlib과 섞어 쓰기 좋습니다.</li>
<li>먼저 matplotlib의 <strong>객체 지향</strong><code>object oriented</code> <strong>interface</strong>를 사용해서 그림의 틀을 만든 뒤,</li>
<li>특정 <code>axes</code>에 <code>seaborn</code>을 삽입하면 됩니다.</li>
<li><strong>결론적으로, 하고 싶은 거 다 됩니다.</strong></li>
</ul>
</li>
</ul>
<h2 id="1-1-Load-data"><a href="#1-1-Load-data" class="headerlink" title="1.1. Load data"></a>1.1. Load data</h2><ul>
<li>예제로 사용할 펭귄 데이터를 불러옵니다.</li>
<li>seaborn에 내장되어 있습니다.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">penguins = sns.load_dataset(<span class="string">&quot;penguins&quot;</span>)</span><br><span class="line">penguins.head()</span><br></pre></td></tr></table></figure>
<img src="https://user-images.githubusercontent.com/72365663/97834341-f9aaaf00-1d1a-11eb-9e82-72d4d4821400.png"></li>
</ul>
<h2 id="1-2-figure-and-axes"><a href="#1-2-figure-and-axes" class="headerlink" title="1.2. figure and axes"></a>1.2. <code>figure</code> and <code>axes</code></h2><ul>
<li>matplotlib으로 도화지<code>figure</code>를 깔고 축공간<code>axes</code>를 만듭니다.</li>
<li>1 x 2 축공간을 구성합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fig, axes = plt.subplots(ncols=<span class="number">2</span>, figsize=(<span class="number">8</span>,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/72365663/97834491-57d79200-1d1b-11eb-998c-a8105f682127.png"></p>
<h2 id="1-3-plot-with-matplotlib"><a href="#1-3-plot-with-matplotlib" class="headerlink" title="1.3. plot with matplotlib"></a>1.3. plot with matplotlib</h2><ul>
<li>matplotlib 기능을 이용해서 산점도를 그립니다.<ul>
<li>x축은 부리 길이 <code>bill length</code></li>
<li>y축은 부리 위 아래 두께 <code>bill depth</code></li>
<li>색상은 종<code>species</code>로 합니다.</li>
<li>Adelie, Chinstrap, Gentoo이 있습니다.</li>
</ul>
</li>
<li>두 축공간 중 왼쪽에만 그립니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fig, axes = plt.subplots(ncols=<span class="number">2</span>, figsize=(<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">species_u = penguins[<span class="string">&quot;species&quot;</span>].unique()</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot 0 : matplotlib</span></span><br><span class="line"><span class="keyword">for</span> i, s <span class="keyword">in</span> <span class="built_in">enumerate</span>(species_u):</span><br><span class="line">    axes[<span class="number">0</span>].scatter(penguins[<span class="string">&quot;bill_length_mm&quot;</span>].loc[penguins[<span class="string">&quot;species&quot;</span>]==s],</span><br><span class="line">                   penguins[<span class="string">&quot;bill_depth_mm&quot;</span>].loc[penguins[<span class="string">&quot;species&quot;</span>]==s],</span><br><span class="line">                   c=<span class="string">f&quot;C<span class="subst">&#123;i&#125;</span>&quot;</span>, label=s, alpha=<span class="number">0.3</span></span><br><span class="line">                  )</span><br><span class="line">axes[<span class="number">0</span>].legend(species_u, title=<span class="string">&quot;species&quot;</span>)</span><br><span class="line">axes[<span class="number">0</span>].set_xlabel(<span class="string">&quot;Bill Length (mm)&quot;</span>)</span><br><span class="line">axes[<span class="number">0</span>].set_ylabel(<span class="string">&quot;Bill Depth (mm)&quot;</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/72365663/97834656-b1d85780-1d1b-11eb-8b0a-ccc3ce484899.png"></p>
<h2 id="1-4-plot-with-seaborn"><a href="#1-4-plot-with-seaborn" class="headerlink" title="1.4. plot with seaborn"></a>1.4. plot with seaborn</h2><p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.scatterplot.html">seaborn scatterplot</a>  </p>
<ul>
<li>이번엔 같은 plot을 seaborn으로 그려봅니다.</li>
<li>위 코드에 아래 세 줄만 추가합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># plot 1 : seaborn</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, hue=<span class="string">&quot;species&quot;</span>, data=penguins, alpha=<span class="number">0.3</span>, ax=axes[<span class="number">1</span>])</span><br><span class="line">axes[<span class="number">1</span>].set_xlabel(<span class="string">&quot;Bill Length (mm)&quot;</span>)</span><br><span class="line">axes[<span class="number">1</span>].set_ylabel(<span class="string">&quot;Bill Depth (mm)&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/72365663/97835087-b5b8a980-1d1c-11eb-9fb9-fd4eff339fcb.png"></p>
<ul>
<li><p>세 줄로 거의 동일한 그림이 나왔습니다.</p>
<ul>
<li>scatter plot의 점 크기만 살짝 작습니다.</li>
<li>label의 투명도만 살짝 다릅니다.</li>
</ul>
</li>
<li><p>seaborn 명령 <code>scatterplot()</code>을 그대로 사용했습니다.</p>
</li>
<li><p>x축과 y축 label도 바꾸었습니다.</p>
<ul>
<li><code>ax=axes[1]</code> 인자에서 볼 수 있듯, 존재하는 <code>axes</code>에 그림만 얹었습니다.</li>
<li><strong>matplotlib 틀 + seaborn</strong> 그림 이므로, matplotlib 명령이 모두 통합니다.</li>
</ul>
</li>
</ul>
<h2 id="1-5-matplotlib-seaborn-amp-seaborn-matplotlib"><a href="#1-5-matplotlib-seaborn-amp-seaborn-matplotlib" class="headerlink" title="1.5. matplotlib + seaborn &amp; seaborn + matplotlib"></a>1.5. matplotlib + seaborn &amp; seaborn + matplotlib</h2><ul>
<li>matplotlib과 seaborn이 자유롭게 섞일 수 있습니다.<ul>
<li><strong>matplotlib 산점도 위에 seaborn 추세선</strong>을 얹을 수 있고,</li>
<li><strong>seaborn 산점도 위에 matplotlib 중심점</strong>을 얹을 수 있습니다.</li>
</ul>
</li>
</ul>
<ul>
<li>파이썬 코드는 다음과 같습니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">fig, axes = plt.subplots(ncols=<span class="number">2</span>, figsize=(<span class="number">8</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">species_u = penguins[<span class="string">&quot;species&quot;</span>].unique()</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot 0 : matplotlib + seaborn</span></span><br><span class="line"><span class="keyword">for</span> i, s <span class="keyword">in</span> <span class="built_in">enumerate</span>(species_u):</span><br><span class="line">    <span class="comment"># matplotlib 산점도</span></span><br><span class="line">    axes[<span class="number">0</span>].scatter(penguins[<span class="string">&quot;bill_length_mm&quot;</span>].loc[penguins[<span class="string">&quot;species&quot;</span>]==s],</span><br><span class="line">                   penguins[<span class="string">&quot;bill_depth_mm&quot;</span>].loc[penguins[<span class="string">&quot;species&quot;</span>]==s],</span><br><span class="line">                   c=<span class="string">f&quot;C<span class="subst">&#123;i&#125;</span>&quot;</span>, label=s, alpha=<span class="number">0.3</span></span><br><span class="line">                  )</span><br><span class="line">				  </span><br><span class="line">    <span class="comment"># seaborn 추세선</span></span><br><span class="line">    sns.regplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins.loc[penguins[<span class="string">&quot;species&quot;</span>]==s], </span><br><span class="line">                scatter=<span class="literal">False</span>, ax=axes[<span class="number">0</span>])</span><br><span class="line">    </span><br><span class="line">axes[<span class="number">0</span>].legend(species_u, title=<span class="string">&quot;species&quot;</span>)</span><br><span class="line">axes[<span class="number">0</span>].set_xlabel(<span class="string">&quot;Bill Length (mm)&quot;</span>)</span><br><span class="line">axes[<span class="number">0</span>].set_ylabel(<span class="string">&quot;Bill Depth (mm)&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot 1 : seaborn + matplotlib</span></span><br><span class="line"><span class="comment"># seaborn 산점도</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, hue=<span class="string">&quot;species&quot;</span>, data=penguins, alpha=<span class="number">0.3</span>, ax=axes[<span class="number">1</span>])</span><br><span class="line">axes[<span class="number">1</span>].set_xlabel(<span class="string">&quot;Bill Length (mm)&quot;</span>)</span><br><span class="line">axes[<span class="number">1</span>].set_ylabel(<span class="string">&quot;Bill Depth (mm)&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, s <span class="keyword">in</span> <span class="built_in">enumerate</span>(species_u):</span><br><span class="line">    <span class="comment"># matplotlib 중심점</span></span><br><span class="line">    axes[<span class="number">1</span>].scatter(penguins[<span class="string">&quot;bill_length_mm&quot;</span>].loc[penguins[<span class="string">&quot;species&quot;</span>]==s].mean(),</span><br><span class="line">                   penguins[<span class="string">&quot;bill_depth_mm&quot;</span>].loc[penguins[<span class="string">&quot;species&quot;</span>]==s].mean(),</span><br><span class="line">                   c=<span class="string">f&quot;C<span class="subst">&#123;i&#125;</span>&quot;</span>, alpha=<span class="number">1</span>, marker=<span class="string">&quot;x&quot;</span>, s=<span class="number">100</span></span><br><span class="line">                  )</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/72365663/97835413-7048ac00-1d1d-11eb-8f6e-010d899f591a.png"></p>
<h2 id="1-6-seaborn-seaborn-matplotlib"><a href="#1-6-seaborn-seaborn-matplotlib" class="headerlink" title="1.6. seaborn + seaborn + matplotlib"></a>1.6. seaborn + seaborn + matplotlib</h2><ul>
<li>안 될 이유가 없습니다.</li>
<li>seaborn <code>scatterplot</code> + seaborn <code>kdeplot</code> + matplotlib <code>text</code>입니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">6</span>,<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot 0: scatter plot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, color=<span class="string">&quot;k&quot;</span>, data=penguins, alpha=<span class="number">0.3</span>, ax=ax, legend=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot 1: kde plot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, hue=<span class="string">&quot;species&quot;</span>, data=penguins, alpha=<span class="number">0.5</span>, ax=ax, legend=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># text:</span></span><br><span class="line">species_u = penguins[<span class="string">&quot;species&quot;</span>].unique()</span><br><span class="line"><span class="keyword">for</span> i, s <span class="keyword">in</span> <span class="built_in">enumerate</span>(species_u):</span><br><span class="line">    ax.text(penguins[<span class="string">&quot;bill_length_mm&quot;</span>].loc[penguins[<span class="string">&quot;species&quot;</span>]==s].mean(),</span><br><span class="line">            penguins[<span class="string">&quot;bill_depth_mm&quot;</span>].loc[penguins[<span class="string">&quot;species&quot;</span>]==s].mean(),</span><br><span class="line">            s = s, fontdict=&#123;<span class="string">&quot;fontsize&quot;</span>:<span class="number">14</span>, <span class="string">&quot;fontweight&quot;</span>:<span class="string">&quot;bold&quot;</span>,<span class="string">&quot;color&quot;</span>:<span class="string">&quot;k&quot;</span>&#125;</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">ax.set_xlabel(<span class="string">&quot;Bill Length (mm)&quot;</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">&quot;Bill Depth (mm)&quot;</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/72365663/97835502-aab24900-1d1d-11eb-94e2-d6ba0b516911.png"></p>
<h2 id="1-7-결론"><a href="#1-7-결론" class="headerlink" title="1.7. 결론"></a>1.7. 결론</h2><ul>
<li><strong>seaborn을 matplotlib과 마음껏 섞어쓰세요</strong></li>
<li>단, <code>axes</code>를 반환하는 명령어에 한해서 말입니다.</li>
<li>이런 명령어를 <code>axes-level function</code> 이라고 합니다.</li>
</ul>
<p>출저: <a target="_blank" rel="noopener" href="https://jehyunlee.github.io/2020/09/30/Python-DS-34-seaborn_matplotlib/">https://jehyunlee.github.io/2020/09/30/Python-DS-34-seaborn_matplotlib/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-11-06T08:58:19.271Z" title="2020-11-06T08:58:19.271Z">2020-11-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-11-02T14:37:12.000Z" title="2020-11-02T14:37:12.000Z">2020-11-02</time></span><span class="level-item">16 minutes read (About 2413 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/11/06/Seaborn_with_Matplotlib_3/">Seaborn with Matplotlib (3)</a></h1><div class="content"><h1 id="3-seaborn-figure-level-function"><a href="#3-seaborn-figure-level-function" class="headerlink" title="3. seaborn figure-level function"></a>3. seaborn figure-level function</h1><ul>
<li>seaborn의 핵심기능, 강력한 명령입니다.</li>
<li>4부 중 세 번째 시간입니다.</li>
<li>matplotlib으로는 매우 수고스러울 일을 줄여줍니다.</li>
<li>그러나 손대기 어렵기도 합니다. 이유와 해결방법을 알아봅시다.  </li>
</ul>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/api.html">seaborn API</a>  </p>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/tutorial.html">seaborn tutorial</a>  </p>
<p><a target="_blank" rel="noopener" href="https://jehyunlee.github.io/2020/09/30/Python-DS-34-seaborn_matplotlib/">seaborn with matplotlib (1)</a>  </p>
<ul>
<li><p>지난 글에서 matplotlib과 친한 함수를 알아봤습니다.</p>
<ul>
<li>이런 axex 반환 함수를 <code>axes-level</code> <strong>함수</strong>,</li>
<li>반대로 그림 전체를 반환하는 함수를 <code>figure-level</code> <strong>함수</strong>라고 합니다.</li>
</ul>
</li>
<li><p>아래 노란 부분이 <code>figure-level</code> 함수입니다.</p>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97869450-da307800-1d54-11eb-9151-3b8255cbaf69.png" alt="노랑색: figure-level functions"></p>
<ul>
<li>반환 형식return type이 왜 이렇게 깔끔하지 않은지는 뒤에 보겠습니다.</li>
<li>figure-level 함수는 복잡한 그림을 한 번에 편하게 그려줍니다.</li>
</ul>
<h2 id="3-1-figure-level-편리함-맛보기-FacetGrid"><a href="#3-1-figure-level-편리함-맛보기-FacetGrid" class="headerlink" title="3.1. figure-level 편리함 맛보기: FacetGrid()"></a>3.1. <code>figure-level</code> 편리함 맛보기: <code>FacetGrid()</code></h2><ul>
<li><p>seaborn에 내장된 penguins dataset에는 이런 데이터가 있습니다.</p>
<ul>
<li>bill_length_mm : 부리 길이</li>
<li>bill_depth_mm : 부리 위아래 두께</li>
<li>species : 펭귄 종</li>
<li>sex : 성별</li>
<li>island : 서식지</li>
</ul>
</li>
<li><p>이 데이터를 산점도로 한번에 나타내고자 합니다.</p>
<ul>
<li>X축 : bill_length_mm</li>
<li>Y축 : bill_depth_mm</li>
<li>색상 : species</li>
<li>X방향 axes : island</li>
<li>Y방향 axes : sex</li>
</ul>
</li>
<li><p>matplotlib 코드는 이렇습니다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">fig, axes = plt.subplots(nrows=<span class="number">2</span>, ncols=<span class="number">3</span>, figsize=(<span class="number">12</span>, <span class="number">8</span>), sharex=<span class="literal">True</span>, sharey=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 인자별 데이터 종 수 세기</span></span><br><span class="line">sex = penguins[<span class="string">&quot;sex&quot;</span>].dropna().unique()</span><br><span class="line">island = penguins[<span class="string">&quot;island&quot;</span>].dropna().unique()</span><br><span class="line">species = penguins[<span class="string">&quot;species&quot;</span>].dropna().unique()</span><br><span class="line"></span><br><span class="line"><span class="comment"># X방향 axes: sex</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(sex)): </span><br><span class="line">    <span class="comment"># Y방향 axes: island</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(island)):</span><br><span class="line">        <span class="comment"># 색상 : species</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(species)):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                axes[i][j].scatter(penguins.loc[penguins[<span class="string">&quot;sex&quot;</span>] == sex[i]].loc[penguins[<span class="string">&quot;island&quot;</span>] == island[j]].loc[penguins[<span class="string">&quot;species&quot;</span>] == species[k]][<span class="string">&quot;bill_length_mm&quot;</span>], </span><br><span class="line">                                   penguins.loc[penguins[<span class="string">&quot;sex&quot;</span>] == sex[i]].loc[penguins[<span class="string">&quot;island&quot;</span>] == island[j]].loc[penguins[<span class="string">&quot;species&quot;</span>] == species[k]][<span class="string">&quot;bill_depth_mm&quot;</span>])</span><br><span class="line">                axes[i][j].set_title(<span class="string">f&quot;sex = <span class="subst">&#123;sex[i]&#125;</span> | island = <span class="subst">&#123;island[j]&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span>:  <span class="comment"># 결측치 예외처리</span></span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">		</span><br><span class="line">        <span class="comment"># 맨 아래줄에만 xlabel 추가</span></span><br><span class="line">        axes[<span class="built_in">len</span>(sex)<span class="number">-1</span>, j].set_xlabel(<span class="string">&quot;bill_length_mm&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 맨 왼쪽에만 ylabel 추가</span></span><br><span class="line">    axes[i, <span class="number">0</span>].set_ylabel(<span class="string">&quot;bill_depth_mm&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 그래프 우측에 범례 표시</span></span><br><span class="line">fig.legend(species,  title=<span class="string">&quot;species&quot;</span>, bbox_to_anchor=(<span class="number">0.95</span>, <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 그래프 간격 조정</span></span><br><span class="line">fig.tight_layout(rect=[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.85</span>,<span class="number">1</span>])</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97869888-81adaa80-1d55-11eb-92f6-a0bdb2856edd.png"></p>
<ul>
<li><p>따로 꾸민 것도 없는데 매우 번잡합니다.</p>
<ol>
<li><strong>인자별로 몇가지인지</strong>를 알아내야 합니다.</li>
<li><strong>결측치 처리</strong>가 필요합니다. 안하면 에러납니다.</li>
<li><strong>색상별로 따로</strong> 그려야 합니다.</li>
</ol>
</li>
<li><p>그런데 seaborn을 사용하면 <strong>세 줄</strong> 만에 끝납니다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g = sns.FacetGrid(penguins, row=<span class="string">&quot;sex&quot;</span>, col=<span class="string">&quot;island&quot;</span>, hue=<span class="string">&quot;species&quot;</span>)</span><br><span class="line">g.<span class="built_in">map</span>(sns.scatterplot, <span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>)</span><br><span class="line">g.add_legend()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97870041-b9b4ed80-1d55-11eb-9a73-0b575ac9a11d.png"></p>
<ul>
<li><p><code>FacetGrid()</code>로 만든 <strong>공간</strong>을 <code>.map()</code>으로 <strong>채웁니다.</strong></p>
<ul>
<li>데이터셋 이름, 변수 이름, 그리는 방식 외에 다른 내용이 없습니다.</li>
<li>인자가 여럿인 관계를 보기에 아주 좋습니다.</li>
</ul>
</li>
<li><p><strong>밀도 함수</strong><code>density plot</code>로 바꾸는 것도 간단합니다.</p>
</li>
<li><p>위 코드에서 <code>sns.scatterplot</code>만 <code>sns.kdeplot</code>으로 넣으면 됩니다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g = sns.FacetGrid(penguins, row=<span class="string">&quot;sex&quot;</span>, col=<span class="string">&quot;island&quot;</span>, hue=<span class="string">&quot;species&quot;</span>)</span><br><span class="line">g.<span class="built_in">map</span>(sns.kdeplot, <span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>)</span><br><span class="line">g.add_legend()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97870305-24febf80-1d56-11eb-8218-83388fc63a9b.png"></p>
<ul>
<li><code>figure-level</code> 함수는 <strong>복잡한 그림을 간단히 그릴 때</strong> 매우 강력합니다.</li>
<li>이 그림들을 <code>matplotlib</code>으로 그리려면 얼마나 막막할까요.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97870569-78710d80-1d56-11eb-85b0-9fc05e784407.png" alt="이런 그림이 두 세 줄로 나옵니다."></p>
<h2 id="3-2-figure-level-꾸미기-FacetGrid"><a href="#3-2-figure-level-꾸미기-FacetGrid" class="headerlink" title="3.2. figure-level 꾸미기: FacetGrid()"></a>3.2. <code>figure-level</code> 꾸미기: <code>FacetGrid()</code></h2><p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.FacetGrid.html">seaborn.FacetGrid</a>  </p>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.kdeplot.html?highlight=kdeplot#seaborn.kdeplot">seaborn.kdeplot</a>  </p>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.regplot.html">seaborn.regplot</a>  </p>
<ul>
<li><p>이번엔 <code>figure-level</code> 그림을 꾸며 보겠습니다.</p>
<ol>
<li><code>kdeplot</code>위에 <strong>추세선</strong>을 겹쳐 그립니다.<ul>
<li>추세선이 중간에 안끊기면 좋겠습니다.</li>
<li>신뢰구간은 80% 수준으로 그리고 싶습니다.</li>
</ul>
</li>
<li><strong>xlabel</strong>을 “Bill Length (mm)”로 바꾸고</li>
<li><strong>ylabel</strong>을 “Bill Depth (mm)”로 바꿉니다.</li>
</ol>
</li>
<li><p>공식 홈페이지의 설명에 힘입어 해냈습니다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">g = sns.FacetGrid(penguins, row=<span class="string">&quot;sex&quot;</span>, col=<span class="string">&quot;island&quot;</span>, hue=<span class="string">&quot;species&quot;</span>)</span><br><span class="line">g.<span class="built_in">map</span>(sns.kdeplot, <span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line">g.<span class="built_in">map</span>(sns.regplot, <span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, truncate=<span class="literal">False</span>, ci=<span class="number">80</span>, scatter=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">g.set_axis_labels(<span class="string">&quot;Bill Length (mm)&quot;</span>, <span class="string">&quot;Bill Depth (mm)&quot;</span>)</span><br><span class="line">g.add_legend()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97871138-5deb6400-1d57-11eb-85fa-776aaea3eaec.png"></p>
<ul>
<li><p><strong>한 단계 더 꾸며보도록 합시다.</strong></p>
<ol>
<li>xlabel, ylabel <strong>글자를 키우고 싶습니다.</strong></li>
<li>추세선의 <strong>신뢰구간 80%를 적어두고</strong> 싶습니다.</li>
<li>axes마다 붙어 있는 <strong>title을 정리</strong>하고 싶습니다.</li>
</ol>
</li>
<li><p>첫 단계에서 막혔습니다</p>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97871394-c9353600-1d57-11eb-9248-73e716411e3d.png" alt="검색 결과가 안나옵니다"></p>
<ul>
<li><p>xlabel, ylabel을 수정할 때 <code>set_axis_labels()</code>를 사용했습니다.</p>
<ul>
<li>공식 홈페이지의 <code>FacetGrid()</code>부분 가이드를 따른 것입니다.</li>
<li>그런데 <code>set_axis_labels()</code>에 대한 <strong>설명이 더 이상 없습니다.</strong></li>
</ul>
</li>
<li><p>혹시나, matplotlib 명령어를 넣어봅니다.</p>
</li>
<li><p><code>fontdict=</code>를 적용합니다</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">g = sns.FacetGrid(penguins, row=<span class="string">&quot;sex&quot;</span>, col=<span class="string">&quot;island&quot;</span>, hue=<span class="string">&quot;species&quot;</span>)</span><br><span class="line">g.<span class="built_in">map</span>(sns.kdeplot, <span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line">g.<span class="built_in">map</span>(sns.regplot, <span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, truncate=<span class="literal">False</span>, ci=<span class="number">80</span>, scatter=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">g.set_axis_labels(<span class="string">&quot;Bill Length (mm)&quot;</span>, <span class="string">&quot;Bill Depth (mm)&quot;</span>, </span><br><span class="line">                  fontdict=&#123;<span class="string">&quot;fontsize&quot;</span>:<span class="string">&quot;large&quot;</span>, <span class="string">&quot;color&quot;</span>:<span class="string">&quot;gray&quot;</span>, <span class="string">&quot;fontweight&quot;</span>:<span class="string">&quot;bold&quot;</span>&#125;)</span><br><span class="line">g.add_legend()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97872058-bcfda880-1d58-11eb-9c45-f1adf4f7f4a3.png" alt="적용되었습니다"></p>
<ul>
<li><code>figure-level</code> <strong>그림의 세부 설정은 도움말 찾기도 어렵습니다.</strong></li>
<li>매뉴얼에 없는 내용을 상상해서 넣어야 합니다.<ul>
<li>아직은 공식 홈페이지가 충만하지 않습니다.</li>
<li>소스코드를 뜯어봐서 기능을 확인하거나</li>
<li><strong>matplotlib 명령어를 숙지하고</strong> 대응시켜 시도해야 합니다.</li>
</ul>
</li>
</ul>
<h2 id="3-3-figure-level의-장단점"><a href="#3-3-figure-level의-장단점" class="headerlink" title="3.3. figure-level의 장단점"></a>3.3. <code>figure-level</code>의 장단점</h2><ul>
<li><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/tutorial.html">공식 튜토리얼</a>에 정리된 장단점은 이렇습니다</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97872341-385f5a00-1d59-11eb-89a0-20939f873614.png" alt="figure-level function의 장단점"></p>
<ul>
<li><p>하나씩 짚어보겠습니다.  </p>
</li>
<li><p><strong>(1) 데이터 변수에 따른 축공간 생성</strong></p>
<ul>
<li>matplotlib에서 변수 갯수를 세어야 했던 것에 비해서 편리합니다.</li>
<li>seaborn에 구현된 그림을 제어하는 인자 수가 확실히 적습니다.</li>
<li>번거롭더라도 axes에 직접 접근해서 matplotlib 명령을 쓰는 게 낫습니다.</li>
</ul>
</li>
<li><p><strong>(2) 그림 밖 범례 생성</strong></p>
<ul>
<li>그림 밖에 붙는 것은 다행입니다.</li>
<li>그러나 통제가 안되어 심각한 갈증을 유발합니다.</li>
</ul>
</li>
<li><p><strong>(3) figure-level 수정 &amp; (4) figure size를 조정하는 인자가 다름</strong></p>
<ul>
<li>장점보다 단점이 크다고 생각됩니다.</li>
<li>더 쉬운 명령어를 제공한다고 해도 결국은 또 다른 문법입니다.</li>
<li>matplotlib 명령어만 해도 정신이 없는데 말이죠.</li>
</ul>
</li>
<li><p>지금까지의 경험으로 이런 결론이 나옵니다.</p>
<ul>
<li><strong>“figure-level의 가성비는 그리자마자, 손을 더 대기 전이 가장 높다.”</strong></li>
<li>새로운 명령어는 새로운 혼돈입니다.</li>
<li>시각화만 붙잡고 있을 게 아니라 통계분석, 머신러닝도 해야 하거든요.</li>
</ul>
</li>
</ul>
<h2 id="3-4-figure-level그림이-손대기-어려운-이유"><a href="#3-4-figure-level그림이-손대기-어려운-이유" class="headerlink" title="3.4. figure-level그림이 손대기 어려운 이유"></a>3.4. <code>figure-level</code>그림이 손대기 어려운 이유</h2><p><a target="_blank" rel="noopener" href="https://github.com/mwaskom/seaborn">github: seaborn source code</a>  </p>
<ul>
<li>seaborn 코드를 뜯어보면 클래스 구조는 이렇습니다.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97872734-df43f600-1d59-11eb-9f78-73cf227d6de0.png" alt="simplified UML of seaborn"></p>
<ul>
<li><p>multi-plot grids는 Grid 클래스를 상속받는 가족입니다.</p>
<ul>
<li><code>FacetGrid()</code>, <code>PairGrid()</code>, <code>ClusterGrid</code> 입니다.</li>
<li><code>JointGrid()</code>는 Grid를 상속받지 않습니다.</li>
<li>Grid로 만든 공간에 목적에 맞는 그림을 채웁니다.</li>
<li><code>relplot()</code>, <code>displot()</code>, <code>catplot()</code>, <code>lmplot()</code>은 1x1 <code>FacetGrid()</code>로 출력됩니다.</li>
</ul>
</li>
<li><p>그리고 <strong>Grid 클래스는 **<code>figure</code>**의 wrapper입니다.</strong></p>
<ul>
<li>정확히는 <code>matplotlib.pyplot.subplots()</code>의 wrapper입니다.</li>
<li>따라서 <code>figure</code>, <code>axes</code>에 적용되는 matplotlib 명령이 안통합니다.</li>
<li>그래서 <code>set_axis_labels</code>같은 자체 명령어를 탑재하고 있습니다.</li>
<li>하지만 보셨다시피 도움말이 충분치 않습니다.</li>
</ul>
</li>
</ul>
<h2 id="3-5-figure-level-그림을-꾸미는-방법"><a href="#3-5-figure-level-그림을-꾸미는-방법" class="headerlink" title="3.5. figure-level 그림을 꾸미는 방법"></a>3.5. <code>figure-level</code> 그림을 꾸미는 방법</h2><p><a target="_blank" rel="noopener" href="http://blog.wellcomelibrary.org/2015/09/doctor-the-hearts-stopped/">Doctor! The heart’s stopped!</a>  </p>
<ul>
<li><p>한마디로, <strong>seaborn 제공 함수는 한계가 큽니다.</strong></p>
<ul>
<li>기능 자체도 많이 빠져있고</li>
<li>있는 기능도 문서화가 덜 됐습니다.</li>
<li>이걸 믿고 쓰긴 어렵습니다.</li>
</ul>
</li>
<li><p>하지만 대안이 있습니다.</p>
<ul>
<li>seaborn 그림을 matplotlib 그림으로 간주합니다.</li>
<li><code>figure-level</code> 객체 안으로 <strong>한 걸음 들어갑니다.</strong></li>
<li>그리고 <code>figure</code><strong>와</strong> <code>axes</code><strong>를 직접 건드립니다.</strong></li>
</ul>
</li>
<li><p>개흉 심장마사지를 상상하시면 됩니다.</p>
</li>
<li><p>가슴을 열고 직접 심장을 마사지하는 겁니다.  </p>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97873228-a9534180-1d5a-11eb-9fa4-7a494b04dd36.jpg" alt="이미지 = Treatment of Cardiac Arrest"></p>
<ul>
<li>그러면, 풀지 못했던 난제도 이렇게 풀립니다.  </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">g = sns.FacetGrid(penguins, row=<span class="string">&quot;sex&quot;</span>, col=<span class="string">&quot;island&quot;</span>, hue=<span class="string">&quot;species&quot;</span>, margin_titles=<span class="literal">True</span>, despine=<span class="literal">False</span>)</span><br><span class="line">g.<span class="built_in">map</span>(sns.kdeplot, <span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line">g.<span class="built_in">map</span>(sns.regplot, <span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, truncate=<span class="literal">False</span>, ci=<span class="number">80</span>, scatter=<span class="literal">False</span>)</span><br><span class="line">g.add_legend()</span><br><span class="line"></span><br><span class="line"><span class="comment"># xlabel, ylabel 수정</span></span><br><span class="line">g.set_axis_labels(<span class="string">&quot;Bill Length (mm)&quot;</span>, <span class="string">&quot;Bill Depth (mm)&quot;</span>, </span><br><span class="line">                  fontdict=&#123;<span class="string">&quot;fontsize&quot;</span>:<span class="string">&quot;large&quot;</span>, <span class="string">&quot;color&quot;</span>:<span class="string">&quot;gray&quot;</span>, <span class="string">&quot;fontweight&quot;</span>:<span class="string">&quot;bold&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># axes 직접 접근, 1차원 행렬로 표현</span></span><br><span class="line">axs = g.axes.ravel()</span><br><span class="line"><span class="keyword">for</span> i, ax <span class="keyword">in</span> <span class="built_in">enumerate</span>(axs):</span><br><span class="line">    <span class="comment"># 열 title 수정</span></span><br><span class="line">    <span class="keyword">if</span> i &lt; <span class="number">3</span>:</span><br><span class="line">        ax.set_title(ax.get_title(), fontdict=&#123;<span class="string">&quot;fontsize&quot;</span>:<span class="string">&quot;x-large&quot;</span>, <span class="string">&quot;color&quot;</span>:<span class="string">&quot;k&quot;</span>&#125;, pad=<span class="number">12</span>)</span><br><span class="line">	</span><br><span class="line">    <span class="comment"># 행 title 수정</span></span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">3</span> == <span class="number">2</span>:</span><br><span class="line">        sex = <span class="string">&quot;Male&quot;</span> <span class="keyword">if</span> i == <span class="number">2</span> <span class="keyword">else</span> <span class="string">&quot;Female&quot;</span></span><br><span class="line">        ax.texts.clear()</span><br><span class="line">        text = ax.annotate(<span class="string">f&quot;sex = <span class="subst">&#123;sex&#125;</span>&quot;</span>, xy=(<span class="number">1.02</span>, <span class="number">.5</span>), xycoords=<span class="string">&quot;axes fraction&quot;</span>, rotation=<span class="number">270</span>, </span><br><span class="line">                           ha=<span class="string">&quot;left&quot;</span>, va=<span class="string">&quot;center&quot;</span>, fontsize=<span class="string">&quot;x-large&quot;</span>, color=<span class="string">&quot;k&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># suptitle 추가</span></span><br><span class="line">g.fig.suptitle(<span class="string">&quot;Penguins dataset summary (ci = 80%)        &quot;</span>, </span><br><span class="line">               fontsize=<span class="string">&quot;xx-large&quot;</span>, fontweight=<span class="string">&quot;bold&quot;</span>, color=<span class="string">&quot;indigo&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 전반적 크기 조정			   </span></span><br><span class="line">g.fig.tight_layout(rect=[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.88</span>,<span class="number">0.97</span>])</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97873451-fb946280-1d5a-11eb-9c98-610cd86fab77.png"></p>
<ul>
<li><strong>외웁시다.</strong><ul>
<li><code>figure-level</code> 함수는 <strong>matplotlib과 못 섞는다.</strong></li>
<li><code>figure-level</code> 함수는 <code>figure</code>와 <code>axes</code>를 한번 더 감싸고 있다.</li>
<li><code>figure-level</code> 함수를 수정하려면 <strong>후벼 파는</strong> 과정이 필요하다.</li>
</ul>
</li>
</ul>
<p>출저: <a target="_blank" rel="noopener" href="https://jehyunlee.github.io/2020/10/06/Python-DS-36-seaborn_matplotlib3/">https://jehyunlee.github.io/2020/10/06/Python-DS-36-seaborn_matplotlib3/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-11-06T08:58:19.271Z" title="2020-11-06T08:58:19.271Z">2020-11-06</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-11-02T07:02:22.000Z" title="2020-11-02T07:02:22.000Z">2020-11-02</time></span><span class="level-item">24 minutes read (About 3612 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/11/06/Seaborn_with_Matplotlib_2/">Seaborn with Matplotlib (2)</a></h1><div class="content"><h1 id="2-seaborn-matplotlib을-이용한-jointplot-보완"><a href="#2-seaborn-matplotlib을-이용한-jointplot-보완" class="headerlink" title="2. seaborn + matplotlib을 이용한 jointplot 보완"></a>2. seaborn + matplotlib을 이용한 jointplot 보완</h1><ul>
<li>seaborn을 matplotlib과 섞어쓰는 방법입니다.</li>
<li>4부 중 두 번째 시간입니다.</li>
<li>seaborn jointplot의 단점을 보완합니다.</li>
</ul>
<h2 id="2-1-seaborn-jointplot"><a href="#2-1-seaborn-jointplot" class="headerlink" title="2.1. seaborn jointplot"></a>2.1. seaborn jointplot</h2><p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.jointplot.html">seaborn API</a></p>
<ul>
<li>seaborn의 <code>jointplot</code>은 매력적인 기능입니다.<ul>
<li>두 변수 <strong>각각의 분포</strong>와 <strong>2차원 분포</strong>를 함께 보여줍니다.</li>
<li>각각의 분포는 <code>histogram</code><strong>과</strong> <code>kdeplot</code>으로 표현할 수 있고</li>
<li>2차원 분포는 <code>scatterplot</code>, <code>regression</code>, <code>kdeplot</code>, <code>hexbin</code>등으로 표현할 수 있습니다.</li>
</ul>
</li>
<li>만약 matplotlib에서 일일이 만들어야 한다면 눈물이 앞을 가릴 일입니다.</li>
<li>seaborn에서는 <strong>단 한 줄</strong>로 이런 그림들이 탄생합니다.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97837289-3e394900-1d21-11eb-9ec9-576852608d0a.png" alt="jointplot 예제"></p>
<h2 id="2-2-multiple-jointplot"><a href="#2-2-multiple-jointplot" class="headerlink" title="2.2. multiple jointplot"></a>2.2. multiple jointplot</h2><ul>
<li>그러나 seaborn 만으로는 여러 jointplot이 합쳐진 그림을 <strong>표현할 수 없습니다.</strong></li>
<li>y축을 공유시키는 것 만으로도 훨씬 기능이 강력해질텐데요.</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97837459-97a17800-1d21-11eb-9862-08215526a5ac.png" alt="multiple jointplot"></p>
<ul>
<li>현실적으로 가장 빠른 방법은 파워포인트입니다.</li>
<li>같은 y축 범위로 그림을 여러 개 그린 후 붙이면 됩니다.  </li>
</ul>
<p><img src="https://user-images.githubusercontent.com/72365663/97837547-bf90db80-1d21-11eb-95de-30dc4de37f83.png" alt="파워포인트 작업"></p>
<ul>
<li>그러나 수작업이 동반되고, 오류 가능성이 커집니다.</li>
<li>seaborn과 matplotlib의 힘을 합해서 그려봅시다.</li>
</ul>
<h2 id="2-3-matplotlib-seaborn"><a href="#2-3-matplotlib-seaborn" class="headerlink" title="2.3. matplotlib + seaborn"></a>2.3. matplotlib + seaborn</h2><ul>
<li>지난 글에서 <strong>seaborn과 matplotlib이 섞일 수 있음</strong>을 보였습니다.</li>
<li><strong>matplotlib으로 틀을 만들고 여기에 seaborn을 삽입</strong>합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">penguins = sns.load_dataset(<span class="string">&quot;penguins&quot;</span>)  <span class="comment"># 펭귄 데이터셋으로 시작합니다.</span></span><br><span class="line">penguins.head()</span><br></pre></td></tr></table></figure>

<ul>
<li><p>가로축에 두 개의 데이터 : <code>bill_length_mm</code>, <code>flipper_length_mm</code>,</p>
</li>
<li><p>세로축에 한 개의 데이터 : <code>bill_depth_mm</code>를 놓아보겠습니다.</p>
</li>
</ul>
<h3 id="2-3-1-축공간-배열-gridspec"><a href="#2-3-1-축공간-배열-gridspec" class="headerlink" title="2.3.1. 축공간 배열 : gridspec"></a>2.3.1. 축공간 배열 : gridspec</h3><p><a target="_blank" rel="noopener" href="https://matplotlib.org/3.3.2/api/_as_gen/matplotlib.pyplot.subplots.html">matplotlib.pyplot.subplots</a>  </p>
<p><a target="_blank" rel="noopener" href="https://matplotlib.org/api/_as_gen/matplotlib.gridspec.GridSpec.html#matplotlib.gridspec.GridSpec">matplotlib.gridspec.GridSpec</a></p>
<ul>
<li><p>저는 matplotlib을 객체지향 방식으로 사용할 때 이렇게 합니다.</p>
<ul>
<li><code>fig, ax = plt.subplots()</code> 명령으로 <code>figure</code>와 <code>axes</code>를 만드는데</li>
<li>가로세로 여러 axes를 만들 때는 <code>ncols</code>, <code>nrows</code> 인자를 사용합니다.</li>
<li>그러나 이렇게 하면 <strong>모든 축공간의 크기가 같아집니다.</strong></li>
</ul>
</li>
<li><p><code>jointplot</code>은 축공간의 크기가 일정하지 않습니다.</p>
</li>
<li><p><code>gridspec</code>을 이용해서 비대칭 축공간을 만듭니다.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>,<span class="number">7</span>))</span><br><span class="line"></span><br><span class="line">widths = [<span class="number">4</span>, <span class="number">4</span>, <span class="number">1</span>]</span><br><span class="line">heights = [<span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">### 1. gridspec preparation</span></span><br><span class="line">spec = fig.add_gridspec(ncols=<span class="number">3</span>, nrows=<span class="number">2</span>, width_ratios=widths, height_ratios=heights)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 2. setting axes</span></span><br><span class="line">axs = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(heights)*<span class="built_in">len</span>(widths)):</span><br><span class="line">    axs[i] = fig.add_subplot(spec[i//<span class="built_in">len</span>(widths), i%<span class="built_in">len</span>(widths)])</span><br><span class="line">    axs[i].text(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="string">f&quot;axs[<span class="subst">&#123;i&#125;</span>]&quot;</span>, fontdict=&#123;<span class="string">&quot;horizontalalignment&quot;</span>:<span class="string">&quot;center&quot;</span>, <span class="string">&quot;color&quot;</span>:<span class="string">&quot;gray&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/72365663/97837857-65dce100-1d22-11eb-994e-f6c5d3591038.png"></p>
<ul>
<li>축공간은 원래 2차원 배열입니다.</li>
<li>하지만 이를 별로 좋아하지 않아서, <code>dictionary</code>를 사용해 1차원으로 취급합니다.</li>
<li>개인적인 취향입니다. 꼭 따르지 않아도 좋습니다.</li>
</ul>
<h3 id="2-3-2-첫-번째-jointplot-scatterplot-kdeplot"><a href="#2-3-2-첫-번째-jointplot-scatterplot-kdeplot" class="headerlink" title="2.3.2. 첫 번째 jointplot : scatterplot + kdeplot"></a>2.3.2. 첫 번째 jointplot : scatterplot + kdeplot</h3><p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.scatterplot.html">seaborn.scatterplot</a>  </p>
<p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/generated/seaborn.kdeplot.html">seaborn.kdeplot</a></p>
<ul>
<li>좌측 하단에 첫 번째 2차원 분포도를 그립니다.</li>
<li>x축 변수는 bill_length_nm, y축 변수는 bill_depth_mm로 지정합니다.</li>
<li>seaborn 명령의 ax= 인자를 사용해 축공간을 지정합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>,<span class="number">7</span>))</span><br><span class="line"></span><br><span class="line">widths = [<span class="number">4</span>, <span class="number">4</span>, <span class="number">1</span>]</span><br><span class="line">heights = [<span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. gridspec preparation</span></span><br><span class="line">spec = fig.add_gridspec(ncols=<span class="number">3</span>, nrows=<span class="number">2</span>, width_ratios=widths, height_ratios=heights)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. setting axes</span></span><br><span class="line">axs = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(heights)*<span class="built_in">len</span>(widths)):</span><br><span class="line">    axs[i] = fig.add_subplot(spec[i//<span class="built_in">len</span>(widths), i%<span class="built_in">len</span>(widths)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. bill_length_mm vs bill_depth_mm</span></span><br><span class="line"><span class="comment"># 3.1. kdeplot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, alpha=<span class="number">0.3</span>, ax=axs[<span class="number">3</span>])</span><br><span class="line"><span class="comment"># 3.2. scatterplot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/72365663/97838046-bfdda680-1d22-11eb-8a94-007039b14f33.png"></p>
<h3 id="2-3-3-첫-번째-jointplot-1차원-kdeplot"><a href="#2-3-3-첫-번째-jointplot-1차원-kdeplot" class="headerlink" title="2.3.3. 첫 번째 jointplot : 1차원 kdeplot"></a>2.3.3. 첫 번째 jointplot : 1차원 kdeplot</h3><ul>
<li>첫 번째 jointplot의 상단과 우측에 1차원 분포도를 그립니다.</li>
<li>두 가지를 주의해야 합니다.</li>
</ul>
<ol>
<li>중심이 되는 jointplot과 <strong>가로세로 범위를 일치</strong>시켜야 합니다.</li>
<li>1차원 분포도의 <strong>눈금과 수치는 필요없으니 제거</strong>합니다.</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>,<span class="number">7</span>))</span><br><span class="line"></span><br><span class="line">widths = [<span class="number">4</span>, <span class="number">4</span>, <span class="number">1</span>]</span><br><span class="line">heights = [<span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">### 1. gridspec preparation</span></span><br><span class="line">spec = fig.add_gridspec(ncols=<span class="number">3</span>, nrows=<span class="number">2</span>, width_ratios=widths, height_ratios=heights)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 2. setting axes</span></span><br><span class="line">axs = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(heights)*<span class="built_in">len</span>(widths)):</span><br><span class="line">    axs[i] = fig.add_subplot(spec[i//<span class="built_in">len</span>(widths), i%<span class="built_in">len</span>(widths)])</span><br><span class="line"></span><br><span class="line"><span class="comment">### 3. bill_length_mm vs bill_depth_mm</span></span><br><span class="line"><span class="comment"># 3.1. kdeplot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, alpha=<span class="number">0.3</span>, ax=axs[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.2. scatterplot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_length_mm)</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">0</span>], legend=<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_xlim(axs[<span class="number">3</span>].get_xlim())</span><br><span class="line">axs[<span class="number">0</span>].set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_xticklabels([])</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_depth_mm)</span></span><br><span class="line">sns.kdeplot(y=<span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">5</span>], legend=<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_ylim(axs[<span class="number">3</span>].get_ylim())</span><br><span class="line">axs[<span class="number">5</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_yticklabels([])</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;bottom&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97838225-14812180-1d23-11eb-8afc-bd7f90c6f408.png"></p>
<h3 id="2-3-4-두-번째-jointplot"><a href="#2-3-4-두-번째-jointplot" class="headerlink" title="2.3.4. 두 번째 jointplot"></a>2.3.4. 두 번째 jointplot</h3><ul>
<li>같은 요령으로 두 번째 분포도 도시합니다.</li>
<li>첫 번째 jointplot에서 x 변수만 바꿔주면 됩니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>,<span class="number">7</span>))</span><br><span class="line"></span><br><span class="line">widths = [<span class="number">4</span>, <span class="number">4</span>, <span class="number">1</span>]</span><br><span class="line">heights = [<span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">### 1. gridspec preparation</span></span><br><span class="line">spec = fig.add_gridspec(ncols=<span class="number">3</span>, nrows=<span class="number">2</span>, width_ratios=widths, height_ratios=heights)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 2. setting axes</span></span><br><span class="line">axs = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(heights)*<span class="built_in">len</span>(widths)):</span><br><span class="line">    axs[i] = fig.add_subplot(spec[i//<span class="built_in">len</span>(widths), i%<span class="built_in">len</span>(widths)])</span><br><span class="line"></span><br><span class="line"><span class="comment">### 3. bill_length_mm vs bill_depth_mm</span></span><br><span class="line"><span class="comment"># 3.1. kdeplot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, alpha=<span class="number">0.3</span>, ax=axs[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.2. scatterplot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_length_mm)</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">0</span>], legend=<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_xlim(axs[<span class="number">3</span>].get_xlim())</span><br><span class="line">axs[<span class="number">0</span>].set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_xticklabels([])</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_depth_mm)</span></span><br><span class="line">sns.kdeplot(y=<span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">5</span>], legend=<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_ylim(axs[<span class="number">3</span>].get_ylim())</span><br><span class="line">axs[<span class="number">5</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_yticklabels([])</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;bottom&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 4. flipper_length_mm vs bill_depth_mm</span></span><br><span class="line"><span class="comment"># 3.1. kdeplot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;flipper_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, alpha=<span class="number">0.3</span>, ax=axs[<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.2. scatterplot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;flipper_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_length_mm)</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;flipper_length_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">1</span>], legend=<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">1</span>].set_xlim(axs[<span class="number">4</span>].get_xlim())</span><br><span class="line">axs[<span class="number">1</span>].set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">1</span>].set_xticklabels([])</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97838321-4befce00-1d23-11eb-8358-ce804aefa471.png"></p>
<h3 id="2-3-5-부대효과-조정-spines-grids-간격"><a href="#2-3-5-부대효과-조정-spines-grids-간격" class="headerlink" title="2.3.5. 부대효과 조정 : spines, grids, 간격"></a>2.3.5. 부대효과 조정 : spines, grids, 간격</h3><ul>
<li>데이터는 모두 올라갔으니 부대 효과를 조정합니다.</li>
<li>불필요한 요소(ex. <code>spines</code>)는 제거하고, 애매한 요소(ex. 위치)는 <code>grid</code>로 명확히 합니다</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">12</span>,<span class="number">7</span>))</span><br><span class="line"></span><br><span class="line">widths = [<span class="number">4</span>, <span class="number">4</span>, <span class="number">1</span>]</span><br><span class="line">heights = [<span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">### 1. gridspec preparation</span></span><br><span class="line">spec = fig.add_gridspec(ncols=<span class="number">3</span>, nrows=<span class="number">2</span>, width_ratios=widths, height_ratios=heights, </span><br><span class="line">                        wspace=<span class="number">0.03</span>, hspace=<span class="number">0.03</span>)  <span class="comment"># setting spaces</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 2. setting axes</span></span><br><span class="line">axs = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(heights)*<span class="built_in">len</span>(widths)):</span><br><span class="line">    axs[i] = fig.add_subplot(spec[i//<span class="built_in">len</span>(widths), i%<span class="built_in">len</span>(widths)])</span><br><span class="line"></span><br><span class="line"><span class="comment">### 3. bill_length_mm vs bill_depth_mm</span></span><br><span class="line"><span class="comment"># 3.1. kdeplot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, alpha=<span class="number">0.3</span>, ax=axs[<span class="number">3</span>], zorder=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.2. scatterplot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">3</span>], zorder=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_length_mm)</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">0</span>], legend=<span class="literal">False</span>, zorder=<span class="number">1</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_xlim(axs[<span class="number">3</span>].get_xlim())</span><br><span class="line">axs[<span class="number">0</span>].set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_xticklabels([])</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_depth_mm)</span></span><br><span class="line">sns.kdeplot(y=<span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">5</span>], legend=<span class="literal">False</span>, zorder=<span class="number">1</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_ylim(axs[<span class="number">3</span>].get_ylim())</span><br><span class="line">axs[<span class="number">5</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_yticklabels([])</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;bottom&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 4. flipper_length_mm vs bill_depth_mm</span></span><br><span class="line"><span class="comment"># 4.1. kdeplot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;flipper_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, alpha=<span class="number">0.3</span>, ax=axs[<span class="number">4</span>], zorder=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.2. scatterplot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;flipper_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">4</span>], zorder=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.3. histogram (flipper_length_mm)</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;flipper_length_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">1</span>], legend=<span class="literal">False</span>, zorder=<span class="number">1</span>)</span><br><span class="line">axs[<span class="number">1</span>].set_xlim(axs[<span class="number">4</span>].get_xlim())</span><br><span class="line">axs[<span class="number">1</span>].set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">1</span>].set_xticklabels([])</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 5. unnecessary elements removal</span></span><br><span class="line"><span class="comment"># 5.1. upper-right axes</span></span><br><span class="line">axs[<span class="number">2</span>].axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.2. margin kdeplot scale unification</span></span><br><span class="line">hist_range_max = <span class="built_in">max</span>(axs[<span class="number">0</span>].get_ylim()[<span class="number">-1</span>], axs[<span class="number">1</span>].get_ylim()[<span class="number">-1</span>], axs[<span class="number">5</span>].get_xlim()[<span class="number">-1</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(widths)<span class="number">-1</span>):</span><br><span class="line">    axs[i].set_ylim(<span class="number">0</span>, hist_range_max)</span><br><span class="line">axs[<span class="number">5</span>].set_xlim(<span class="number">0</span>, hist_range_max)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.3. redundent labels and titles removal</span></span><br><span class="line">axs[<span class="number">1</span>].set_yticklabels([])</span><br><span class="line">axs[<span class="number">1</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">4</span>].set_yticklabels([])</span><br><span class="line">axs[<span class="number">4</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.4. grids</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(heights)*<span class="built_in">len</span>(widths)):</span><br><span class="line">    axs[i].grid(<span class="string">&quot;on&quot;</span>, color=<span class="string">&quot;lightgray&quot;</span>, zorder=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97838460-93765a00-1d23-11eb-92d0-7c6f5280bef7.png"></p>
<ul>
<li>1차원 분포의 스케일도 맞춰주었습니다.<ul>
<li>그러나 꼭 필요한 작업인지는 의구심이 듭니다.</li>
<li><strong>‘밀도’</strong>라는 정의에 맞게 넓이를 1로 만드는 과정이 포함되어 있는데, 이로 인해 <strong>x축 스케일이 크면 높이가 낮아지는 경향</strong>이 있기 때문입니다.</li>
<li>데이터의 범위에 집중하고 싶다면 스케일을 맞추지 않는 것이 나을지도 모릅니다.</li>
</ul>
</li>
</ul>
<h3 id="2-3-6-마무리-작업"><a href="#2-3-6-마무리-작업" class="headerlink" title="2.3.6. 마무리 작업"></a>2.3.6. 마무리 작업</h3><p><a target="_blank" rel="noopener" href="https://seaborn.pydata.org/tutorial/aesthetics.html">seaborn tutorial: controlling figure aesthetics</a></p>
<ul>
<li>데이터를 표현하는 작업은 사실상 완료되었습니다.</li>
<li>폰트의 크기, 색상 등 가독성을 높입니다.</li>
<li>이 때도 seaborn의 <code>set_style()</code>과 <code>set_context()</code>를 사용하면 편리합니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">sns.set_style(<span class="string">&quot;white&quot;</span>)</span><br><span class="line">sns.set_context(<span class="string">&quot;talk&quot;</span>)</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">14</span>,<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line">widths = [<span class="number">4</span>, <span class="number">4</span>, <span class="number">1</span>]</span><br><span class="line">heights = [<span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">### 1. gridspec preparation</span></span><br><span class="line">spec = fig.add_gridspec(ncols=<span class="number">3</span>, nrows=<span class="number">2</span>, width_ratios=widths, height_ratios=heights, </span><br><span class="line">                        wspace=<span class="number">0.03</span>, hspace=<span class="number">0.03</span>)  <span class="comment"># setting spaces</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 2. setting axes</span></span><br><span class="line">axs = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(heights)*<span class="built_in">len</span>(widths)):</span><br><span class="line">    axs[i] = fig.add_subplot(spec[i//<span class="built_in">len</span>(widths), i%<span class="built_in">len</span>(widths)])</span><br><span class="line"></span><br><span class="line"><span class="comment">### 3. bill_length_mm vs bill_depth_mm</span></span><br><span class="line"><span class="comment"># 3.1. kdeplot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, alpha=<span class="number">0.3</span>, ax=axs[<span class="number">3</span>], zorder=<span class="number">1</span>, legend=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.2. scatterplot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">3</span>], zorder=<span class="number">2</span>, legend=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_length_mm)</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;bill_length_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">0</span>], legend=<span class="literal">False</span>, zorder=<span class="number">1</span>, fill=<span class="literal">True</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_xlim(axs[<span class="number">3</span>].get_xlim())</span><br><span class="line">axs[<span class="number">0</span>].set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_xticklabels([])</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">0</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.3. histogram (bill_depth_mm)</span></span><br><span class="line">sns.kdeplot(y=<span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">5</span>], legend=<span class="literal">False</span>, zorder=<span class="number">1</span>, fill=<span class="literal">True</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_ylim(axs[<span class="number">3</span>].get_ylim())</span><br><span class="line">axs[<span class="number">5</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_yticklabels([])</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;bottom&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">5</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 4. flipper_length_mm vs bill_depth_mm</span></span><br><span class="line"><span class="comment"># 4.1. kdeplot</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;flipper_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, alpha=<span class="number">0.3</span>, ax=axs[<span class="number">4</span>], zorder=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.2. scatterplot</span></span><br><span class="line">sns.scatterplot(<span class="string">&quot;flipper_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">4</span>], zorder=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.3. histogram (flipper_length_mm)</span></span><br><span class="line">sns.kdeplot(<span class="string">&quot;flipper_length_mm&quot;</span>, data=penguins, hue=<span class="string">&quot;species&quot;</span>, ax=axs[<span class="number">1</span>], legend=<span class="literal">False</span>, zorder=<span class="number">1</span>, fill=<span class="literal">True</span>)</span><br><span class="line">axs[<span class="number">1</span>].set_xlim(axs[<span class="number">4</span>].get_xlim())</span><br><span class="line">axs[<span class="number">1</span>].set_xlabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">1</span>].set_xticklabels([])</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">axs[<span class="number">1</span>].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 5. unnecessary elements removal</span></span><br><span class="line"><span class="comment"># 5.1. upper-right axes</span></span><br><span class="line">axs[<span class="number">2</span>].axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.2. margin kdeplot scale unification</span></span><br><span class="line">hist_range_max = <span class="built_in">max</span>(axs[<span class="number">0</span>].get_ylim()[<span class="number">-1</span>], axs[<span class="number">1</span>].get_ylim()[<span class="number">-1</span>], axs[<span class="number">5</span>].get_xlim()[<span class="number">-1</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(widths)<span class="number">-1</span>):</span><br><span class="line">    axs[i].set_ylim(<span class="number">0</span>, hist_range_max)</span><br><span class="line">axs[<span class="number">5</span>].set_xlim(<span class="number">0</span>, hist_range_max)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.3. redundent labels and titles removal</span></span><br><span class="line">axs[<span class="number">1</span>].set_yticklabels([])</span><br><span class="line">axs[<span class="number">1</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">axs[<span class="number">4</span>].set_yticklabels([])</span><br><span class="line">axs[<span class="number">4</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.4. grids</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(heights)*<span class="built_in">len</span>(widths)):</span><br><span class="line">    axs[i].grid(<span class="string">&quot;on&quot;</span>, color=<span class="string">&quot;lightgray&quot;</span>, zorder=<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 5.5. labels</span></span><br><span class="line">font_label = &#123;<span class="string">&quot;color&quot;</span>:<span class="string">&quot;gray&quot;</span>&#125;</span><br><span class="line">axs[<span class="number">3</span>].set_xlabel(<span class="string">&quot;Bill Legnth (mm)&quot;</span>, fontdict=font_label, labelpad=<span class="number">12</span>)</span><br><span class="line">axs[<span class="number">3</span>].set_ylabel(<span class="string">&quot;Bill Depth (mm)&quot;</span>, fontdict=font_label, labelpad=<span class="number">12</span>)</span><br><span class="line">axs[<span class="number">4</span>].set_xlabel(<span class="string">&quot;Flipper Legnth (mm)&quot;</span>, fontdict=font_label, labelpad=<span class="number">12</span>)</span><br><span class="line">axs[<span class="number">0</span>].set_ylabel(<span class="string">&quot;Density&quot;</span>, fontdict=font_label, labelpad=<span class="number">12</span>)</span><br><span class="line">axs[<span class="number">5</span>].set_xlabel(<span class="string">&quot;Density&quot;</span>, fontdict=font_label, labelpad=<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.tight_layout()</span><br></pre></td></tr></table></figure>

<p><img src="https://user-images.githubusercontent.com/72365663/97838684-0f70a200-1d24-11eb-9557-08a73411ef30.png"></p>
<ul>
<li><code>jointplot</code>의 한계인 <strong>2중 jointplot이 구현되었습니다.</strong></li>
</ul>
<h3 id="2-3-7-generalize-함수로-만들기"><a href="#2-3-7-generalize-함수로-만들기" class="headerlink" title="2.3.7. generalize : 함수로 만들기"></a>2.3.7. generalize : 함수로 만들기</h3><ul>
<li>하는 김에, 기능을 일반화합시다.</li>
<li>다중 jointplot 제작 기능을 함수로 만들고,</li>
<li>x 변수의 수와 그림 크기, 1차원 분포 스케일 통일 등을 인자로 만듭니다</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jointplots</span>(<span class="params">xs, y, data, hue=<span class="literal">None</span>, height=<span class="number">6</span>, ratio=<span class="number">5</span>, space=<span class="number">0.2</span>, xlabels=<span class="literal">None</span>, ylabel=<span class="literal">None</span>, margin_norm=<span class="literal">False</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    -------------------</span></span><br><span class="line"><span class="string">    Input Parameters</span></span><br><span class="line"><span class="string">    -------------------</span></span><br><span class="line"><span class="string">    xs      : (list or str) feature name(s) of data</span></span><br><span class="line"><span class="string">    y       : (str) feature name of data</span></span><br><span class="line"><span class="string">    data    : (pandas.DataFrame)</span></span><br><span class="line"><span class="string">    hue     : (str) semantic variable that is mapped to determine the color of plot elements. Semantic variable that is mapped to determine the color of plot elements.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    height  : (float) size of the figure</span></span><br><span class="line"><span class="string">    ratio   : (float) ratio of the joint axes height to marginal axes height.</span></span><br><span class="line"><span class="string">    space   : (float) space between the joint and marginal axes</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    xlabels : (list or str) xlabels</span></span><br><span class="line"><span class="string">    ylabel  : (str) ylabel</span></span><br><span class="line"><span class="string">    margin_norm : (boolean) if True, kdeplots at marginal axes have same scale.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment">### 1. input check</span></span><br><span class="line">    <span class="comment"># input type</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">isinstance</span>(xs, <span class="built_in">list</span>) <span class="keyword">or</span> <span class="built_in">isinstance</span>(xs, <span class="built_in">str</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(xs, <span class="built_in">list</span>):</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">all</span>([<span class="built_in">isinstance</span>(x, <span class="built_in">str</span>) <span class="keyword">for</span> x <span class="keyword">in</span> xs])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        xs = [xs]</span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> xlabels != <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">isinstance</span>(xlabels, <span class="built_in">list</span>) <span class="keyword">or</span> <span class="built_in">isinstance</span>(xlabels, <span class="built_in">str</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(xlabels, <span class="built_in">list</span>):</span><br><span class="line">            <span class="keyword">assert</span> <span class="built_in">all</span>([<span class="built_in">isinstance</span>(xlabel, <span class="built_in">str</span>) <span class="keyword">for</span> xlabel <span class="keyword">in</span> xlabels])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            xlabels = [xlabels]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ylabel != <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">isinstance</span>(ylabel, <span class="built_in">str</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> hue != <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">assert</span> <span class="built_in">isinstance</span>(hue, <span class="built_in">str</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># input data</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="built_in">all</span>([x <span class="keyword">in</span> data.columns <span class="keyword">for</span> x <span class="keyword">in</span> xs])</span><br><span class="line">    <span class="keyword">assert</span> y <span class="keyword">in</span> data.columns</span><br><span class="line">    <span class="keyword">if</span> hue != <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">assert</span> hue <span class="keyword">in</span> data.columns</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">### 2. figure</span></span><br><span class="line">    h_margin = height / (ratio + <span class="number">1</span>)</span><br><span class="line">    h_joint = height - h_margin</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(xs, <span class="built_in">list</span>):</span><br><span class="line">        n_x = <span class="built_in">len</span>(xs)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        n_x = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    widths = [h_joint] * n_x + [h_margin]</span><br><span class="line">    heights = [h_margin, h_joint]</span><br><span class="line">    ncols = <span class="built_in">len</span>(widths)</span><br><span class="line">    nrows = <span class="built_in">len</span>(heights)</span><br><span class="line">    </span><br><span class="line">    fig = plt.figure(figsize=(<span class="built_in">sum</span>(widths), <span class="built_in">sum</span>(heights)))</span><br><span class="line">    </span><br><span class="line">    <span class="comment">### 3. gridspec preparation</span></span><br><span class="line">    spec = fig.add_gridspec(ncols=ncols, nrows=nrows, </span><br><span class="line">                            width_ratios = widths, height_ratios = heights,</span><br><span class="line">                            wspace=space, hspace=space</span><br><span class="line">                           )</span><br><span class="line">    </span><br><span class="line">    <span class="comment">### 4. setting axes</span></span><br><span class="line">    axs = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(ncols * nrows):</span><br><span class="line">        axs[i] = fig.add_subplot(spec[i//ncols, i%ncols])</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">### 5. jointplots (scatterplot + kdeplot)</span></span><br><span class="line">    <span class="keyword">for</span> i, x <span class="keyword">in</span> <span class="built_in">enumerate</span>(xs, ncols):</span><br><span class="line">        <span class="keyword">if</span> i == ncols:</span><br><span class="line">            legend=<span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            legend=<span class="literal">False</span></span><br><span class="line">        sns.kdeplot(x=x, y=y, data=data, hue=hue, alpha=<span class="number">0.3</span>, ax=axs[i], zorder=<span class="number">2</span>, legend=<span class="literal">False</span>)</span><br><span class="line">        sns.scatterplot(x=x, y=y, data=data, hue=hue, alpha=<span class="number">0.8</span>, ax=axs[i], zorder=<span class="number">3</span>, legend=legend)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">### 6. kdeplots at marginal axes</span></span><br><span class="line">    axs[ncols<span class="number">-1</span>].axis(<span class="string">&quot;off&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    axes_mx = <span class="built_in">list</span>(<span class="built_in">range</span>(ncols<span class="number">-1</span>))</span><br><span class="line">    axes_my = <span class="number">2</span>*ncols - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i, x <span class="keyword">in</span> <span class="built_in">zip</span>(axes_mx, xs):</span><br><span class="line">        sns.kdeplot(x=x, data=data, hue=hue, fill=<span class="literal">True</span>, ax=axs[i], zorder=<span class="number">2</span>, legend=<span class="literal">False</span>)</span><br><span class="line">        axs[i].set_xlim(axs[i+ncols].get_xlim())</span><br><span class="line">        axs[i].set_xlabel(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        axs[i].set_xticklabels([])</span><br><span class="line">        axs[i].spines[<span class="string">&quot;left&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">        axs[i].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">        axs[i].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">    </span><br><span class="line">    sns.kdeplot(y=y, data=data, hue=hue, fill=<span class="literal">True</span>, ax=axs[axes_my], zorder=<span class="number">2</span>, legend=<span class="literal">False</span>)</span><br><span class="line">    axs[axes_my].set_ylim(axs[ncols].get_ylim())</span><br><span class="line">    axs[axes_my].set_ylabel(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    axs[axes_my].set_yticklabels([])</span><br><span class="line">    axs[axes_my].spines[<span class="string">&quot;bottom&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">    axs[axes_my].spines[<span class="string">&quot;top&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">    axs[axes_my].spines[<span class="string">&quot;right&quot;</span>].set_visible(<span class="literal">False</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> margin_norm == <span class="literal">True</span>:</span><br><span class="line">        hist_range_max = <span class="built_in">max</span>([axs[m].get_ylim()[<span class="number">-1</span>] <span class="keyword">for</span> m <span class="keyword">in</span> axes_mx] + [axs[axes_my].get_xlim()[<span class="number">-1</span>]])</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> axes_mx:</span><br><span class="line">            axs[i].set_ylim(<span class="number">0</span>, hist_range_max)</span><br><span class="line">        axs[axes_my].set_xlim(<span class="number">0</span>, hist_range_max)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="comment">### 7. unnecessary elements removal</span></span><br><span class="line">    <span class="comment"># 7.1. labels and ticklabels</span></span><br><span class="line">    axes_j = <span class="built_in">list</span>(<span class="built_in">range</span>(ncols, <span class="number">2</span>*ncols<span class="number">-1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> axes_j:</span><br><span class="line">        <span class="keyword">if</span> i != ncols:</span><br><span class="line">            axs[i].set_ylabel(<span class="string">&quot;&quot;</span>)</span><br><span class="line">            axs[i].set_yticklabels([])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 7.2. marginal axes</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> axes_mx:</span><br><span class="line">        <span class="keyword">if</span> i != <span class="number">0</span>:</span><br><span class="line">            axs[i].set_ylabel(<span class="string">&quot;&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        axs[i].grid(<span class="string">&quot;on&quot;</span>, color=<span class="string">&quot;lightgray&quot;</span>, zorder=<span class="number">0</span>)</span><br><span class="line">        axs[i].set_yticklabels([])</span><br><span class="line">        </span><br><span class="line">        yticks = axs[i].get_yticks()</span><br><span class="line">        ylim = axs[i].get_ylim()</span><br><span class="line">        <span class="keyword">for</span> ytick <span class="keyword">in</span> yticks:</span><br><span class="line">            <span class="keyword">if</span> <span class="number">0</span> &lt; ytick &lt; ylim[<span class="number">-1</span>]:</span><br><span class="line">                axs[i].text(axs[i].get_xlim()[<span class="number">0</span>], ytick, <span class="built_in">str</span>(ytick), </span><br><span class="line">                            fontdict=&#123;<span class="string">&quot;verticalalignment&quot;</span>:<span class="string">&quot;center&quot;</span>&#125;)</span><br><span class="line">        </span><br><span class="line">    axs[axes_my].grid(<span class="string">&quot;on&quot;</span>, color=<span class="string">&quot;lightgray&quot;</span>, zorder=<span class="number">0</span>)</span><br><span class="line">    axs[axes_my].set_xticklabels([])</span><br><span class="line">    axes_my_xticks = axs[axes_my].get_xticks()</span><br><span class="line">    axes_my_xlim = axs[axes_my].get_xlim()</span><br><span class="line">    <span class="keyword">for</span> xtick <span class="keyword">in</span> axes_my_xticks:</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span> &lt; xtick &lt; axes_my_xlim[<span class="number">-1</span>]:</span><br><span class="line">            axs[axes_my].text(xtick, axs[axes_my].get_ylim()[<span class="number">0</span>], <span class="built_in">str</span>(xtick), </span><br><span class="line">                              rotation=<span class="number">270</span>, fontdict=&#123;<span class="string">&quot;horizontalalignment&quot;</span>:<span class="string">&quot;center&quot;</span>&#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 7.3. labels</span></span><br><span class="line">    font_label = &#123;<span class="string">&quot;color&quot;</span>: <span class="string">&quot;gray&quot;</span>, <span class="string">&quot;fontsize&quot;</span>:<span class="string">&quot;large&quot;</span>&#125;</span><br><span class="line">    labelpad = <span class="number">12</span></span><br><span class="line">    <span class="keyword">for</span> i, x <span class="keyword">in</span> <span class="built_in">zip</span>(axes_j, xlabels):</span><br><span class="line">        axs[i].set_xlabel(x, fontdict=font_label, labelpad=labelpad)</span><br><span class="line">        <span class="keyword">if</span> i == ncols:</span><br><span class="line">            axs[i].set_ylabel(ylabel, fontdict=font_label, labelpad=labelpad)</span><br><span class="line">    </span><br><span class="line">    axs[<span class="number">0</span>].set_ylabel(<span class="string">&quot;Density&quot;</span>, fontdict=font_label, labelpad=labelpad)</span><br><span class="line">    axs[<span class="number">2</span>*ncols<span class="number">-1</span>].set_xlabel(<span class="string">&quot;Density&quot;</span>, fontdict=font_label, labelpad=labelpad)</span><br><span class="line">    </span><br><span class="line">    fig.align_ylabels([axs[<span class="number">0</span>], axs[ncols]])</span><br><span class="line">    fig.align_xlabels([axs[x] <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(ncols, <span class="number">2</span>*ncols)])</span><br><span class="line">    plt.tight_layout()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> fig, axs</span><br></pre></td></tr></table></figure>

<ul>
<li>X인자의 수가 바뀌어도 jointplot이 안정적으로 그려집니다.</li>
<li>1차원 분포도 표현 방식을 바꾸어 전보다 깔끔해졌습니다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jointplots([<span class="string">&quot;bill_length_mm&quot;</span>, <span class="string">&quot;bill_depth_mm&quot;</span>, <span class="string">&quot;flipper_length_mm&quot;</span>], <span class="string">&quot;body_mass_g&quot;</span>, penguins, hue=<span class="string">&quot;species&quot;</span>, </span><br><span class="line">            height=<span class="number">8</span>, ratio=<span class="number">5</span>, space=<span class="number">0.03</span>, </span><br><span class="line">            xlabels=[<span class="string">&quot;Bill Length (mm)&quot;</span>, <span class="string">&quot;Bill Depth (mm)&quot;</span>, <span class="string">&quot;Flipper Length (mm)&quot;</span>], ylabel=<span class="string">&quot;Body Mass (g)&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://user-images.githubusercontent.com/72365663/97838883-7726ed00-1d24-11eb-9d33-23cd51600705.png"></p>
<h2 id="2-4-결론"><a href="#2-4-결론" class="headerlink" title="2.4. 결론"></a>2.4. 결론</h2><ul>
<li>seaborn의 jointplot을 가져다 쓰는 데 그치지 않았습니다.</li>
<li><strong>matplotlib의 객체지향 방식을 이용해 seaborn의 한계를 벗어날 수 있었습니다.</strong></li>
<li>본 예제에서는 <code>scatterplot</code>과 2차원 <code>kdeplot</code>만 결합했습니다.</li>
<li>그러나 이 외에도 seaborn과 matplotlib이 제공하는 거의 모든 기능을 결합할 수 있습니다.</li>
<li>매뉴얼의 한계에 얽매이지 말고 상상력을 동원해 보시면 어떨까요.</li>
</ul>
<p>출저: <a target="_blank" rel="noopener" href="https://jehyunlee.github.io/2020/10/03/Python-DS-35-seaborn_matplotlib2/">https://jehyunlee.github.io/2020/10/03/Python-DS-35-seaborn_matplotlib2/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-11-05T05:16:07.477Z" title="2020-11-05T05:16:07.477Z">2020-11-05</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-11-05T05:28:08.094Z" title="2020-11-05T05:28:08.094Z">2020-11-05</time></span><span class="level-item">an hour read (About 6949 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/11/05/home_credit_default_risk/">home_credit_default_risk</a></h1><div class="content"><h1 id="Kaggle-API-설치"><a href="#Kaggle-API-설치" class="headerlink" title="Kaggle API 설치"></a>Kaggle API 설치</h1><ul>
<li>Google Colab에서 Kaggle API를 불러오려면 다음 소스코드를 실행한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!pip install kaggle</span><br></pre></td></tr></table></figure>

<pre><code>Requirement already satisfied: kaggle in /usr/local/lib/python3.6/dist-packages (1.5.9)
Requirement already satisfied: requests in /usr/local/lib/python3.6/dist-packages (from kaggle) (2.23.0)
Requirement already satisfied: slugify in /usr/local/lib/python3.6/dist-packages (from kaggle) (0.0.1)
Requirement already satisfied: urllib3 in /usr/local/lib/python3.6/dist-packages (from kaggle) (1.24.3)
Requirement already satisfied: tqdm in /usr/local/lib/python3.6/dist-packages (from kaggle) (4.41.1)
Requirement already satisfied: python-slugify in /usr/local/lib/python3.6/dist-packages (from kaggle) (4.0.1)
Requirement already satisfied: six&gt;=1.10 in /usr/local/lib/python3.6/dist-packages (from kaggle) (1.15.0)
Requirement already satisfied: certifi in /usr/local/lib/python3.6/dist-packages (from kaggle) (2020.6.20)
Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/dist-packages (from kaggle) (2.8.1)
Requirement already satisfied: idna&lt;3,&gt;=2.5 in /usr/local/lib/python3.6/dist-packages (from requests-&gt;kaggle) (2.10)
Requirement already satisfied: chardet&lt;4,&gt;=3.0.2 in /usr/local/lib/python3.6/dist-packages (from requests-&gt;kaggle) (3.0.4)
Requirement already satisfied: text-unidecode&gt;=1.3 in /usr/local/lib/python3.6/dist-packages (from python-slugify-&gt;kaggle) (1.3)</code></pre>
<h2 id="1-Kaggle-Token-다운로드"><a href="#1-Kaggle-Token-다운로드" class="headerlink" title="1. Kaggle Token 다운로드"></a>1. Kaggle Token 다운로드</h2><ul>
<li>Kaggle에서 <code>API Token</code>을 다운로드 받는다. </li>
<li>[Kaggle]-[My Account]-[API]-[Create New API Token]을 누르면 kaggle.json 파일이 다운로드 된다. </li>
<li>이 파일을 바탕화면에 옮긴 뒤, 아래 코드(토큰을 실행시키는 코드)를 실행 시킨다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> google.colab <span class="keyword">import</span> files</span><br><span class="line">uploaded = files.upload()</span><br><span class="line"><span class="keyword">for</span> fn <span class="keyword">in</span> uploaded.keys():</span><br><span class="line">  print(<span class="string">&#x27;uploaded file &quot;&#123;name&#125;&quot; with length &#123;length&#125; bytes&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">      name=fn, length=<span class="built_in">len</span>(uploaded[fn])))</span><br><span class="line">  </span><br><span class="line"><span class="comment"># kaggle.json을 아래 폴더로 옮긴 뒤, file을 사용할 수 있도록 권한을 부여한다. </span></span><br><span class="line">!mkdir -p ~/.kaggle/ &amp;&amp; mv kaggle.json ~/.kaggle/ &amp;&amp; chmod <span class="number">600</span> ~/.kaggle/kaggle.json</span><br></pre></td></tr></table></figure>



<p><input type="file" id="files-6d88dc91-54e2-468b-be7e-dc5aa0fecab8" name="files[]" multiple disabled
   style="border:none" /><br><output id="result-6d88dc91-54e2-468b-be7e-dc5aa0fecab8"><br> Upload widget is only available when the cell has been executed in the<br> current browser session. Please rerun this cell to enable.<br> </output><br> <script src="/nbextensions/google.colab/files.js"></script> </p>
<pre><code>Saving kaggle.json to kaggle.json
uploaded file &quot;kaggle.json&quot; with length 66 bytes</code></pre>
<ul>
<li>아래 코드는 실행됬는지 확인하는 코드</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls <span class="number">-1</span>ha ~/.kaggle/kaggle.json</span><br></pre></td></tr></table></figure>

<pre><code>/root/.kaggle/kaggle.json</code></pre>
<h2 id="2-Kaggle-데이터-불러오기"><a href="#2-Kaggle-데이터-불러오기" class="headerlink" title="2. Kaggle 데이터 불러오기"></a>2. Kaggle 데이터 불러오기</h2><ul>
<li>먼저 kaggle competition list를 불러온다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!kaggle competitions <span class="built_in">list</span></span><br></pre></td></tr></table></figure>

<pre><code>Warning: Looks like you&#39;re using an outdated API Version, please consider updating (server 1.5.9 / client 1.5.4)
ref                                            deadline             category            reward  teamCount  userHasEntered  
---------------------------------------------  -------------------  ---------------  ---------  ---------  --------------  
contradictory-my-dear-watson                   2030-07-01 23:59:00  Getting Started     Prizes        134           False  
gan-getting-started                            2030-07-01 23:59:00  Getting Started     Prizes        161           False  
tpu-getting-started                            2030-06-03 23:59:00  Getting Started  Knowledge        292           False  
digit-recognizer                               2030-01-01 00:00:00  Getting Started  Knowledge       2248           False  
titanic                                        2030-01-01 00:00:00  Getting Started  Knowledge      17260            True  
house-prices-advanced-regression-techniques    2030-01-01 00:00:00  Getting Started  Knowledge       4325            True  
connectx                                       2030-01-01 00:00:00  Getting Started  Knowledge        366           False  
nlp-getting-started                            2030-01-01 00:00:00  Getting Started  Knowledge       1130           False  
rock-paper-scissors                            2021-02-01 23:59:00  Playground          Prizes        226           False  
riiid-test-answer-prediction                   2021-01-07 23:59:00  Featured          $100,000       1491           False  
nfl-big-data-bowl-2021                         2021-01-05 23:59:00  Analytics         $100,000          0           False  
competitive-data-science-predict-future-sales  2020-12-31 23:59:00  Playground           Kudos       9392           False  
halite-iv-playground-edition                   2020-12-31 23:59:00  Playground       Knowledge         44           False  
predict-volcanic-eruptions-ingv-oe             2020-12-28 23:59:00  Playground            Swag        198           False  
hashcode-drone-delivery                        2020-12-14 23:59:00  Playground       Knowledge         80           False  
cdp-unlocking-climate-solutions                2020-12-02 23:59:00  Analytics          $91,000          0           False  
lish-moa                                       2020-11-30 23:59:00  Research           $30,000       3454           False  
google-football                                2020-11-30 23:59:00  Featured            $6,000        925           False  
conways-reverse-game-of-life-2020              2020-11-30 23:59:00  Playground            Swag        132           False  
lyft-motion-prediction-autonomous-vehicles     2020-11-25 23:59:00  Featured           $30,000        788           False  </code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!kaggle competitions download -c home-credit-default-risk</span><br></pre></td></tr></table></figure>

<pre><code>Warning: Looks like you&#39;re using an outdated API Version, please consider updating (server 1.5.9 / client 1.5.4)
installments_payments.csv.zip: Skipping, found more recently modified local copy (use --force to force download)
previous_application.csv.zip: Skipping, found more recently modified local copy (use --force to force download)
application_test.csv.zip: Skipping, found more recently modified local copy (use --force to force download)
bureau.csv.zip: Skipping, found more recently modified local copy (use --force to force download)
sample_submission.csv: Skipping, found more recently modified local copy (use --force to force download)
POS_CASH_balance.csv.zip: Skipping, found more recently modified local copy (use --force to force download)
credit_card_balance.csv.zip: Skipping, found more recently modified local copy (use --force to force download)
HomeCredit_columns_description.csv: Skipping, found more recently modified local copy (use --force to force download)
application_train.csv.zip: Skipping, found more recently modified local copy (use --force to force download)
bureau_balance.csv.zip: Skipping, found more recently modified local copy (use --force to force download)</code></pre>
<ul>
<li>ls는 디렉터리(파일,경로) 내의 데이터 파일을 보여주는 명령어</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!ls</span><br></pre></td></tr></table></figure>

<pre><code>application_test.csv.zip        installments_payments.csv.zip
application_train.csv.zip        POS_CASH_balance.csv.zip
bureau_balance.csv.zip            previous_application.csv.zip
bureau.csv.zip                sample_data
credit_card_balance.csv.zip        sample_submission.csv
gender_submission.csv            test.csv
HomeCredit_columns_description.csv  train.csv</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">! unzip application_test.csv.<span class="built_in">zip</span>	  </span><br><span class="line">! unzipinstallments_payments.csv.<span class="built_in">zip</span></span><br><span class="line">! unzip application_train.csv.<span class="built_in">zip</span>	    </span><br><span class="line">! unzip POS_CASH_balance.csv.<span class="built_in">zip</span></span><br><span class="line">! unzip bureau_balance.csv.<span class="built_in">zip</span>		    </span><br><span class="line">! unzip previous_application.csv.<span class="built_in">zip</span></span><br><span class="line">! unzip bureau.csv.<span class="built_in">zip</span>			    </span><br><span class="line">! unzip credit_card_balance.csv.<span class="built_in">zip</span></span><br></pre></td></tr></table></figure>

<pre><code>Archive:  application_test.csv.zip
  inflating: application_test.csv    
/bin/bash: unzipinstallments_payments.csv.zip: command not found
Archive:  application_train.csv.zip
replace application_train.csv? [y]es, [n]o, [A]ll, [N]one, [r]ename: y
  inflating: application_train.csv   
Archive:  POS_CASH_balance.csv.zip
replace POS_CASH_balance.csv? [y]es, [n]o, [A]ll, [N]one, [r]ename: y
  inflating: POS_CASH_balance.csv    
Archive:  bureau_balance.csv.zip
replace bureau_balance.csv? [y]es, [n]o, [A]ll, [N]one, [r]ename: y
  inflating: bureau_balance.csv      
Archive:  previous_application.csv.zip
replace previous_application.csv? [y]es, [n]o, [A]ll, [N]one, [r]ename: y
  inflating: previous_application.csv  
Archive:  bureau.csv.zip
replace bureau.csv? [y]es, [n]o, [A]ll, [N]one, [r]ename: y
  inflating: bureau.csv              
Archive:  credit_card_balance.csv.zip
replace credit_card_balance.csv? [y]es, [n]o, [A]ll, [N]one, [r]ename: y
  inflating: credit_card_balance.csv  </code></pre>
<ul>
<li>현재 총 14개의 데이터를 다운로드 받았다. <ul>
<li>application_test.csv.zip      </li>
<li>installments_payments.csv.zip</li>
<li>application_train.csv.zip        </li>
<li>POS_CASH_balance.csv.zip</li>
<li>bureau_balance.csv.zip            </li>
<li>previous_application.csv.zip</li>
<li>bureau.csv.zip                </li>
<li>sample_data</li>
<li>credit_card_balance.csv.zip         </li>
<li>sample_submission.csv</li>
<li>gender_submission.csv            </li>
<li>test.csv</li>
<li>HomeCredit_columns_description.csv  </li>
<li>train.csv</li>
</ul>
</li>
</ul>
<h2 id="3-캐글-데이터-수집-및-EDA"><a href="#3-캐글-데이터-수집-및-EDA" class="headerlink" title="3. 캐글 데이터 수집 및 EDA"></a>3. 캐글 데이터 수집 및 EDA</h2><ul>
<li>우선 데이터를 수집하기에 앞서서 <code>EDA</code>에 관한 필수 패키지를 설치하자. </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 데이터 조작을 위한 numpy와 팬더</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd  </span><br><span class="line"><span class="comment"># 범주형 변수를 처리하기 위한 사전 처리 학습</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> LabelEncoder</span><br><span class="line"><span class="comment"># 파일 시스템 매니지먼트</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="comment"># 경고 억제</span></span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"><span class="comment"># 플롯을 위한 matplotlib 및 seaorn</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br></pre></td></tr></table></figure>

<h2 id="분류"><a href="#분류" class="headerlink" title="분류"></a>분류</h2><ul>
<li>감독됨: 라벨은 교육 데이터에 포함되며, 목적은 형상으로부터 라벨을 예측하는 방법을 학습하는 모델을 훈련시키는 것이다.</li>
<li>분류: 라벨은 0(대출금을 제때 상환할 수 있음), 1(대출금 상환에 어려움이 있음)의 이진 변수다.</li>
<li>데이터 : 은행을 이용하지 않은 사람들에게 신용대출(대출)을 제공하는 서비스인 홈 크레딧에 의해 제공된다</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 사용 가능한 파일 나열</span></span><br><span class="line">print(os.listdir())</span><br></pre></td></tr></table></figure>

<pre><code>[&#39;.config&#39;, &#39;previous_application.csv&#39;, &#39;application_train.csv&#39;, &#39;bureau_balance.csv&#39;, &#39;application_test.csv.zip&#39;, &#39;bureau.csv&#39;, &#39;POS_CASH_balance.csv&#39;, &#39;previous_application.csv.zip&#39;, &#39;bureau_balance.csv.zip&#39;, &#39;POS_CASH_balance.csv.zip&#39;, &#39;HomeCredit_columns_description.csv&#39;, &#39;bureau.csv.zip&#39;, &#39;installments_payments.csv.zip&#39;, &#39;test.csv&#39;, &#39;sample_submission.csv&#39;, &#39;application_train.csv.zip&#39;, &#39;gender_submission.csv&#39;, &#39;credit_card_balance.csv&#39;, &#39;credit_card_balance.csv.zip&#39;, &#39;train.csv&#39;, &#39;sample_data&#39;]</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 교육자료</span></span><br><span class="line">app_train = pd.read_csv(<span class="string">&#x27;application_train.csv&#x27;</span>)</span><br><span class="line">print(<span class="string">&#x27;Training data shape: &#x27;</span>, app_train.shape)</span><br><span class="line">app_train.head()</span><br></pre></td></tr></table></figure>

<pre><code>Training data shape:  (307511, 122)</code></pre>
<div style = overflow:scroll;>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SK_ID_CURR</th>
      <th>TARGET</th>
      <th>NAME_CONTRACT_TYPE</th>
      <th>CODE_GENDER</th>
      <th>FLAG_OWN_CAR</th>
      <th>FLAG_OWN_REALTY</th>
      <th>CNT_CHILDREN</th>
      <th>AMT_INCOME_TOTAL</th>
      <th>AMT_CREDIT</th>
      <th>AMT_ANNUITY</th>
      <th>AMT_GOODS_PRICE</th>
      <th>NAME_TYPE_SUITE</th>
      <th>NAME_INCOME_TYPE</th>
      <th>NAME_EDUCATION_TYPE</th>
      <th>NAME_FAMILY_STATUS</th>
      <th>NAME_HOUSING_TYPE</th>
      <th>REGION_POPULATION_RELATIVE</th>
      <th>DAYS_BIRTH</th>
      <th>DAYS_EMPLOYED</th>
      <th>DAYS_REGISTRATION</th>
      <th>DAYS_ID_PUBLISH</th>
      <th>OWN_CAR_AGE</th>
      <th>FLAG_MOBIL</th>
      <th>FLAG_EMP_PHONE</th>
      <th>FLAG_WORK_PHONE</th>
      <th>FLAG_CONT_MOBILE</th>
      <th>FLAG_PHONE</th>
      <th>FLAG_EMAIL</th>
      <th>OCCUPATION_TYPE</th>
      <th>CNT_FAM_MEMBERS</th>
      <th>REGION_RATING_CLIENT</th>
      <th>REGION_RATING_CLIENT_W_CITY</th>
      <th>WEEKDAY_APPR_PROCESS_START</th>
      <th>HOUR_APPR_PROCESS_START</th>
      <th>REG_REGION_NOT_LIVE_REGION</th>
      <th>REG_REGION_NOT_WORK_REGION</th>
      <th>LIVE_REGION_NOT_WORK_REGION</th>
      <th>REG_CITY_NOT_LIVE_CITY</th>
      <th>REG_CITY_NOT_WORK_CITY</th>
      <th>LIVE_CITY_NOT_WORK_CITY</th>
      <th>...</th>
      <th>LIVINGAPARTMENTS_MEDI</th>
      <th>LIVINGAREA_MEDI</th>
      <th>NONLIVINGAPARTMENTS_MEDI</th>
      <th>NONLIVINGAREA_MEDI</th>
      <th>FONDKAPREMONT_MODE</th>
      <th>HOUSETYPE_MODE</th>
      <th>TOTALAREA_MODE</th>
      <th>WALLSMATERIAL_MODE</th>
      <th>EMERGENCYSTATE_MODE</th>
      <th>OBS_30_CNT_SOCIAL_CIRCLE</th>
      <th>DEF_30_CNT_SOCIAL_CIRCLE</th>
      <th>OBS_60_CNT_SOCIAL_CIRCLE</th>
      <th>DEF_60_CNT_SOCIAL_CIRCLE</th>
      <th>DAYS_LAST_PHONE_CHANGE</th>
      <th>FLAG_DOCUMENT_2</th>
      <th>FLAG_DOCUMENT_3</th>
      <th>FLAG_DOCUMENT_4</th>
      <th>FLAG_DOCUMENT_5</th>
      <th>FLAG_DOCUMENT_6</th>
      <th>FLAG_DOCUMENT_7</th>
      <th>FLAG_DOCUMENT_8</th>
      <th>FLAG_DOCUMENT_9</th>
      <th>FLAG_DOCUMENT_10</th>
      <th>FLAG_DOCUMENT_11</th>
      <th>FLAG_DOCUMENT_12</th>
      <th>FLAG_DOCUMENT_13</th>
      <th>FLAG_DOCUMENT_14</th>
      <th>FLAG_DOCUMENT_15</th>
      <th>FLAG_DOCUMENT_16</th>
      <th>FLAG_DOCUMENT_17</th>
      <th>FLAG_DOCUMENT_18</th>
      <th>FLAG_DOCUMENT_19</th>
      <th>FLAG_DOCUMENT_20</th>
      <th>FLAG_DOCUMENT_21</th>
      <th>AMT_REQ_CREDIT_BUREAU_HOUR</th>
      <th>AMT_REQ_CREDIT_BUREAU_DAY</th>
      <th>AMT_REQ_CREDIT_BUREAU_WEEK</th>
      <th>AMT_REQ_CREDIT_BUREAU_MON</th>
      <th>AMT_REQ_CREDIT_BUREAU_QRT</th>
      <th>AMT_REQ_CREDIT_BUREAU_YEAR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>100002</td>
      <td>1</td>
      <td>Cash loans</td>
      <td>M</td>
      <td>N</td>
      <td>Y</td>
      <td>0</td>
      <td>202500.0</td>
      <td>406597.5</td>
      <td>24700.5</td>
      <td>351000.0</td>
      <td>Unaccompanied</td>
      <td>Working</td>
      <td>Secondary / secondary special</td>
      <td>Single / not married</td>
      <td>House / apartment</td>
      <td>0.018801</td>
      <td>-9461</td>
      <td>-637</td>
      <td>-3648.0</td>
      <td>-2120</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>Laborers</td>
      <td>1.0</td>
      <td>2</td>
      <td>2</td>
      <td>WEDNESDAY</td>
      <td>10</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0.0205</td>
      <td>0.0193</td>
      <td>0.0000</td>
      <td>0.00</td>
      <td>reg oper account</td>
      <td>block of flats</td>
      <td>0.0149</td>
      <td>Stone, brick</td>
      <td>No</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>-1134.0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>100003</td>
      <td>0</td>
      <td>Cash loans</td>
      <td>F</td>
      <td>N</td>
      <td>N</td>
      <td>0</td>
      <td>270000.0</td>
      <td>1293502.5</td>
      <td>35698.5</td>
      <td>1129500.0</td>
      <td>Family</td>
      <td>State servant</td>
      <td>Higher education</td>
      <td>Married</td>
      <td>House / apartment</td>
      <td>0.003541</td>
      <td>-16765</td>
      <td>-1188</td>
      <td>-1186.0</td>
      <td>-291</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>Core staff</td>
      <td>2.0</td>
      <td>1</td>
      <td>1</td>
      <td>MONDAY</td>
      <td>11</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0.0787</td>
      <td>0.0558</td>
      <td>0.0039</td>
      <td>0.01</td>
      <td>reg oper account</td>
      <td>block of flats</td>
      <td>0.0714</td>
      <td>Block</td>
      <td>No</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>-828.0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>100004</td>
      <td>0</td>
      <td>Revolving loans</td>
      <td>M</td>
      <td>Y</td>
      <td>Y</td>
      <td>0</td>
      <td>67500.0</td>
      <td>135000.0</td>
      <td>6750.0</td>
      <td>135000.0</td>
      <td>Unaccompanied</td>
      <td>Working</td>
      <td>Secondary / secondary special</td>
      <td>Single / not married</td>
      <td>House / apartment</td>
      <td>0.010032</td>
      <td>-19046</td>
      <td>-225</td>
      <td>-4260.0</td>
      <td>-2531</td>
      <td>26.0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>Laborers</td>
      <td>1.0</td>
      <td>2</td>
      <td>2</td>
      <td>MONDAY</td>
      <td>9</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-815.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>100006</td>
      <td>0</td>
      <td>Cash loans</td>
      <td>F</td>
      <td>N</td>
      <td>Y</td>
      <td>0</td>
      <td>135000.0</td>
      <td>312682.5</td>
      <td>29686.5</td>
      <td>297000.0</td>
      <td>Unaccompanied</td>
      <td>Working</td>
      <td>Secondary / secondary special</td>
      <td>Civil marriage</td>
      <td>House / apartment</td>
      <td>0.008019</td>
      <td>-19005</td>
      <td>-3039</td>
      <td>-9833.0</td>
      <td>-2437</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>Laborers</td>
      <td>2.0</td>
      <td>2</td>
      <td>2</td>
      <td>WEDNESDAY</td>
      <td>17</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>-617.0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>100007</td>
      <td>0</td>
      <td>Cash loans</td>
      <td>M</td>
      <td>N</td>
      <td>Y</td>
      <td>0</td>
      <td>121500.0</td>
      <td>513000.0</td>
      <td>21865.5</td>
      <td>513000.0</td>
      <td>Unaccompanied</td>
      <td>Working</td>
      <td>Secondary / secondary special</td>
      <td>Single / not married</td>
      <td>House / apartment</td>
      <td>0.028663</td>
      <td>-19932</td>
      <td>-3038</td>
      <td>-4311.0</td>
      <td>-3458</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>Core staff</td>
      <td>1.0</td>
      <td>2</td>
      <td>2</td>
      <td>THURSDAY</td>
      <td>11</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-1106.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 122 columns</p>
</div>



<p>교육 데이터에는 307511개의 관측치(각각 별도 대출)와 대상(우리가 예측하고자 하는 라벨)을 포함한 122개의 특징(변수)이 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 데이터 기능 테스트</span></span><br><span class="line">app_test = pd.read_csv(<span class="string">&#x27;application_test.csv&#x27;</span>)</span><br><span class="line">print(<span class="string">&#x27;Testing data shape: &#x27;</span>, app_test.shape)</span><br><span class="line">app_test.head()</span><br></pre></td></tr></table></figure>

<pre><code>Testing data shape:  (48744, 121)</code></pre>
<div style = overflow:scroll;>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>SK_ID_CURR</th>
      <th>NAME_CONTRACT_TYPE</th>
      <th>CODE_GENDER</th>
      <th>FLAG_OWN_CAR</th>
      <th>FLAG_OWN_REALTY</th>
      <th>CNT_CHILDREN</th>
      <th>AMT_INCOME_TOTAL</th>
      <th>AMT_CREDIT</th>
      <th>AMT_ANNUITY</th>
      <th>AMT_GOODS_PRICE</th>
      <th>NAME_TYPE_SUITE</th>
      <th>NAME_INCOME_TYPE</th>
      <th>NAME_EDUCATION_TYPE</th>
      <th>NAME_FAMILY_STATUS</th>
      <th>NAME_HOUSING_TYPE</th>
      <th>REGION_POPULATION_RELATIVE</th>
      <th>DAYS_BIRTH</th>
      <th>DAYS_EMPLOYED</th>
      <th>DAYS_REGISTRATION</th>
      <th>DAYS_ID_PUBLISH</th>
      <th>OWN_CAR_AGE</th>
      <th>FLAG_MOBIL</th>
      <th>FLAG_EMP_PHONE</th>
      <th>FLAG_WORK_PHONE</th>
      <th>FLAG_CONT_MOBILE</th>
      <th>FLAG_PHONE</th>
      <th>FLAG_EMAIL</th>
      <th>OCCUPATION_TYPE</th>
      <th>CNT_FAM_MEMBERS</th>
      <th>REGION_RATING_CLIENT</th>
      <th>REGION_RATING_CLIENT_W_CITY</th>
      <th>WEEKDAY_APPR_PROCESS_START</th>
      <th>HOUR_APPR_PROCESS_START</th>
      <th>REG_REGION_NOT_LIVE_REGION</th>
      <th>REG_REGION_NOT_WORK_REGION</th>
      <th>LIVE_REGION_NOT_WORK_REGION</th>
      <th>REG_CITY_NOT_LIVE_CITY</th>
      <th>REG_CITY_NOT_WORK_CITY</th>
      <th>LIVE_CITY_NOT_WORK_CITY</th>
      <th>ORGANIZATION_TYPE</th>
      <th>...</th>
      <th>LIVINGAPARTMENTS_MEDI</th>
      <th>LIVINGAREA_MEDI</th>
      <th>NONLIVINGAPARTMENTS_MEDI</th>
      <th>NONLIVINGAREA_MEDI</th>
      <th>FONDKAPREMONT_MODE</th>
      <th>HOUSETYPE_MODE</th>
      <th>TOTALAREA_MODE</th>
      <th>WALLSMATERIAL_MODE</th>
      <th>EMERGENCYSTATE_MODE</th>
      <th>OBS_30_CNT_SOCIAL_CIRCLE</th>
      <th>DEF_30_CNT_SOCIAL_CIRCLE</th>
      <th>OBS_60_CNT_SOCIAL_CIRCLE</th>
      <th>DEF_60_CNT_SOCIAL_CIRCLE</th>
      <th>DAYS_LAST_PHONE_CHANGE</th>
      <th>FLAG_DOCUMENT_2</th>
      <th>FLAG_DOCUMENT_3</th>
      <th>FLAG_DOCUMENT_4</th>
      <th>FLAG_DOCUMENT_5</th>
      <th>FLAG_DOCUMENT_6</th>
      <th>FLAG_DOCUMENT_7</th>
      <th>FLAG_DOCUMENT_8</th>
      <th>FLAG_DOCUMENT_9</th>
      <th>FLAG_DOCUMENT_10</th>
      <th>FLAG_DOCUMENT_11</th>
      <th>FLAG_DOCUMENT_12</th>
      <th>FLAG_DOCUMENT_13</th>
      <th>FLAG_DOCUMENT_14</th>
      <th>FLAG_DOCUMENT_15</th>
      <th>FLAG_DOCUMENT_16</th>
      <th>FLAG_DOCUMENT_17</th>
      <th>FLAG_DOCUMENT_18</th>
      <th>FLAG_DOCUMENT_19</th>
      <th>FLAG_DOCUMENT_20</th>
      <th>FLAG_DOCUMENT_21</th>
      <th>AMT_REQ_CREDIT_BUREAU_HOUR</th>
      <th>AMT_REQ_CREDIT_BUREAU_DAY</th>
      <th>AMT_REQ_CREDIT_BUREAU_WEEK</th>
      <th>AMT_REQ_CREDIT_BUREAU_MON</th>
      <th>AMT_REQ_CREDIT_BUREAU_QRT</th>
      <th>AMT_REQ_CREDIT_BUREAU_YEAR</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>100001</td>
      <td>Cash loans</td>
      <td>F</td>
      <td>N</td>
      <td>Y</td>
      <td>0</td>
      <td>135000.0</td>
      <td>568800.0</td>
      <td>20560.5</td>
      <td>450000.0</td>
      <td>Unaccompanied</td>
      <td>Working</td>
      <td>Higher education</td>
      <td>Married</td>
      <td>House / apartment</td>
      <td>0.018850</td>
      <td>-19241</td>
      <td>-2329</td>
      <td>-5170.0</td>
      <td>-812</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>NaN</td>
      <td>2.0</td>
      <td>2</td>
      <td>2</td>
      <td>TUESDAY</td>
      <td>18</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Kindergarten</td>
      <td>...</td>
      <td>NaN</td>
      <td>0.0514</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>block of flats</td>
      <td>0.0392</td>
      <td>Stone, brick</td>
      <td>No</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-1740.0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>100005</td>
      <td>Cash loans</td>
      <td>M</td>
      <td>N</td>
      <td>Y</td>
      <td>0</td>
      <td>99000.0</td>
      <td>222768.0</td>
      <td>17370.0</td>
      <td>180000.0</td>
      <td>Unaccompanied</td>
      <td>Working</td>
      <td>Secondary / secondary special</td>
      <td>Married</td>
      <td>House / apartment</td>
      <td>0.035792</td>
      <td>-18064</td>
      <td>-4469</td>
      <td>-9118.0</td>
      <td>-1623</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>Low-skill Laborers</td>
      <td>2.0</td>
      <td>2</td>
      <td>2</td>
      <td>FRIDAY</td>
      <td>9</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Self-employed</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>100013</td>
      <td>Cash loans</td>
      <td>M</td>
      <td>Y</td>
      <td>Y</td>
      <td>0</td>
      <td>202500.0</td>
      <td>663264.0</td>
      <td>69777.0</td>
      <td>630000.0</td>
      <td>NaN</td>
      <td>Working</td>
      <td>Higher education</td>
      <td>Married</td>
      <td>House / apartment</td>
      <td>0.019101</td>
      <td>-20038</td>
      <td>-4458</td>
      <td>-2175.0</td>
      <td>-3503</td>
      <td>5.0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>Drivers</td>
      <td>2.0</td>
      <td>2</td>
      <td>2</td>
      <td>MONDAY</td>
      <td>14</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Transport: type 3</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-856.0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>100028</td>
      <td>Cash loans</td>
      <td>F</td>
      <td>N</td>
      <td>Y</td>
      <td>2</td>
      <td>315000.0</td>
      <td>1575000.0</td>
      <td>49018.5</td>
      <td>1575000.0</td>
      <td>Unaccompanied</td>
      <td>Working</td>
      <td>Secondary / secondary special</td>
      <td>Married</td>
      <td>House / apartment</td>
      <td>0.026392</td>
      <td>-13976</td>
      <td>-1866</td>
      <td>-2000.0</td>
      <td>-4208</td>
      <td>NaN</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>Sales staff</td>
      <td>4.0</td>
      <td>2</td>
      <td>2</td>
      <td>WEDNESDAY</td>
      <td>11</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>Business Entity Type 3</td>
      <td>...</td>
      <td>0.2446</td>
      <td>0.3739</td>
      <td>0.0388</td>
      <td>0.0817</td>
      <td>reg oper account</td>
      <td>block of flats</td>
      <td>0.3700</td>
      <td>Panel</td>
      <td>No</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-1805.0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>100038</td>
      <td>Cash loans</td>
      <td>M</td>
      <td>Y</td>
      <td>N</td>
      <td>1</td>
      <td>180000.0</td>
      <td>625500.0</td>
      <td>32067.0</td>
      <td>625500.0</td>
      <td>Unaccompanied</td>
      <td>Working</td>
      <td>Secondary / secondary special</td>
      <td>Married</td>
      <td>House / apartment</td>
      <td>0.010032</td>
      <td>-13040</td>
      <td>-2191</td>
      <td>-4000.0</td>
      <td>-4262</td>
      <td>16.0</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
      <td>3.0</td>
      <td>2</td>
      <td>2</td>
      <td>FRIDAY</td>
      <td>5</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>Business Entity Type 3</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-821.0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 121 columns</p>
</div>



<p>테스트 세트가 상당히 작고 대상 컬럼이 부족하다.</p>
<h2 id="탐색적-데이터-분석"><a href="#탐색적-데이터-분석" class="headerlink" title="탐색적 데이터 분석."></a>탐색적 데이터 분석.</h2><p>탐색적 데이터 분석(EDA)은 우리가 통계를 계산하고 수치를 만들어 데이터 내의 경향, 이상 징후, 패턴 또는 관계를 찾아내는 개방형 프로세스다. EDA의 목표는 우리의 데이터가 우리에게 말해줄 수 있는 것을 배우는 것이다. 일반적으로 높은 수준의 개요에서 시작되며, 데이터에서 흥미로운 영역을 발견하면 특정 영역으로 좁혀진다. 그 결과들은 그 자체로 흥미로울 수도 있고, 어떤 기능을 사용할지 결정하는 것을 도와줌으로써 우리의 모델 선택을 알리는 데 사용될 수도 있다.</p>
<h3 id="대상-열의-분포-조사"><a href="#대상-열의-분포-조사" class="headerlink" title="대상 열의 분포 조사"></a>대상 열의 분포 조사</h3><p>대상은 대출금 0을 제때 상환했거나 고객이 상환에 어려움을 겪었음을 나타내는 1을 예측하라는 것이다. 우리는 우선 각 범주에 속하는 대출의 수를 조사할 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app_train[<span class="string">&#x27;TARGET&#x27;</span>].value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>0    282686
1     24825
Name: TARGET, dtype: int64</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app_train[<span class="string">&#x27;TARGET&#x27;</span>].astype(<span class="built_in">int</span>).plot.hist();</span><br></pre></td></tr></table></figure>


<p><img src="/images/home_credit_default_risk/output_24_0.png" alt="png"></p>
<p>이 정보로부터, 우리는 이것이 불균형한 계급 문제임을 알 수 있다. 제때 갚지 못한 대출보다 제때 갚은 대출이 훨씬 많다. 일단 우리가 좀 더 정교한 기계 학습 모델에 들어가면, 우리는 이러한 불균형을 반영하기 위해 데이터에서의 그들의 표현에 따라 수업에 무게를 둘 수 있다.</p>
<h3 id="결측값-검사"><a href="#결측값-검사" class="headerlink" title="결측값 검사"></a>결측값 검사</h3><p>다음으로 각 열에 있는 결측값의 수와 백분율을 살펴보기로 한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 결측값을 열로 계산하는 함수 #Funct </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">missing_values_table</span>(<span class="params">df</span>):</span></span><br><span class="line">        <span class="comment"># 결측값 합계</span></span><br><span class="line">        mis_val = df.isnull().<span class="built_in">sum</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 결측값 백분율</span></span><br><span class="line">        mis_val_percent = <span class="number">100</span> * df.isnull().<span class="built_in">sum</span>() / <span class="built_in">len</span>(df)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 결과로 테이블 만들기</span></span><br><span class="line">        mis_val_table = pd.concat([mis_val, mis_val_percent], axis=<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 열 이름 바꾸기</span></span><br><span class="line">        mis_val_table_ren_columns = mis_val_table.rename(</span><br><span class="line">        columns = &#123;<span class="number">0</span> : <span class="string">&#x27;Missing Values&#x27;</span>, <span class="number">1</span> : <span class="string">&#x27;% of Total Values&#x27;</span>&#125;)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 누락된 내림차순 백분율을 기준으로 테이블 정렬</span></span><br><span class="line">        mis_val_table_ren_columns = mis_val_table_ren_columns[</span><br><span class="line">            mis_val_table_ren_columns.iloc[:,<span class="number">1</span>] != <span class="number">0</span>].sort_values(</span><br><span class="line">        <span class="string">&#x27;% of Total Values&#x27;</span>, ascending=<span class="literal">False</span>).<span class="built_in">round</span>(<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 일부 요약 정보 인쇄</span></span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&quot;Your selected dataframe has &quot;</span> + <span class="built_in">str</span>(df.shape[<span class="number">1</span>]) + <span class="string">&quot; columns.\n&quot;</span>      </span><br><span class="line">            <span class="string">&quot;There are &quot;</span> + <span class="built_in">str</span>(mis_val_table_ren_columns.shape[<span class="number">0</span>]) +</span><br><span class="line">              <span class="string">&quot; columns that have missing values.&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 누락된 정보가 있는 데이터 프레임 반환</span></span><br><span class="line">        <span class="keyword">return</span> mis_val_table_ren_columns</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 결측값 통계량</span></span><br><span class="line">missing_values = missing_values_table(app_train)</span><br><span class="line">missing_values.head(<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Your selected dataframe has 122 columns.
There are 67 columns that have missing values.</code></pre>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Missing Values</th>
      <th>% of Total Values</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>COMMONAREA_MEDI</th>
      <td>214865</td>
      <td>69.9</td>
    </tr>
    <tr>
      <th>COMMONAREA_AVG</th>
      <td>214865</td>
      <td>69.9</td>
    </tr>
    <tr>
      <th>COMMONAREA_MODE</th>
      <td>214865</td>
      <td>69.9</td>
    </tr>
    <tr>
      <th>NONLIVINGAPARTMENTS_MEDI</th>
      <td>213514</td>
      <td>69.4</td>
    </tr>
    <tr>
      <th>NONLIVINGAPARTMENTS_MODE</th>
      <td>213514</td>
      <td>69.4</td>
    </tr>
    <tr>
      <th>NONLIVINGAPARTMENTS_AVG</th>
      <td>213514</td>
      <td>69.4</td>
    </tr>
    <tr>
      <th>FONDKAPREMONT_MODE</th>
      <td>210295</td>
      <td>68.4</td>
    </tr>
    <tr>
      <th>LIVINGAPARTMENTS_MODE</th>
      <td>210199</td>
      <td>68.4</td>
    </tr>
    <tr>
      <th>LIVINGAPARTMENTS_MEDI</th>
      <td>210199</td>
      <td>68.4</td>
    </tr>
    <tr>
      <th>LIVINGAPARTMENTS_AVG</th>
      <td>210199</td>
      <td>68.4</td>
    </tr>
    <tr>
      <th>FLOORSMIN_MODE</th>
      <td>208642</td>
      <td>67.8</td>
    </tr>
    <tr>
      <th>FLOORSMIN_MEDI</th>
      <td>208642</td>
      <td>67.8</td>
    </tr>
    <tr>
      <th>FLOORSMIN_AVG</th>
      <td>208642</td>
      <td>67.8</td>
    </tr>
    <tr>
      <th>YEARS_BUILD_MODE</th>
      <td>204488</td>
      <td>66.5</td>
    </tr>
    <tr>
      <th>YEARS_BUILD_MEDI</th>
      <td>204488</td>
      <td>66.5</td>
    </tr>
    <tr>
      <th>YEARS_BUILD_AVG</th>
      <td>204488</td>
      <td>66.5</td>
    </tr>
    <tr>
      <th>OWN_CAR_AGE</th>
      <td>202929</td>
      <td>66.0</td>
    </tr>
    <tr>
      <th>LANDAREA_AVG</th>
      <td>182590</td>
      <td>59.4</td>
    </tr>
    <tr>
      <th>LANDAREA_MEDI</th>
      <td>182590</td>
      <td>59.4</td>
    </tr>
    <tr>
      <th>LANDAREA_MODE</th>
      <td>182590</td>
      <td>59.4</td>
    </tr>
  </tbody>
</table>
</div>



<h3 id="열-유형"><a href="#열-유형" class="headerlink" title="열 유형"></a>열 유형</h3><p>각 데이터 유형의 열 수를 살펴보자. int64와 float64는 숫자 변수(이산형 또는 연속형일 수 있음)이다. 객체 열은 문자열을 포함하며 범주형 형상이다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 각 열 유형별 수</span></span><br><span class="line">app_train.dtypes.value_counts()</span><br></pre></td></tr></table></figure>




<pre><code>float64    65
int64      41
object     16
dtype: int64</code></pre>
<p>이제 각 개체(범주형) 열에 있는 고유한 항목 수를 살펴봅시다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 각 객체 열의 고유 클래스 수</span></span><br><span class="line">app_train.select_dtypes(<span class="string">&#x27;object&#x27;</span>).apply(pd.Series.nunique, axis = <span class="number">0</span>)</span><br></pre></td></tr></table></figure>




<pre><code>NAME_CONTRACT_TYPE             2
CODE_GENDER                    3
FLAG_OWN_CAR                   2
FLAG_OWN_REALTY                2
NAME_TYPE_SUITE                7
NAME_INCOME_TYPE               8
NAME_EDUCATION_TYPE            5
NAME_FAMILY_STATUS             6
NAME_HOUSING_TYPE              6
OCCUPATION_TYPE               18
WEEKDAY_APPR_PROCESS_START     7
ORGANIZATION_TYPE             58
FONDKAPREMONT_MODE             4
HOUSETYPE_MODE                 3
WALLSMATERIAL_MODE             7
EMERGENCYSTATE_MODE            2
dtype: int64</code></pre>
<p>대부분의 범주형 변수의 고유 항목 수는 상대적으로 적다. 우리는 이러한 범주형 변수에 대처할 방법을 찾아야 할 것이다!</p>
<p>범주형 변수를 인코딩하는 중:<br>더 나아가기 전에 성가신 범주형 변수를 다뤄야 한다. 기계 학습 모델은 유감스럽게도 범주형 변수를 다룰 수 없다(LightGBM과 같은 일부 모델은 제외). 따라서 이 변수들을 모델로 넘기기 전에 숫자로 인코딩(표현)하는 방법을 찾아야 한다. 이 과정을 수행하는 방법에는 크게 두 가지가 있다.</p>
<ul>
<li><p>라벨 인코딩: 정수를 사용하여 범주형 변수의 각 고유 범주를 할당하십시오. 새 열이 생성되지 않음 예는 아래와 같다.</p>
</li>
<li><p>단일 핫 인코딩: 범주형 변수의 각 고유 범주에 대해 새 열을 생성하십시오. 각 관측치는 해당 범주에 대해 열에 1을, 다른 모든 새 열에 0을 받는다.</p>
</li>
</ul>
<p>라벨 인코딩의 문제는 카테고리에 임의의 순서를 부여한다는 것이다. 각 범주에 할당된 값은 랜덤이며 범주의 고유한 측면을 반영하지 않는다. 위의 예에서 프로그래머는 4를, 데이터 과학자는 1을 받지만, 만약 우리가 같은 과정을 다시 한다면, 라벨이 거꾸로 되거나 완전히 달라질 수 있다. 정수의 실제 할당은 임의적이다. 따라서 우리가 라벨 인코딩을 수행할 때 모델은 형상의 상대적 값(예: 프로그래머 = 4 및 데이터 과학자 = 1)을 사용하여 우리가 원하는 가중치를 할당할 수 있다. 범주형 변수(예: 남성/여성)에 대해 고유한 값이 두 개뿐이면 레이블 인코딩은 괜찮지만 두 개 이상의 고유한 범주에 대해서는 하나의 핫 인코딩이 안전한 옵션이다.</p>
<p>이러한 접근방식의 상대적 장점에 대해 일부 논쟁이 있으며, 일부 모델은 라벨로 인코딩된 범주형 변수를 문제 없이 다룰 수 있다. 여기 좋은 스택 오버플로 토론이 있다. 클래스가 많은 범주형 변수에 대해서는 (그리고 이것은 개인적인 의견일 뿐이다) 하나의 핫 인코딩이 범주에 임의의 값을 부과하지 않기 때문에 가장 안전한 접근법이라고 생각한다. 단일 핫 인코딩의 유일한 단점은 피쳐 수(데이터의 치수)가 범주가 많은 범주형 변수로 폭발할 수 있다는 점이다. 이를 처리하기 위해 PCA나 기타 차원성 감소 방법에 따라 1회 핫 인코딩을 수행하여 치수 수를 줄일 수 있다(여전히 정보 보존을 위해 노력).</p>
<p>이 노트북에서는 범주 2개만 있는 범주형 변수에 레이블 인코딩을 사용하고 범주 2개 이상의 범주형 변수에 대해 One-Hot 인코딩을 사용할 것이다. 이 과정은 프로젝트에 더 깊이 들어가면서 변화가 필요할 수 있지만, 현재로서는 이것이 우리에게 어떤 영향을 미치는지 알 수 있을 것이다. (우리는 또한 이 노트북에서 어떠한 차원성 감소도 사용하지 않고 향후 반복해서 검토할 것이다.)</p>
<h3 id="레이블-인코딩-및-단일-핫-인코딩"><a href="#레이블-인코딩-및-단일-핫-인코딩" class="headerlink" title="레이블 인코딩 및 단일 핫 인코딩"></a>레이블 인코딩 및 단일 핫 인코딩</h3><p>위에서 설명한 정책을 실행하자: 2개의 고유한 범주를 가진 범주형 변수(dtype == 객체)에 대해서는 레이블 인코딩을 사용하고, 2개 이상의 고유한 범주를 가진 범주형 변수에 대해서는 1-hot 인코딩을 사용한다.</p>
<p>라벨 인코딩의 경우 Scikit-Learn LabelEncoder를 사용하고, 핫 인코딩의 경우 팬더 get_dummies(df) 기능을 사용한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 레이블 인코더 객체 생성</span></span><br><span class="line">le = LabelEncoder()</span><br><span class="line">le_count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 열을 반복하십시오</span></span><br><span class="line"><span class="keyword">for</span> col <span class="keyword">in</span> app_train:</span><br><span class="line">    <span class="keyword">if</span> app_train[col].dtype == <span class="string">&#x27;object&#x27;</span>:</span><br><span class="line">        <span class="comment"># 고유 범주가 2개 이하인 경우</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(<span class="built_in">list</span>(app_train[col].unique())) &lt;= <span class="number">2</span>:</span><br><span class="line">            <span class="comment"># 교육 데이터 교육</span></span><br><span class="line">            le.fit(app_train[col])</span><br><span class="line">            <span class="comment"># 교육 및 테스트 데이터 모두 혁신</span></span><br><span class="line">            app_train[col] = le.transform(app_train[col])</span><br><span class="line">            app_test[col] = le.transform(app_test[col])</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># 레이블이 인코딩된 열 수를 추적</span></span><br><span class="line">            le_count += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">print(<span class="string">&#x27;%d columns were label encoded.&#x27;</span> % le_count)</span><br></pre></td></tr></table></figure>

<pre><code>0 columns were label encoded.</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 범주형 변수의 단일 핫 인코딩</span></span><br><span class="line">app_train = pd.get_dummies(app_train)</span><br><span class="line">app_test = pd.get_dummies(app_test)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Training Features shape: &#x27;</span>, app_train.shape)</span><br><span class="line">print(<span class="string">&#x27;Testing Features shape: &#x27;</span>, app_test.shape)</span><br></pre></td></tr></table></figure>

<pre><code>Training Features shape:  (307511, 243)
Testing Features shape:  (48744, 239)</code></pre>
<h3 id="교육-및-테스트-데이터-정렬"><a href="#교육-및-테스트-데이터-정렬" class="headerlink" title="교육 및 테스트 데이터 정렬"></a>교육 및 테스트 데이터 정렬</h3><p>훈련 데이터와 시험 데이터 모두에서 동일한 특징(색상)이 있어야 한다. 원핫 인코딩은 시험 데이터에 나타나지 않는 범주를 포함하는 일부 범주형 변수가 있었기 때문에 훈련 데이터에 더 많은 열을 생성했다. 테스트 데이터에 없는 교육 데이터 열을 제거하려면 데이터 프레임을 정렬해야 한다. 먼저 교육 데이터에서 대상 열을 추출한다(시험 데이터에는 없지만 이 정보를 보관해야 하기 때문이다). 정렬을 수행할 때 행이 아닌 열에 따라 데이터 프레임을 정렬하도록 축 = 1을 설정해야 함! </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">train_labels = app_train[<span class="string">&#x27;TARGET&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 교육 및 테스트 데이터 정렬, 두 데이터 프레임에 열만 유지</span></span><br><span class="line">app_train, app_test = app_train.align(app_test, join = <span class="string">&#x27;inner&#x27;</span>, axis = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 목표값 다시 추가</span></span><br><span class="line">app_train[<span class="string">&#x27;TARGET&#x27;</span>] = train_labels</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;Training Features shape: &#x27;</span>, app_train.shape)</span><br><span class="line">print(<span class="string">&#x27;Testing Features shape: &#x27;</span>, app_test.shape)</span><br></pre></td></tr></table></figure>

<pre><code>Training Features shape:  (307511, 240)
Testing Features shape:  (48744, 239)</code></pre>
<p>교육 및 테스트 데이터셋은 이제 머신러닝에 필요한 기능과 동일한 기능을 가지고 있다. 원핫 인코딩으로 피쳐 수가 크게 늘었다. 데이터셋 크기를 줄이기 위해 언젠가는 차원성 축소(관련되지 않은 기능 제거)를 시도해보려고 할 것이다.</p>
<h3 id="탐색-데이터-분석으로-돌아가기"><a href="#탐색-데이터-분석으로-돌아가기" class="headerlink" title="탐색 데이터 분석으로 돌아가기"></a>탐색 데이터 분석으로 돌아가기</h3><p>이상 징후<br>우리가 EDA를 할 때 항상 경계하고 싶은 한 가지 문제는 데이터 내의 이상 현상이다. 이는 잘못된 형식의 숫자, 측정 장비의 오류 또는 유효하지만 극단적인 측정 때문일 수 있다. 이상 징후를 정량적으로 지원하는 한 가지 방법은 설명 방법을 사용하여 열의 통계를 보는 것이다. DAYS_BOYDE 칼럼의 숫자는 현재 대출 신청과 관련하여 기록되기 때문에 음수가 된다. 이러한 통계치를 년 단위로 보려면 -1로 나누어 1년 내 일수로 나누면 된다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(app_train[<span class="string">&#x27;DAYS_BIRTH&#x27;</span>] / <span class="number">-365</span>).describe()</span><br></pre></td></tr></table></figure>




<pre><code>count    307511.000000
mean         43.936973
std          11.956133
min          20.517808
25%          34.008219
50%          43.150685
75%          53.923288
max          69.120548
Name: DAYS_BIRTH, dtype: float64</code></pre>
<p>그 나이들은 합리적으로 보인다. 높은 쪽이든 낮은 쪽이든 나이에 대한 특이치는 없다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app_train[<span class="string">&#x27;DAYS_EMPLOYED&#x27;</span>].describe()</span><br></pre></td></tr></table></figure>




<pre><code>count    307511.000000
mean      63815.045904
std      141275.766519
min      -17912.000000
25%       -2760.000000
50%       -1213.000000
75%        -289.000000
max      365243.000000
Name: DAYS_EMPLOYED, dtype: float64</code></pre>
<p>그건 옳지 않아! 최대값(긍정적인 것 외에)은 약 1000년</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app_train[<span class="string">&#x27;DAYS_EMPLOYED&#x27;</span>].plot.hist(title = <span class="string">&#x27;Days Employment Histogram&#x27;</span>);</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Days Employment&#x27;</span>);</span><br></pre></td></tr></table></figure>


<p><img src="/images/home_credit_default_risk/output_46_0.png" alt="png"></p>
<p>그냥 궁금해서 변칙적인 고객들을 부분집합해서 나머지 고객들보다 채무불이행 비율이 더 높은지 낮은지 살펴보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">anom = app_train[app_train[<span class="string">&#x27;DAYS_EMPLOYED&#x27;</span>] == <span class="number">365243</span>]</span><br><span class="line">non_anom = app_train[app_train[<span class="string">&#x27;DAYS_EMPLOYED&#x27;</span>] != <span class="number">365243</span>]</span><br><span class="line">print(<span class="string">&#x27;The non-anomalies default on %0.2f%% of loans&#x27;</span> % (<span class="number">100</span> * non_anom[<span class="string">&#x27;TARGET&#x27;</span>].mean()))</span><br><span class="line">print(<span class="string">&#x27;The anomalies default on %0.2f%% of loans&#x27;</span> % (<span class="number">100</span> * anom[<span class="string">&#x27;TARGET&#x27;</span>].mean()))</span><br><span class="line">print(<span class="string">&#x27;There are %d anomalous days of employment&#x27;</span> % <span class="built_in">len</span>(anom))</span><br></pre></td></tr></table></figure>

<pre><code>The non-anomalies default on 8.66% of loans
The anomalies default on 5.40% of loans
There are 55374 anomalous days of employment</code></pre>
<p>이상 징후는 채무불이행 비율이 낮은 것으로 나타났다.</p>
<p>이상 징후를 다루는 것은 정해진 규칙 없이 정확한 상황에 따라 달라진다. 가장 안전한 방법 중 하나는 기계의 학습 전에 이상 징후를 결측값으로 설정한 다음 (귀책 사용) 입력하는 것이다. 이 경우 모든 이상 징후가 정확히 동일한 가치를 가지기 때문에 이러한 모든 대출이 공통적으로 공유될 경우에 대비하여 동일한 가치로 기입하고자 한다. 변칙적인 값들은 어느 정도 중요한 것 같아, 만약 우리가 실제로 이 값을 채웠다면 우리는 기계 학습 모델을 말해주고 싶다. 해결책으로 숫자(np.nan)가 아닌 변칙값으로 채운 다음 변칙값의 변칙 여부를 나타내는 부울란을 새로 만들겠다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 변칙적인 플래그 열 생성</span></span><br><span class="line">app_train[<span class="string">&#x27;DAYS_EMPLOYED_ANOM&#x27;</span>] = app_train[<span class="string">&quot;DAYS_EMPLOYED&quot;</span>] == <span class="number">365243</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 변칙적인 값은 nan으로 대체</span></span><br><span class="line">app_train[<span class="string">&#x27;DAYS_EMPLOYED&#x27;</span>].replace(&#123;<span class="number">365243</span>: np.nan&#125;, inplace = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">app_train[<span class="string">&#x27;DAYS_EMPLOYED&#x27;</span>].plot.hist(title = <span class="string">&#x27;Days Employment Histogram&#x27;</span>);</span><br><span class="line">plt.xlabel(<span class="string">&#x27;Days Employment&#x27;</span>);</span><br></pre></td></tr></table></figure>


<p><img src="/images/home_credit_default_risk/output_50_0.png" alt="png"></p>
<p>분포는 우리가 예상할 수 있는 것과 훨씬 일치하는 것으로 보이며, 우리는 또한 모형에 이 값들이 원래 변칙적이라는 것을 알리기 위해 새로운 열을 만들었다. (왜냐하면 우리는 일부 값, 아마도 열의 중간값으로 난을 채워야 할 것이기 때문이다.) 데이터 프레임에 Days가 있는 다른 열은 명백한 특이치가 없는 것으로 우리가 기대하는 것에 대한 것으로 보인다.</p>
<p>매우 중요한 사항으로서, 교육 데이터에 대해 수행하는 모든 작업은 테스트 데이터에도 적용되어야 한다. 반드시 새 열을 만들고 기존 열을 테스트 데이터에 np.nan으로 채우자.          </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app_test[<span class="string">&#x27;DAYS_EMPLOYED_ANOM&#x27;</span>] = app_test[<span class="string">&quot;DAYS_EMPLOYED&quot;</span>] == <span class="number">365243</span></span><br><span class="line">app_test[<span class="string">&quot;DAYS_EMPLOYED&quot;</span>].replace(&#123;<span class="number">365243</span>: np.nan&#125;, inplace = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;There are %d anomalies in the test data out of %d entries&#x27;</span> % (app_test[<span class="string">&quot;DAYS_EMPLOYED_ANOM&quot;</span>].<span class="built_in">sum</span>(), <span class="built_in">len</span>(app_test)))</span><br></pre></td></tr></table></figure>

<pre><code>There are 9274 anomalies in the test data out of 48744 entries</code></pre>
<p>상관 관계<br>이제 범주형 변수와 특이치를 다루었으므로 EDA를 계속 진행합시다. 데이터를 이해하고 이해하는 한 가지 방법은 피쳐와 대상 간의 상관 관계를 찾는 것이다. 우리는 .corr 데이터프레임 방법을 사용하여 모든 변수와 목표값 사이의 Pearson 상관 계수를 계산할 수 있다.</p>
<p>상관 계수는 형상의 “관련성”을 나타내는 가장 큰 방법은 아니지만, 데이터 내에서 가능한 관계에 대한 아이디어를 제공한다. 상관관계의 절대값에 대한 일반적인 해석은 다음과 같다.</p>
<ul>
<li>.00-19 “매우 약함”</li>
<li>.20-.39 “weak”</li>
<li>.40-.59 “moderate”</li>
<li>.60-.79 “강력”</li>
<li>.80-1.0 “매우 강함”</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 대상과의 상관관계를 찾아 정렬</span></span><br><span class="line">correlations = app_train.corr()[<span class="string">&#x27;TARGET&#x27;</span>].sort_values()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 상관관계 표시</span></span><br><span class="line">print(<span class="string">&#x27;Most Positive Correlations:\n&#x27;</span>, correlations.tail(<span class="number">15</span>))</span><br><span class="line">print(<span class="string">&#x27;\nMost Negative Correlations:\n&#x27;</span>, correlations.head(<span class="number">15</span>))</span><br></pre></td></tr></table></figure>

<pre><code>Most Positive Correlations:
 OCCUPATION_TYPE_Laborers                             0.043019
FLAG_DOCUMENT_3                                      0.044346
REG_CITY_NOT_LIVE_CITY                               0.044395
FLAG_EMP_PHONE                                       0.045982
NAME_EDUCATION_TYPE_Secondary / secondary special    0.049824
REG_CITY_NOT_WORK_CITY                               0.050994
DAYS_ID_PUBLISH                                      0.051457
CODE_GENDER_M                                        0.054713
DAYS_LAST_PHONE_CHANGE                               0.055218
NAME_INCOME_TYPE_Working                             0.057481
REGION_RATING_CLIENT                                 0.058899
REGION_RATING_CLIENT_W_CITY                          0.060893
DAYS_EMPLOYED                                        0.074958
DAYS_BIRTH                                           0.078239
TARGET                                               1.000000
Name: TARGET, dtype: float64

Most Negative Correlations:
 EXT_SOURCE_3                           -0.178919
EXT_SOURCE_2                           -0.160472
EXT_SOURCE_1                           -0.155317
NAME_EDUCATION_TYPE_Higher education   -0.056593
CODE_GENDER_F                          -0.054704
NAME_INCOME_TYPE_Pensioner             -0.046209
DAYS_EMPLOYED_ANOM                     -0.045987
ORGANIZATION_TYPE_XNA                  -0.045987
FLOORSMAX_AVG                          -0.044003
FLOORSMAX_MEDI                         -0.043768
FLOORSMAX_MODE                         -0.043226
EMERGENCYSTATE_MODE_No                 -0.042201
HOUSETYPE_MODE_block of flats          -0.040594
AMT_GOODS_PRICE                        -0.039645
REGION_POPULATION_RELATIVE             -0.037227
Name: TARGET, dtype: float64</code></pre>
<p>더 중요한 상관관계 몇 가지를 살펴봅시다: DAYS_BOYT는 가장 긍정적인 상관관계 입니다. (변수와 그 자체와의 상관관계가 항상 1이기 때문에 TARGET은 제외) 문서를 보면 Days_BOYT는 마이너스일(어떠한 이유로든!) 대출 당시 고객의 일(일) 연령이다. 상관관계는 양수지만, 이 특성의 값은 실제로 음수인데, 이는 클라이언트가 나이가 들수록 대출금 채무불이행(대상 == 0) 가능성이 적다는 것을 의미한다. 그건 좀 헷갈리니까 형상의 절대값을 취해서 그 다음에 상관관계는 음수가 될 겁니다.</p>
<h3 id="상환연령이-상환에-미치는-영향"><a href="#상환연령이-상환에-미치는-영향" class="headerlink" title="상환연령이 상환에 미치는 영향"></a>상환연령이 상환에 미치는 영향</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 출생 후 양일간과 대상의 상관관계 찾기</span></span><br><span class="line">app_train[<span class="string">&#x27;DAYS_BIRTH&#x27;</span>] = <span class="built_in">abs</span>(app_train[<span class="string">&#x27;DAYS_BIRTH&#x27;</span>])</span><br><span class="line">app_train[<span class="string">&#x27;DAYS_BIRTH&#x27;</span>].corr(app_train[<span class="string">&#x27;TARGET&#x27;</span>])</span><br></pre></td></tr></table></figure>




<pre><code>-0.07823930830982694</code></pre>
<p>고객이 나이가 들수록 고객이 나이가 들수록 대출금을 제때 상환하는 경향이 있다는 목표와 부정적인 선형 관계가 형성된다.</p>
<p>이 변수부터 살펴보자. 첫째, 우리는 시대의 히스토그램을 만들 수 있다. 우리는 그 줄거리를 좀 더 이해할 수 있도록 몇 년 안에 x축을 넣을 것이다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 플롯 스타일 설정</span></span><br><span class="line">plt.style.use(<span class="string">&#x27;fivethirtyeight&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 연령별 연령 분포 그림 그리기</span></span><br><span class="line">plt.hist(app_train[<span class="string">&#x27;DAYS_BIRTH&#x27;</span>] / <span class="number">365</span>, edgecolor = <span class="string">&#x27;k&#x27;</span>, bins = <span class="number">25</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Age of Client&#x27;</span>); plt.xlabel(<span class="string">&#x27;Age (years)&#x27;</span>); plt.ylabel(<span class="string">&#x27;Count&#x27;</span>);</span><br></pre></td></tr></table></figure>


<p><img src="/images/home_credit_default_risk/output_59_0.png" alt="png"></p>
<p>그 자체로 연령의 분포는 모든 연령대가 합리적이기 때문에 특이치가 없다는 것 이외에는 우리에게 별로 알려주지 않는다. 연령대가 대상에 미치는 영향을 시각화하기 위해 다음으로 대상의 값으로 색칠한 KDE(커널 밀도 추정도)를 만들겠다. 커널 밀도 추정 그림은 단일 변수의 분포를 보여주며 평활 히스토그램으로 생각할 수 있다(대개 가우스인 커널을 각 데이터 지점에서 계산한 다음 모든 개별 커널을 평균하여 단일 평활 곡선을 개발함으로써 생성된다). 우리는 이 그래프에 해저 Kdeplot을 사용할 것이다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize = (<span class="number">10</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 제때 상환된 대출의 KDE 플롯</span></span><br><span class="line">sns.kdeplot(app_train.loc[app_train[<span class="string">&#x27;TARGET&#x27;</span>] == <span class="number">0</span>, <span class="string">&#x27;DAYS_BIRTH&#x27;</span>] / <span class="number">365</span>, label = <span class="string">&#x27;target == 0&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 제때 상환되지 않은 대출의 KDE 플롯</span></span><br><span class="line">sns.kdeplot(app_train.loc[app_train[<span class="string">&#x27;TARGET&#x27;</span>] == <span class="number">1</span>, <span class="string">&#x27;DAYS_BIRTH&#x27;</span>] / <span class="number">365</span>, label = <span class="string">&#x27;target == 1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 플롯의 라벨링</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Age (years)&#x27;</span>); plt.ylabel(<span class="string">&#x27;Density&#x27;</span>); plt.title(<span class="string">&#x27;Distribution of Ages&#x27;</span>);</span><br></pre></td></tr></table></figure>


<p><img src="/images/home_credit_default_risk/output_61_0.png" alt="png"></p>
<p>목표 == 1 커브가 범위의 젊은 쪽 끝을 향해 기울어진다. 이는 유의미한 상관 계수(-0.07 상관 계수)는 아니지만, 이 변수는 대상에 영향을 미치기 때문에 머신러닝 모델에서 유용할 것으로 보인다. 이 관계를 다른 방식으로 보자: 평균적으로 연령대별 대출금 상환 실패.</p>
<p>이 그래프를 만들기 위해 먼저 나이 범주를 각각 5년씩의 빈으로 자른다. 그런 다음 각 빈에 대해 대상의 평균가치를 산출하는데, 이는 각 연령 범주별로 상환되지 않은 대출의 비율을 알려준다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-11-04T06:28:05.467Z" title="2020-11-04T06:28:05.467Z">2020-11-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-11-05T05:28:39.270Z" title="2020-11-05T05:28:39.270Z">2020-11-05</time></span><span class="level-item">an hour read (About 7230 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/11/04/titanic/">titanic</a></h1><div class="content"><h1 id="Kaggle-API-설치"><a href="#Kaggle-API-설치" class="headerlink" title="Kaggle API 설치"></a>Kaggle API 설치</h1><ul>
<li>Google Colab에서 Kaggle API를 불러오려면 다음 소스코드를 실행한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!pip install kaggle</span><br></pre></td></tr></table></figure>

<pre><code>Requirement already satisfied: kaggle in /usr/local/lib/python3.6/dist-packages (1.5.9)
Requirement already satisfied: six&gt;=1.10 in /usr/local/lib/python3.6/dist-packages (from kaggle) (1.15.0)
Requirement already satisfied: urllib3 in /usr/local/lib/python3.6/dist-packages (from kaggle) (1.24.3)
Requirement already satisfied: slugify in /usr/local/lib/python3.6/dist-packages (from kaggle) (0.0.1)
Requirement already satisfied: python-dateutil in /usr/local/lib/python3.6/dist-packages (from kaggle) (2.8.1)
Requirement already satisfied: tqdm in /usr/local/lib/python3.6/dist-packages (from kaggle) (4.41.1)
Requirement already satisfied: python-slugify in /usr/local/lib/python3.6/dist-packages (from kaggle) (4.0.1)
Requirement already satisfied: requests in /usr/local/lib/python3.6/dist-packages (from kaggle) (2.23.0)
Requirement already satisfied: certifi in /usr/local/lib/python3.6/dist-packages (from kaggle) (2020.6.20)
Requirement already satisfied: text-unidecode&gt;=1.3 in /usr/local/lib/python3.6/dist-packages (from python-slugify-&gt;kaggle) (1.3)
Requirement already satisfied: chardet&lt;4,&gt;=3.0.2 in /usr/local/lib/python3.6/dist-packages (from requests-&gt;kaggle) (3.0.4)
Requirement already satisfied: idna&lt;3,&gt;=2.5 in /usr/local/lib/python3.6/dist-packages (from requests-&gt;kaggle) (2.10)</code></pre>
<h2 id="1-Kaggle-Token-다운로드"><a href="#1-Kaggle-Token-다운로드" class="headerlink" title="1. Kaggle Token 다운로드"></a>1. Kaggle Token 다운로드</h2><ul>
<li>Kaggle에서 <code>API Token</code>을 다운로드 받는다. </li>
<li>[Kaggle]-[My Account]-[API]-[Create New API Token]을 누르면 kaggle.json 파일이 다운로드 된다. </li>
<li>이 파일을 바탕화면에 옮긴 뒤, 아래 코드(토큰을 실행시키는 코드)를 실행 시킨다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> google.colab <span class="keyword">import</span> files</span><br><span class="line">uploaded = files.upload()</span><br><span class="line"><span class="keyword">for</span> fn <span class="keyword">in</span> uploaded.keys():</span><br><span class="line">  print(<span class="string">&#x27;uploaded file &quot;&#123;name&#125;&quot; with length &#123;length&#125; bytes&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">      name=fn, length=<span class="built_in">len</span>(uploaded[fn])))</span><br><span class="line">  </span><br><span class="line"><span class="comment"># kaggle.json을 아래 폴더로 옮긴 뒤, file을 사용할 수 있도록 권한을 부여한다. </span></span><br><span class="line">!mkdir -p ~/.kaggle/ &amp;&amp; mv kaggle.json ~/.kaggle/ &amp;&amp; chmod <span class="number">600</span> ~/.kaggle/kaggle.json</span><br></pre></td></tr></table></figure>



<p><input type="file" id="files-efff3ea8-bcea-47b8-a2af-e515eebd283e" name="files[]" multiple disabled
   style="border:none" /><br><output id="result-efff3ea8-bcea-47b8-a2af-e515eebd283e"><br> Upload widget is only available when the cell has been executed in the<br> current browser session. Please rerun this cell to enable.<br> </output><br> <script src="/nbextensions/google.colab/files.js"></script> </p>
<pre><code>Saving kaggle.json to kaggle.json
uploaded file &quot;kaggle.json&quot; with length 66 bytes</code></pre>
<ul>
<li>아래 코드는 실행됬는지 확인하는 코드</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls <span class="number">-1</span>ha ~/.kaggle/kaggle.json</span><br></pre></td></tr></table></figure>

<pre><code>/root/.kaggle/kaggle.json</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-Kaggle-데이터-불러오기"><a href="#2-Kaggle-데이터-불러오기" class="headerlink" title="2. Kaggle 데이터 불러오기"></a>2. Kaggle 데이터 불러오기</h2><ul>
<li>먼저 kaggle competition list를 불러온다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!kaggle competitions <span class="built_in">list</span></span><br></pre></td></tr></table></figure>

<pre><code>Warning: Looks like you&#39;re using an outdated API Version, please consider updating (server 1.5.9 / client 1.5.4)
ref                                            deadline             category            reward  teamCount  userHasEntered  
---------------------------------------------  -------------------  ---------------  ---------  ---------  --------------  
contradictory-my-dear-watson                   2030-07-01 23:59:00  Getting Started     Prizes        134           False  
gan-getting-started                            2030-07-01 23:59:00  Getting Started     Prizes        185           False  
tpu-getting-started                            2030-06-03 23:59:00  Getting Started  Knowledge        315           False  
digit-recognizer                               2030-01-01 00:00:00  Getting Started  Knowledge       2356           False  
titanic                                        2030-01-01 00:00:00  Getting Started  Knowledge      18058            True  
house-prices-advanced-regression-techniques    2030-01-01 00:00:00  Getting Started  Knowledge       4536            True  
connectx                                       2030-01-01 00:00:00  Getting Started  Knowledge        390           False  
nlp-getting-started                            2030-01-01 00:00:00  Getting Started  Knowledge       1184           False  
rock-paper-scissors                            2021-02-01 23:59:00  Playground          Prizes        152           False  
riiid-test-answer-prediction                   2021-01-07 23:59:00  Featured          $100,000       1466           False  
nfl-big-data-bowl-2021                         2021-01-05 23:59:00  Analytics         $100,000          0           False  
competitive-data-science-predict-future-sales  2020-12-31 23:59:00  Playground           Kudos       9343           False  
halite-iv-playground-edition                   2020-12-31 23:59:00  Playground       Knowledge         43           False  
predict-volcanic-eruptions-ingv-oe             2020-12-28 23:59:00  Playground            Swag        193           False  
hashcode-drone-delivery                        2020-12-14 23:59:00  Playground       Knowledge         79           False  
cdp-unlocking-climate-solutions                2020-12-02 23:59:00  Analytics          $91,000          0           False  
lish-moa                                       2020-11-30 23:59:00  Research           $30,000       3395           False  
google-football                                2020-11-30 23:59:00  Featured            $6,000        916           False  
conways-reverse-game-of-life-2020              2020-11-30 23:59:00  Playground            Swag        131           False  
lyft-motion-prediction-autonomous-vehicles     2020-11-25 23:59:00  Featured           $30,000        778           False  </code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!kaggle competitions download -c titanic  </span><br></pre></td></tr></table></figure>

<pre><code>Warning: Looks like you&#39;re using an outdated API Version, please consider updating (server 1.5.9 / client 1.5.4)
Downloading gender_submission.csv to /content
  0% 0.00/3.18k [00:00&lt;?, ?B/s]
100% 3.18k/3.18k [00:00&lt;00:00, 6.86MB/s]
Downloading test.csv to /content
  0% 0.00/28.0k [00:00&lt;?, ?B/s]
100% 28.0k/28.0k [00:00&lt;00:00, 23.4MB/s]
Downloading train.csv to /content
  0% 0.00/59.8k [00:00&lt;?, ?B/s]
100% 59.8k/59.8k [00:00&lt;00:00, 52.2MB/s]</code></pre>
<ul>
<li>ls는 디렉터리(파일,경로) 내의 데이터 파일을 보여주는 명령어</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!ls</span><br></pre></td></tr></table></figure>

<pre><code>gender_submission.csv  sample_data  test.csv  train.csv</code></pre>
<ul>
<li>현재 총 4개의 데이터를 다운로드 받았다. <ul>
<li>gender_submission.csv</li>
<li>sample_data</li>
<li>test.csv</li>
<li>train.csv</li>
</ul>
</li>
</ul>
<h2 id="3-캐글-데이터-수집-및-EDA"><a href="#3-캐글-데이터-수집-및-EDA" class="headerlink" title="3. 캐글 데이터 수집 및 EDA"></a>3. 캐글 데이터 수집 및 EDA</h2><ul>
<li>우선 데이터를 수집하기에 앞서서 <code>EDA</code>에 관한 필수 패키지를 설치하자. </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment"># 데이터 가공 변환(deploy)</span></span><br><span class="line"><span class="keyword">import</span> pandas_profiling <span class="comment"># 보고서 기능 </span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np <span class="comment"># 수치연산 &amp; 배열 </span></span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">plt.style.use(<span class="string">&#x27;fivethirtyeight&#x27;</span>)</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">from</span> IPython.core.display <span class="keyword">import</span> display, HTML</span><br></pre></td></tr></table></figure>

<h3 id="1-데이터-불러오기"><a href="#1-데이터-불러오기" class="headerlink" title="(1) 데이터 불러오기"></a>(1) 데이터 불러오기</h3><ul>
<li>지난 시간에 받은 데이터가 총 4개임을 확인했다.<ul>
<li>gender_submission.csv</li>
<li>sample_data</li>
<li>test.csv</li>
<li>train.csv</li>
</ul>
</li>
<li>여기에서는 우선 <code>test.csv</code> &amp; <code>train.csv</code> 파일을 받도록 한다. </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">train = pd.read_csv(<span class="string">&#x27;train.csv&#x27;</span>)</span><br><span class="line">test = pd.read_csv(<span class="string">&#x27;test.csv&#x27;</span>)</span><br><span class="line">print(<span class="string">&quot;data import is done&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>data import is done</code></pre>
<h3 id="2-데이터-확인"><a href="#2-데이터-확인" class="headerlink" title="(2) 데이터 확인"></a>(2) 데이터 확인</h3><ul>
<li><code>Kaggle</code> 데이터를 불러오면 우선 확인해야 하는 것은 데이터셋의 크기다. <ul>
<li>변수의 갯수</li>
<li>Numeric 변수 &amp; Categorical 변수의 개수 등을 파악해야 한다.</li>
</ul>
</li>
<li>Point 1 - <code>train</code>데이터에서 굳이 훈련데이터와 테스트 데이터를 구분할 필요는 없다. <ul>
<li>보통 <code>Kaggle</code>에서는 테스트 데이터를 주기적으로 업데이트 해준다.</li>
</ul>
</li>
<li>Point 2 - 보통 <code>test</code> 데이터의 변수의 개수가 하나 더 작다. </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">train.shape, test.shape</span><br></pre></td></tr></table></figure>




<pre><code>((891, 12), (418, 11))</code></pre>
<ul>
<li>그 후 <code>train</code>데이터의 <code>상위 5개</code>의 데이터만 확인한다. </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">display(train.head())</span><br></pre></td></tr></table></figure>



<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>


<p>아래 코드는 train.csv을 data로 변환 한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data=pd.read_csv(<span class="string">&#x27;train.csv&#x27;</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.head()</span><br></pre></td></tr></table></figure>




<div style = overflow:scroll;>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PassengerId</th>
      <th>Survived</th>
      <th>Pclass</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>SibSp</th>
      <th>Parch</th>
      <th>Ticket</th>
      <th>Fare</th>
      <th>Cabin</th>
      <th>Embarked</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>0</td>
      <td>3</td>
      <td>Braund, Mr. Owen Harris</td>
      <td>male</td>
      <td>22.0</td>
      <td>1</td>
      <td>0</td>
      <td>A/5 21171</td>
      <td>7.2500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>Cumings, Mrs. John Bradley (Florence Briggs Th...</td>
      <td>female</td>
      <td>38.0</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17599</td>
      <td>71.2833</td>
      <td>C85</td>
      <td>C</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>1</td>
      <td>3</td>
      <td>Heikkinen, Miss. Laina</td>
      <td>female</td>
      <td>26.0</td>
      <td>0</td>
      <td>0</td>
      <td>STON/O2. 3101282</td>
      <td>7.9250</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>Futrelle, Mrs. Jacques Heath (Lily May Peel)</td>
      <td>female</td>
      <td>35.0</td>
      <td>1</td>
      <td>0</td>
      <td>113803</td>
      <td>53.1000</td>
      <td>C123</td>
      <td>S</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>0</td>
      <td>3</td>
      <td>Allen, Mr. William Henry</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<pre><code>PassengerId      0
Survived         0
Pclass           0
Name             0
Sex              0
Age            177
SibSp            0
Parch            0
Ticket           0
Fare             0
Cabin          687
Embarked         2
dtype: int64</code></pre>
<p>The Age, Cabin and Embarked 에 대한 결측값을 구한다.</p>
<h2 id="얼마나-살아남았나"><a href="#얼마나-살아남았나" class="headerlink" title="얼마나 살아남았나?"></a>얼마나 살아남았나?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">18</span>,<span class="number">8</span>))</span><br><span class="line">data[<span class="string">&#x27;Survived&#x27;</span>].value_counts().plot.pie(explode=[<span class="number">0</span>,<span class="number">0.1</span>],autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>,ax=ax[<span class="number">0</span>],shadow=<span class="literal">True</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Survived&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_ylabel(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Survived&#x27;</span>,data=data,ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Survived&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_27_0.png" alt="png"></p>
<p>그 사고에서 살아남은 승객이 많지 않다는 것은 명백하다.</p>
<p>훈련장 891명 중 350명 정도만 살아남았다. 즉, 전체 훈련장 중 38.4%만이 추락사고에서 살아남았다. 우리는 데이터로부터 더 나은 통찰력을 얻고 어떤 범주의 승객들이 살아남았는지 그리고 누가 살아남지 않았는지 보기 위해 더 많은 정보를 캐내야 한다.</p>
<p>우리는 데이터 세트의 다른 특징들을 사용하여 생존율을 확인하도록 노력할 것이다. Sex, Port Of Embarcation, Age 등이 특징이다.</p>
<p>먼저 다양한 유형의 특징을 이해하십시오.</p>
<p>피쳐 유형</p>
<ul>
<li><p>범주형 피쳐:<br>범주형 변수는 두 개 이상의 범주를 가진 변수 중 하나이며, 해당 형상의 각 값은 범주별로 분류할 수 있다.예를 들어, 성별은 두 개의 범주(남성과 여성)를 갖는 범주형 변수다. 이제 우리는 그러한 변수들에 대해 어떠한 순서도 정렬할 수 없다. 이 변수들은 공칭 변수라고도 한다.</p>
<ul>
<li>데이터 집합의 범주형 특징: 성별, 도착.</li>
</ul>
</li>
<li><p>순서형 피쳐:<br>순서형 변수는 범주형 값과 비슷하지만, 그 값들 사이의 차이는 우리가 상대적인 순서나 값들 사이의 정렬을 가질 수 있다는 것이다. 예를 들어: 높이에 높은 값, 중간 값, 짧은 값과 같은 특징이 있다면 높이는 서수 변수다. 여기서 우리는 변수에서 상대적인 분류법을 가질 수 있다.</p>
<ul>
<li>데이터 집합의 순서형 기능: PClass</li>
</ul>
</li>
<li><p>연속 기능:<br>형상은 형상 열의 두 점 또는 최소값 또는 최대값 사이에 값을 취할 수 있는 경우 지속된다고 한다.</p>
<ul>
<li>데이터 집합의 지속적인 기능: 나이</li>
</ul>
</li>
</ul>
<h3 id="특성-분석"><a href="#특성-분석" class="headerlink" title="특성 분석"></a>특성 분석</h3><p>성–&gt; 범주형 특징</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.groupby([<span class="string">&#x27;Sex&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>])[<span class="string">&#x27;Survived&#x27;</span>].count()</span><br></pre></td></tr></table></figure>




<pre><code>Sex     Survived
female  0            81
        1           233
male    0           468
        1           109
Name: Survived, dtype: int64</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">18</span>,<span class="number">8</span>))</span><br><span class="line">data[[<span class="string">&#x27;Sex&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>]].groupby([<span class="string">&#x27;Sex&#x27;</span>]).mean().plot.bar(ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Survived vs Sex&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Sex&#x27;</span>,hue=<span class="string">&#x27;Survived&#x27;</span>,data=data,ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Sex:Survived vs Dead&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_32_0.png" alt="png"></p>
<p>배에 타고 있는 남자들의 수가 여자들의 수보다 훨씬 많다. 그러나 여전히 구조된 여성의 수는 구조된 남성의 수보다 거의 두 배나 많다. 배에 타고 있는 여성의 생존율은 약 75%인 반면 남성은 약 18-19%이다.</p>
<p>이것은 모델링을 위해 매우 중요한 특징으로 보인다. 하지만 그게 최고일까? 다른 기능을 확인해 봅시다.</p>
<h3 id="Pclass-–-gt-순서형-피쳐"><a href="#Pclass-–-gt-순서형-피쳐" class="headerlink" title="Pclass –&gt; 순서형 피쳐"></a>Pclass –&gt; 순서형 피쳐</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(data.Pclass,data.Survived,margins=<span class="literal">True</span>).style.background_gradient(cmap=<span class="string">&#x27;summer_r&#x27;</span>)</span><br></pre></td></tr></table></figure>



<div style = overflow:scroll;>
<style  type="text/css" >
#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row0_col0,#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row1_col1,#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row1_col2{
            background-color:  #ffff66;
            color:  #000000;
        }#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row0_col1{
            background-color:  #cee666;
            color:  #000000;
        }#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row0_col2{
            background-color:  #f4fa66;
            color:  #000000;
        }#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row1_col0{
            background-color:  #f6fa66;
            color:  #000000;
        }#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row2_col0{
            background-color:  #60b066;
            color:  #000000;
        }#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row2_col1{
            background-color:  #dfef66;
            color:  #000000;
        }#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row2_col2{
            background-color:  #90c866;
            color:  #000000;
        }#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row3_col0,#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row3_col1,#T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row3_col2{
            background-color:  #008066;
            color:  #f1f1f1;
        }</style><table id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002" ><thead>    <tr>        <th class="index_name level0" >Survived</th>        <th class="col_heading level0 col0" >0</th>        <th class="col_heading level0 col1" >1</th>        <th class="col_heading level0 col2" >All</th>    </tr>    <tr>        <th class="index_name level0" >Pclass</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002level0_row0" class="row_heading level0 row0" >1</th>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row0_col0" class="data row0 col0" >80</td>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row0_col1" class="data row0 col1" >136</td>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row0_col2" class="data row0 col2" >216</td>
            </tr>
            <tr>
                        <th id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002level0_row1" class="row_heading level0 row1" >2</th>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row1_col0" class="data row1 col0" >97</td>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row1_col1" class="data row1 col1" >87</td>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row1_col2" class="data row1 col2" >184</td>
            </tr>
            <tr>
                        <th id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002level0_row2" class="row_heading level0 row2" >3</th>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row2_col0" class="data row2 col0" >372</td>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row2_col1" class="data row2 col1" >119</td>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row2_col2" class="data row2 col2" >491</td>
            </tr>
            <tr>
                        <th id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002level0_row3" class="row_heading level0 row3" >All</th>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row3_col0" class="data row3 col0" >549</td>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row3_col1" class="data row3 col1" >342</td>
                        <td id="T_ceb04e82_1e4a_11eb_b25f_0242ac1c0002row3_col2" class="data row3 col2" >891</td>
            </tr>
    </tbody></table>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">18</span>,<span class="number">8</span>))</span><br><span class="line">data[<span class="string">&#x27;Pclass&#x27;</span>].value_counts().plot.bar(color=[<span class="string">&#x27;#CD7F32&#x27;</span>,<span class="string">&#x27;#FFDF00&#x27;</span>,<span class="string">&#x27;#D3D3D3&#x27;</span>],ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Number Of Passengers By Pclass&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_ylabel(<span class="string">&#x27;Count&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Pclass&#x27;</span>,hue=<span class="string">&#x27;Survived&#x27;</span>,data=data,ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Pclass:Survived vs Dead&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_36_0.png" alt="png"></p>
<p>P클래스사람은 돈이 모든 것을 살 수 없다고 말한다. 그러나 우리는 구조하는 동안 P클래스 1의 승객이 매우 높은 우선순위를 부여받았다는 것을 분명히 알 수 있다. P클래스 3의 탑승객 수가 훨씬 더 많았지만, 여전히 탑승객들로부터 생존하는 사람들의 수는 약 25%로 매우 낮다.</p>
<p>P클래스의 경우 1% 생존율이 약 63%인 반면 P클래스2의 경우 약 48%이다. 그래서 돈과 지위가 중요하다. 그런 물질적인 세계.</p>
<p>좀 더 자세히 살펴보고 다른 흥미로운 관찰을 확인해 봅시다. 성과 P클래스 통해 생존율을 확인해보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab([data.Sex,data.Survived],data.Pclass,margins=<span class="literal">True</span>).style.background_gradient(cmap=<span class="string">&#x27;summer_r&#x27;</span>)</span><br></pre></td></tr></table></figure>



<div style = overflow:scroll;>
<style  type="text/css" >
#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row0_col0,#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row0_col1,#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row0_col3,#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row3_col2{
            background-color:  #ffff66;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row0_col2,#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row1_col2{
            background-color:  #f1f866;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row1_col0{
            background-color:  #96cb66;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row1_col1{
            background-color:  #a3d166;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row1_col3{
            background-color:  #cfe766;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row2_col0{
            background-color:  #a7d366;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row2_col1,#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row2_col3{
            background-color:  #85c266;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row2_col2{
            background-color:  #6eb666;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row3_col0{
            background-color:  #cde666;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row3_col1{
            background-color:  #f0f866;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row3_col3{
            background-color:  #f7fb66;
            color:  #000000;
        }#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row4_col0,#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row4_col1,#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row4_col2,#T_2327443c_1e4d_11eb_b25f_0242ac1c0002row4_col3{
            background-color:  #008066;
            color:  #f1f1f1;
        }</style><table id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002" ><thead>    <tr>        <th class="blank" ></th>        <th class="index_name level0" >Pclass</th>        <th class="col_heading level0 col0" >1</th>        <th class="col_heading level0 col1" >2</th>        <th class="col_heading level0 col2" >3</th>        <th class="col_heading level0 col3" >All</th>    </tr>    <tr>        <th class="index_name level0" >Sex</th>        <th class="index_name level1" >Survived</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002level0_row0" class="row_heading level0 row0" rowspan=2>female</th>
                        <th id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002level1_row0" class="row_heading level1 row0" >0</th>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row0_col0" class="data row0 col0" >3</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row0_col1" class="data row0 col1" >6</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row0_col2" class="data row0 col2" >72</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row0_col3" class="data row0 col3" >81</td>
            </tr>
            <tr>
                                <th id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002level1_row1" class="row_heading level1 row1" >1</th>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row1_col0" class="data row1 col0" >91</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row1_col1" class="data row1 col1" >70</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row1_col2" class="data row1 col2" >72</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row1_col3" class="data row1 col3" >233</td>
            </tr>
            <tr>
                        <th id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002level0_row2" class="row_heading level0 row2" rowspan=2>male</th>
                        <th id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002level1_row2" class="row_heading level1 row2" >0</th>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row2_col0" class="data row2 col0" >77</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row2_col1" class="data row2 col1" >91</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row2_col2" class="data row2 col2" >300</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row2_col3" class="data row2 col3" >468</td>
            </tr>
            <tr>
                                <th id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002level1_row3" class="row_heading level1 row3" >1</th>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row3_col0" class="data row3 col0" >45</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row3_col1" class="data row3 col1" >17</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row3_col2" class="data row3 col2" >47</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row3_col3" class="data row3 col3" >109</td>
            </tr>
            <tr>
                        <th id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002level0_row4" class="row_heading level0 row4" >All</th>
                        <th id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002level1_row4" class="row_heading level1 row4" ></th>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row4_col0" class="data row4 col0" >216</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row4_col1" class="data row4 col1" >184</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row4_col2" class="data row4 col2" >491</td>
                        <td id="T_2327443c_1e4d_11eb_b25f_0242ac1c0002row4_col3" class="data row4 col3" >891</td>
            </tr>
    </tbody></table>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sns.factorplot(<span class="string">&#x27;Pclass&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>,hue=<span class="string">&#x27;Sex&#x27;</span>,data=data) <span class="comment">#성에 따른 Pclass 생존율</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_39_0.png" alt="png"></p>
<p>이 경우 요인 그림은 범주형 값의 분리가 쉽기 때문에 요인 그림을 사용한다.</p>
<p>크로스탭과 인자 플롯을 보면 Pclass1 여성 94명 중 3명만이 사망했기 때문에 Pclass1 여성 생존율이 약 95~96%라고 쉽게 유추할 수 있다.</p>
<p>Pclass와 관계 없이 구조하는 동안 여성에게 우선권이 주어졌다는 것은 명백하다. 심지어 Pclass1 출신의 남성들도 생존율이 매우 낮다.</p>
<p>Pclass도 중요한 특징인 것 같다. 다른 특징을 분석해보자.</p>
<h3 id="나이-–-gt-지속적-특징"><a href="#나이-–-gt-지속적-특징" class="headerlink" title="나이 –&gt; 지속적 특징"></a>나이 –&gt; 지속적 특징</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">&#x27;Oldest Passenger was of:&#x27;</span>,data[<span class="string">&#x27;Age&#x27;</span>].<span class="built_in">max</span>(),<span class="string">&#x27;Years&#x27;</span>) <span class="comment">#최대 나이 승객</span></span><br><span class="line">print(<span class="string">&#x27;Youngest Passenger was of:&#x27;</span>,data[<span class="string">&#x27;Age&#x27;</span>].<span class="built_in">min</span>(),<span class="string">&#x27;Years&#x27;</span>) <span class="comment">#최소 나이 승객 </span></span><br><span class="line">print(<span class="string">&#x27;Average Age on the ship:&#x27;</span>,data[<span class="string">&#x27;Age&#x27;</span>].mean(),<span class="string">&#x27;Years&#x27;</span>) <span class="comment">#평균 나이 승객</span></span><br></pre></td></tr></table></figure>

<pre><code>Oldest Passenger was of: 80.0 Years
Youngest Passenger was of: 0.42 Years
Average Age on the ship: 29.69911764705882 Years</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">18</span>,<span class="number">8</span>))</span><br><span class="line">sns.violinplot(<span class="string">&quot;Pclass&quot;</span>,<span class="string">&quot;Age&quot;</span>, hue=<span class="string">&quot;Survived&quot;</span>, data=data,split=<span class="literal">True</span>,ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Pclass and Age vs Survived&#x27;</span>) <span class="comment">#제목</span></span><br><span class="line">ax[<span class="number">0</span>].set_yticks(<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">110</span>,<span class="number">10</span>)) </span><br><span class="line">sns.violinplot(<span class="string">&quot;Sex&quot;</span>,<span class="string">&quot;Age&quot;</span>, hue=<span class="string">&quot;Survived&quot;</span>, data=data,split=<span class="literal">True</span>,ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Sex and Age vs Survived&#x27;</span>) <span class="comment">#제목</span></span><br><span class="line">ax[<span class="number">1</span>].set_yticks(<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">110</span>,<span class="number">10</span>))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_43_0.png" alt="png"></p>
<p>관측치:<br>1)P클래스에 따라 자녀 수가 증가하고 10세 미만(즉, 자녀)의 패시네거 생존율은 P클래스에 관계없이 양호한 것으로 보인다.</p>
<p>2)Pclass1에서 20-50세의 승객의 생존 가능성은 높고 여성에게는 더욱 좋다.</p>
<p>3)남성의 경우 나이가 들수록 생존 가능성이 줄어든다.</p>
<p>앞에서 보았듯이 에이지 기능은 177개의 null 값을 가지고 있다. 이러한 NaN 값을 대체하기 위해 데이터 집합의 평균 연령을 할당할 수 있다.</p>
<p>그런데 문제는 나이 차이가 많은 사람들이 많았다는 겁니다. 우리는 단지 평균 나이 29세인 4살 아이를 배정할 수 없다. 승객이 어떤 연령대인지 알 수 있는 방법은 없을까?</p>
<p>이름 기능을 확인할 수 있어. 그 특징을 살펴보면, 우리는 그 이름들이 Mr. 또는 Mrs.와 같은 경례를 가지고 있다는 것을 알 수 있다. 따라서 우리는 Mr. Mrs와 Mrs의 평균값을 각 그룹에 할당할 수 있다.</p>
<h3 id="‘’이름에-무엇이-있는가-”—-gt-특징-p"><a href="#‘’이름에-무엇이-있는가-”—-gt-특징-p" class="headerlink" title="‘’이름에 무엇이 있는가?”—&gt; 특징 :p"></a>‘’이름에 무엇이 있는가?”—&gt; 특징 :p</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">&#x27;Initial&#x27;</span>]=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> data:</span><br><span class="line">    data[<span class="string">&#x27;Initial&#x27;</span>]=data.Name.<span class="built_in">str</span>.extract(<span class="string">&#x27;([A-Za-z]+)\.&#x27;</span>) <span class="comment">#인사말을 꺼내자.</span></span><br></pre></td></tr></table></figure>

<p>자, 이제 Regex를 사용합시다. [A-Za-z]+).. 즉, A-Z 또는 a-z 사이에 있는 문자열을 찾고, 그 뒤에 .(점)이 있는 문자열을 찾는 겁니다. 그래서 우리는 이름에서 이니셜을 성공적으로 추출했다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(data.Initial,data.Sex).T.style.background_gradient(cmap=<span class="string">&#x27;summer_r&#x27;</span>) <span class="comment">#성으로 이니셜 확인</span></span><br></pre></td></tr></table></figure>



<div style = overflow:scroll;>
<style  type="text/css" >
#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col0,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col1,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col3,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col4,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col5,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col7,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col8,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col12,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col15,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col16,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col2,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col6,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col9,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col10,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col11,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col13,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col14{
            background-color:  #ffff66;
            color:  #000000;
        }#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col2,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col6,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col9,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col10,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col11,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col13,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col14,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col0,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col1,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col3,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col4,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col5,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col7,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col8,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col12,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col15,#T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col16{
            background-color:  #008066;
            color:  #f1f1f1;
        }</style><table id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002" ><thead>    <tr>        <th class="index_name level0" >Initial</th>        <th class="col_heading level0 col0" >Capt</th>        <th class="col_heading level0 col1" >Col</th>        <th class="col_heading level0 col2" >Countess</th>        <th class="col_heading level0 col3" >Don</th>        <th class="col_heading level0 col4" >Dr</th>        <th class="col_heading level0 col5" >Jonkheer</th>        <th class="col_heading level0 col6" >Lady</th>        <th class="col_heading level0 col7" >Major</th>        <th class="col_heading level0 col8" >Master</th>        <th class="col_heading level0 col9" >Miss</th>        <th class="col_heading level0 col10" >Mlle</th>        <th class="col_heading level0 col11" >Mme</th>        <th class="col_heading level0 col12" >Mr</th>        <th class="col_heading level0 col13" >Mrs</th>        <th class="col_heading level0 col14" >Ms</th>        <th class="col_heading level0 col15" >Rev</th>        <th class="col_heading level0 col16" >Sir</th>    </tr>    <tr>        <th class="index_name level0" >Sex</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002level0_row0" class="row_heading level0 row0" >female</th>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col0" class="data row0 col0" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col1" class="data row0 col1" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col2" class="data row0 col2" >1</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col3" class="data row0 col3" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col4" class="data row0 col4" >1</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col5" class="data row0 col5" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col6" class="data row0 col6" >1</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col7" class="data row0 col7" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col8" class="data row0 col8" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col9" class="data row0 col9" >182</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col10" class="data row0 col10" >2</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col11" class="data row0 col11" >1</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col12" class="data row0 col12" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col13" class="data row0 col13" >125</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col14" class="data row0 col14" >1</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col15" class="data row0 col15" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row0_col16" class="data row0 col16" >0</td>
            </tr>
            <tr>
                        <th id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002level0_row1" class="row_heading level0 row1" >male</th>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col0" class="data row1 col0" >1</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col1" class="data row1 col1" >2</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col2" class="data row1 col2" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col3" class="data row1 col3" >1</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col4" class="data row1 col4" >6</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col5" class="data row1 col5" >1</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col6" class="data row1 col6" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col7" class="data row1 col7" >2</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col8" class="data row1 col8" >40</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col9" class="data row1 col9" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col10" class="data row1 col10" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col11" class="data row1 col11" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col12" class="data row1 col12" >517</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col13" class="data row1 col13" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col14" class="data row1 col14" >0</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col15" class="data row1 col15" >6</td>
                        <td id="T_392ab74e_1e4f_11eb_b25f_0242ac1c0002row1_col16" class="data row1 col16" >1</td>
            </tr>
    </tbody></table>



<p>좋아, Mlle이나 Mme와 같은 철자가 틀린 이니셜이 있는데 Miss를 나타낸다. 나는 그것들을 미스나 다른 가치에 대해서도 같은 것으로 대체할 것이다.<br>아래 코드 참조</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">&#x27;Initial&#x27;</span>].replace([<span class="string">&#x27;Mlle&#x27;</span>,<span class="string">&#x27;Mme&#x27;</span>,<span class="string">&#x27;Ms&#x27;</span>,<span class="string">&#x27;Dr&#x27;</span>,<span class="string">&#x27;Major&#x27;</span>,<span class="string">&#x27;Lady&#x27;</span>,<span class="string">&#x27;Countess&#x27;</span>,<span class="string">&#x27;Jonkheer&#x27;</span>,<span class="string">&#x27;Col&#x27;</span>,<span class="string">&#x27;Rev&#x27;</span>,<span class="string">&#x27;Capt&#x27;</span>,<span class="string">&#x27;Sir&#x27;</span>,<span class="string">&#x27;Don&#x27;</span>],[<span class="string">&#x27;Miss&#x27;</span>,<span class="string">&#x27;Miss&#x27;</span>,<span class="string">&#x27;Miss&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>,<span class="string">&#x27;Mrs&#x27;</span>,<span class="string">&#x27;Mrs&#x27;</span>,<span class="string">&#x27;Other&#x27;</span>,<span class="string">&#x27;Other&#x27;</span>,<span class="string">&#x27;Other&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>,<span class="string">&#x27;Mr&#x27;</span>],inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.groupby(<span class="string">&#x27;Initial&#x27;</span>)[<span class="string">&#x27;Age&#x27;</span>].mean() <span class="comment">#이니셜별 평균 연령 확인</span></span><br></pre></td></tr></table></figure>




<pre><code>Initial
Master     4.574167
Miss      21.860000
Mr        32.739609
Mrs       35.981818
Other     45.888889
Name: Age, dtype: float64</code></pre>
<p>NaN 연령 채우기</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 평균 연령의 Ceil 값에 NaN 값 할당</span></span><br><span class="line">data.loc[(data.Age.isnull())&amp;(data.Initial==<span class="string">&#x27;Mr&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">33</span></span><br><span class="line">data.loc[(data.Age.isnull())&amp;(data.Initial==<span class="string">&#x27;Mrs&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">36</span></span><br><span class="line">data.loc[(data.Age.isnull())&amp;(data.Initial==<span class="string">&#x27;Master&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">5</span></span><br><span class="line">data.loc[(data.Age.isnull())&amp;(data.Initial==<span class="string">&#x27;Miss&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">22</span></span><br><span class="line">data.loc[(data.Age.isnull())&amp;(data.Initial==<span class="string">&#x27;Other&#x27;</span>),<span class="string">&#x27;Age&#x27;</span>]=<span class="number">46</span></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.Age.isnull().<span class="built_in">any</span>() <span class="comment">#그래서 마침내 null 값이 남지 않게 되었다.</span></span><br></pre></td></tr></table></figure>




<pre><code>False</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">20</span>,<span class="number">10</span>))</span><br><span class="line">data[data[<span class="string">&#x27;Survived&#x27;</span>]==<span class="number">0</span>].Age.plot.hist(ax=ax[<span class="number">0</span>],bins=<span class="number">20</span>,edgecolor=<span class="string">&#x27;black&#x27;</span>,color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Survived= 0&#x27;</span>)</span><br><span class="line">x1=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">85</span>,<span class="number">5</span>))</span><br><span class="line">ax[<span class="number">0</span>].set_xticks(x1)</span><br><span class="line">data[data[<span class="string">&#x27;Survived&#x27;</span>]==<span class="number">1</span>].Age.plot.hist(ax=ax[<span class="number">1</span>],color=<span class="string">&#x27;green&#x27;</span>,bins=<span class="number">20</span>,edgecolor=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Survived= 1&#x27;</span>)</span><br><span class="line">x2=<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">0</span>,<span class="number">85</span>,<span class="number">5</span>))</span><br><span class="line">ax[<span class="number">1</span>].set_xticks(x2)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_55_0.png" alt="png"></p>
<p>관측치:<br>1)아기들 (&lt;5)은 대량으로 생존되었다.</p>
<p>2)가장 나이가 많은 승객은 생존했다(80년).</p>
<p>3)최대 사망자는 30~40세였다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sns.factorplot(<span class="string">&#x27;Pclass&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>,col=<span class="string">&#x27;Initial&#x27;</span>,data=data)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_57_0.png" alt="png"></p>
<p>따라서 부녀자 우선 정책은 계층에 관계없이 적용된다.</p>
<h3 id="승선-–-gt-범주형-값"><a href="#승선-–-gt-범주형-값" class="headerlink" title="승선 –&gt; 범주형 값"></a>승선 –&gt; 범주형 값</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab([data.Embarked,data.Pclass],[data.Sex,data.Survived],margins=<span class="literal">True</span>).style.background_gradient(cmap=<span class="string">&#x27;summer_r&#x27;</span>)</span><br></pre></td></tr></table></figure>



<div style = overflow:scroll;>
<style  type="text/css" >
#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col0,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col2{
            background-color:  #fcfe66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col1{
            background-color:  #d2e866;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col2{
            background-color:  #f2f866;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col3{
            background-color:  #d8ec66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col4,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col3{
            background-color:  #e8f466;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col0,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col0,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col1,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col2,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col3,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col4,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col0,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col2,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col3,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col4{
            background-color:  #ffff66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col1,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col0{
            background-color:  #f9fc66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col3,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col4{
            background-color:  #fbfd66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col0,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col1{
            background-color:  #e6f266;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col1{
            background-color:  #f0f866;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col2{
            background-color:  #eef666;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col4,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col0{
            background-color:  #edf666;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col1{
            background-color:  #fefe66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col0{
            background-color:  #e3f166;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col2{
            background-color:  #ecf666;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col3{
            background-color:  #f8fc66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col4{
            background-color:  #ebf566;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col1{
            background-color:  #cde666;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col2{
            background-color:  #e4f266;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col3{
            background-color:  #bede66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col4{
            background-color:  #dbed66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col1{
            background-color:  #bdde66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col2{
            background-color:  #d3e966;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col3,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col1{
            background-color:  #dcee66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col4{
            background-color:  #d1e866;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col0{
            background-color:  #52a866;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col2{
            background-color:  #81c066;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col3{
            background-color:  #b0d866;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col4{
            background-color:  #9acc66;
            color:  #000000;
        }#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col0,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col1,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col2,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col3,#T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col4{
            background-color:  #008066;
            color:  #f1f1f1;
        }</style><table id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002" ><thead>    <tr>        <th class="blank" ></th>        <th class="index_name level0" >Sex</th>        <th class="col_heading level0 col0" colspan=2>female</th>        <th class="col_heading level0 col2" colspan=2>male</th>        <th class="col_heading level0 col4" >All</th>    </tr>    <tr>        <th class="blank" ></th>        <th class="index_name level1" >Survived</th>        <th class="col_heading level1 col0" >0</th>        <th class="col_heading level1 col1" >1</th>        <th class="col_heading level1 col2" >0</th>        <th class="col_heading level1 col3" >1</th>        <th class="col_heading level1 col4" ></th>    </tr>    <tr>        <th class="index_name level0" >Embarked</th>        <th class="index_name level1" >Pclass</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level0_row0" class="row_heading level0 row0" rowspan=3>C</th>
                        <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row0" class="row_heading level1 row0" >1</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col0" class="data row0 col0" >1</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col1" class="data row0 col1" >42</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col2" class="data row0 col2" >25</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col3" class="data row0 col3" >17</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row0_col4" class="data row0 col4" >85</td>
            </tr>
            <tr>
                                <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row1" class="row_heading level1 row1" >2</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col0" class="data row1 col0" >0</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col1" class="data row1 col1" >7</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col2" class="data row1 col2" >8</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col3" class="data row1 col3" >2</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row1_col4" class="data row1 col4" >17</td>
            </tr>
            <tr>
                                <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row2" class="row_heading level1 row2" >3</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col0" class="data row2 col0" >8</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col1" class="data row2 col1" >15</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col2" class="data row2 col2" >33</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col3" class="data row2 col3" >10</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row2_col4" class="data row2 col4" >66</td>
            </tr>
            <tr>
                        <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level0_row3" class="row_heading level0 row3" rowspan=3>Q</th>
                        <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row3" class="row_heading level1 row3" >1</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col0" class="data row3 col0" >0</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col1" class="data row3 col1" >1</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col2" class="data row3 col2" >1</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col3" class="data row3 col3" >0</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row3_col4" class="data row3 col4" >2</td>
            </tr>
            <tr>
                                <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row4" class="row_heading level1 row4" >2</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col0" class="data row4 col0" >0</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col1" class="data row4 col1" >2</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col2" class="data row4 col2" >1</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col3" class="data row4 col3" >0</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row4_col4" class="data row4 col4" >3</td>
            </tr>
            <tr>
                                <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row5" class="row_heading level1 row5" >3</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col0" class="data row5 col0" >9</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col1" class="data row5 col1" >24</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col2" class="data row5 col2" >36</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col3" class="data row5 col3" >3</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row5_col4" class="data row5 col4" >72</td>
            </tr>
            <tr>
                        <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level0_row6" class="row_heading level0 row6" rowspan=3>S</th>
                        <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row6" class="row_heading level1 row6" >1</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col0" class="data row6 col0" >2</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col1" class="data row6 col1" >46</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col2" class="data row6 col2" >51</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col3" class="data row6 col3" >28</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row6_col4" class="data row6 col4" >127</td>
            </tr>
            <tr>
                                <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row7" class="row_heading level1 row7" >2</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col0" class="data row7 col0" >6</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col1" class="data row7 col1" >61</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col2" class="data row7 col2" >82</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col3" class="data row7 col3" >15</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row7_col4" class="data row7 col4" >164</td>
            </tr>
            <tr>
                                <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row8" class="row_heading level1 row8" >3</th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col0" class="data row8 col0" >55</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col1" class="data row8 col1" >33</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col2" class="data row8 col2" >231</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col3" class="data row8 col3" >34</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row8_col4" class="data row8 col4" >353</td>
            </tr>
            <tr>
                        <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level0_row9" class="row_heading level0 row9" >All</th>
                        <th id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002level1_row9" class="row_heading level1 row9" ></th>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col0" class="data row9 col0" >81</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col1" class="data row9 col1" >231</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col2" class="data row9 col2" >468</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col3" class="data row9 col3" >109</td>
                        <td id="T_40b4596e_1e5b_11eb_b25f_0242ac1c0002row9_col4" class="data row9 col4" >889</td>
            </tr>
    </tbody></table>



<p>항구별 생존 가능성</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sns.factorplot(<span class="string">&#x27;Embarked&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>,data=data)</span><br><span class="line">fig=plt.gcf()</span><br><span class="line">fig.set_size_inches(<span class="number">5</span>,<span class="number">3</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_62_0.png" alt="png"></p>
<p>포트 C의 생존 가능성은 0.55 전후로 가장 높은 반면 S의 생존 가능성은 가장 낮다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">2</span>,<span class="number">2</span>,figsize=(<span class="number">20</span>,<span class="number">15</span>))</span><br><span class="line">sns.countplot(<span class="string">&#x27;Embarked&#x27;</span>,data=data,ax=ax[<span class="number">0</span>,<span class="number">0</span>]) <span class="comment">#sns = seaborn</span></span><br><span class="line">ax[<span class="number">0</span>,<span class="number">0</span>].set_title(<span class="string">&#x27;No. Of Passengers Boarded&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Embarked&#x27;</span>,hue=<span class="string">&#x27;Sex&#x27;</span>,data=data,ax=ax[<span class="number">0</span>,<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">0</span>,<span class="number">1</span>].set_title(<span class="string">&#x27;Male-Female Split for Embarked&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Embarked&#x27;</span>,hue=<span class="string">&#x27;Survived&#x27;</span>,data=data,ax=ax[<span class="number">1</span>,<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">1</span>,<span class="number">0</span>].set_title(<span class="string">&#x27;Embarked vs Survived&#x27;</span>)</span><br><span class="line">sns.countplot(<span class="string">&#x27;Embarked&#x27;</span>,hue=<span class="string">&#x27;Pclass&#x27;</span>,data=data,ax=ax[<span class="number">1</span>,<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>,<span class="number">1</span>].set_title(<span class="string">&#x27;Embarked vs Pclass&#x27;</span>)</span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">0.2</span>,hspace=<span class="number">0.5</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_64_0.png" alt="png"></p>
<p>관측치:<br>1)S에서 탑승한 최대 탑승객. 그들 대부분은 Pclass3 출신이다.</p>
<p>2)C에서 온 승객들은 상당부분 살아남은 것으로 보아 운이 좋은 것으로 보인다. 그 이유는 아마도 모든 Pclass1과 Pclass2 승객을 구조했을 것이다.</p>
<p>3)승객 S는 부자들의 대다수가 탑승한 항구를 바라본다. 여전히 생존 가능성은 낮은데, 그것은 81% 정도 되는 Pclass3의 많은 승객들이 살아남지금은 Pclass3의 많은 승객들이 살아남지 못했기 때문이다.</p>
<p>4)항구 Q의 탑승객은 거의 95%가 Pclass3 출신이었다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sns.factorplot(<span class="string">&#x27;Pclass&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>,hue=<span class="string">&#x27;Sex&#x27;</span>,col=<span class="string">&#x27;Embarked&#x27;</span>,data=data)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_66_0.png" alt="png"></p>
<p>관측치:<br>1)Pclass1과 Pclass2의 여성은 Pclass와 관계없이 생존 확률은 거의 1이다.</p>
<p>2)남녀 모두의 생존율이 매우 낮기 때문에 Pclass3 Passenger에게는 포트S가 매우 불행해 보인다.(돈 문제)</p>
<p>3)포트 Q는 거의 모두가 Pclass 3에서 온 것처럼 남자에게는 가장 어울리지 않는 것 같다.</p>
<p>채우기 시작 NaN<br>우리는 최대 승객들이 S항에서 탑승하는 것을 보았듯이 NaN을 S로 대체한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data[<span class="string">&#x27;Embarked&#x27;</span>].fillna(<span class="string">&#x27;S&#x27;</span>,inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.Embarked.isnull().<span class="built_in">any</span>()<span class="comment"># Finally No NaN values</span></span><br></pre></td></tr></table></figure>




<pre><code>False</code></pre>
<h3 id="SibSip–-gt-구체적-특징"><a href="#SibSip–-gt-구체적-특징" class="headerlink" title="SibSip–&gt;구체적 특징"></a>SibSip–&gt;구체적 특징</h3><p>이 특징은 사람이 혼자 있는지 가족과 함께 있는지 여부를 나타낸다.</p>
<p>형제 = 형제, 자매, 의붓동생, 의붓동생, 의붓동생</p>
<p>배우자 = 남편, 아내</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab([data.SibSp],data.Survived).style.background_gradient(cmap=<span class="string">&#x27;summer_r&#x27;</span>)</span><br></pre></td></tr></table></figure>



<div style = overflow:scroll;>
<style  type="text/css" >
#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row0_col0,#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row0_col1{
            background-color:  #008066;
            color:  #f1f1f1;
        }#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row1_col0{
            background-color:  #c4e266;
            color:  #000000;
        }#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row1_col1{
            background-color:  #77bb66;
            color:  #000000;
        }#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row2_col0,#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row4_col0{
            background-color:  #f9fc66;
            color:  #000000;
        }#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row2_col1{
            background-color:  #f0f866;
            color:  #000000;
        }#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row3_col0,#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row3_col1{
            background-color:  #fbfd66;
            color:  #000000;
        }#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row4_col1{
            background-color:  #fcfe66;
            color:  #000000;
        }#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row5_col0,#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row5_col1,#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row6_col1{
            background-color:  #ffff66;
            color:  #000000;
        }#T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row6_col0{
            background-color:  #fefe66;
            color:  #000000;
        }</style><table id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002" ><thead>    <tr>        <th class="index_name level0" >Survived</th>        <th class="col_heading level0 col0" >0</th>        <th class="col_heading level0 col1" >1</th>    </tr>    <tr>        <th class="index_name level0" >SibSp</th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002level0_row0" class="row_heading level0 row0" >0</th>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row0_col0" class="data row0 col0" >398</td>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row0_col1" class="data row0 col1" >210</td>
            </tr>
            <tr>
                        <th id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002level0_row1" class="row_heading level0 row1" >1</th>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row1_col0" class="data row1 col0" >97</td>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row1_col1" class="data row1 col1" >112</td>
            </tr>
            <tr>
                        <th id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002level0_row2" class="row_heading level0 row2" >2</th>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row2_col0" class="data row2 col0" >15</td>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row2_col1" class="data row2 col1" >13</td>
            </tr>
            <tr>
                        <th id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002level0_row3" class="row_heading level0 row3" >3</th>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row3_col0" class="data row3 col0" >12</td>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row3_col1" class="data row3 col1" >4</td>
            </tr>
            <tr>
                        <th id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002level0_row4" class="row_heading level0 row4" >4</th>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row4_col0" class="data row4 col0" >15</td>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row4_col1" class="data row4 col1" >3</td>
            </tr>
            <tr>
                        <th id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002level0_row5" class="row_heading level0 row5" >5</th>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row5_col0" class="data row5 col0" >5</td>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row5_col1" class="data row5 col1" >0</td>
            </tr>
            <tr>
                        <th id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002level0_row6" class="row_heading level0 row6" >8</th>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row6_col0" class="data row6 col0" >7</td>
                        <td id="T_728ddb78_1e5f_11eb_b25f_0242ac1c0002row6_col1" class="data row6 col1" >0</td>
            </tr>
    </tbody></table>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">20</span>,<span class="number">8</span>))</span><br><span class="line">sns.barplot(<span class="string">&#x27;SibSp&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>,data=data,ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;SibSp vs Survived&#x27;</span>)</span><br><span class="line">sns.factorplot(<span class="string">&#x27;SibSp&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>,data=data,ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;SibSp vs Survived&#x27;</span>)</span><br><span class="line">plt.close(<span class="number">2</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_73_0.png" alt="png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(data.SibSp,data.Pclass).style.background_gradient(cmap=<span class="string">&#x27;summer_r&#x27;</span>)</span><br></pre></td></tr></table></figure>



<div style = overflow:scroll;>
<style  type="text/css" >
#T_83313358_1e5f_11eb_b25f_0242ac1c0002row0_col0,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row0_col1,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row0_col2{
            background-color:  #008066;
            color:  #f1f1f1;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row1_col0{
            background-color:  #7bbd66;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row1_col1{
            background-color:  #8ac466;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row1_col2{
            background-color:  #c6e266;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row2_col0,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row4_col2{
            background-color:  #f6fa66;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row2_col1{
            background-color:  #eef666;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row2_col2{
            background-color:  #f8fc66;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row3_col0,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row3_col2{
            background-color:  #fafc66;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row3_col1{
            background-color:  #fdfe66;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row4_col0,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row4_col1,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row5_col0,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row5_col1,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row5_col2,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row6_col0,#T_83313358_1e5f_11eb_b25f_0242ac1c0002row6_col1{
            background-color:  #ffff66;
            color:  #000000;
        }#T_83313358_1e5f_11eb_b25f_0242ac1c0002row6_col2{
            background-color:  #fefe66;
            color:  #000000;
        }</style><table id="T_83313358_1e5f_11eb_b25f_0242ac1c0002" ><thead>    <tr>        <th class="index_name level0" >Pclass</th>        <th class="col_heading level0 col0" >1</th>        <th class="col_heading level0 col1" >2</th>        <th class="col_heading level0 col2" >3</th>    </tr>    <tr>        <th class="index_name level0" >SibSp</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_83313358_1e5f_11eb_b25f_0242ac1c0002level0_row0" class="row_heading level0 row0" >0</th>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row0_col0" class="data row0 col0" >137</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row0_col1" class="data row0 col1" >120</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row0_col2" class="data row0 col2" >351</td>
            </tr>
            <tr>
                        <th id="T_83313358_1e5f_11eb_b25f_0242ac1c0002level0_row1" class="row_heading level0 row1" >1</th>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row1_col0" class="data row1 col0" >71</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row1_col1" class="data row1 col1" >55</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row1_col2" class="data row1 col2" >83</td>
            </tr>
            <tr>
                        <th id="T_83313358_1e5f_11eb_b25f_0242ac1c0002level0_row2" class="row_heading level0 row2" >2</th>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row2_col0" class="data row2 col0" >5</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row2_col1" class="data row2 col1" >8</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row2_col2" class="data row2 col2" >15</td>
            </tr>
            <tr>
                        <th id="T_83313358_1e5f_11eb_b25f_0242ac1c0002level0_row3" class="row_heading level0 row3" >3</th>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row3_col0" class="data row3 col0" >3</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row3_col1" class="data row3 col1" >1</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row3_col2" class="data row3 col2" >12</td>
            </tr>
            <tr>
                        <th id="T_83313358_1e5f_11eb_b25f_0242ac1c0002level0_row4" class="row_heading level0 row4" >4</th>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row4_col0" class="data row4 col0" >0</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row4_col1" class="data row4 col1" >0</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row4_col2" class="data row4 col2" >18</td>
            </tr>
            <tr>
                        <th id="T_83313358_1e5f_11eb_b25f_0242ac1c0002level0_row5" class="row_heading level0 row5" >5</th>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row5_col0" class="data row5 col0" >0</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row5_col1" class="data row5 col1" >0</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row5_col2" class="data row5 col2" >5</td>
            </tr>
            <tr>
                        <th id="T_83313358_1e5f_11eb_b25f_0242ac1c0002level0_row6" class="row_heading level0 row6" >8</th>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row6_col0" class="data row6 col0" >0</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row6_col1" class="data row6 col1" >0</td>
                        <td id="T_83313358_1e5f_11eb_b25f_0242ac1c0002row6_col2" class="data row6 col2" >7</td>
            </tr>
    </tbody></table>



<p>관측치:<br>막대 그래프와 요인 그림은 승객이 형제 없이 혼자 탑승한 경우 생존율이 34.5%라는 것을 보여준다. 형제자매 수가 증가하면 그래프는 대략 감소한다. 이게 말이 되네. 즉, 만약 내가 승선하고 있는 가족이 있다면, 나는 먼저 나 자신을 구하지 않고 그들을 구하려고 노력할 것이다. 놀랍게도 5~8인 가족의 생존율은 0%이다. 이유는 Pclass일 수도 있다?</p>
<p>그 이유는 Pclass이다. 십자표는 SibSp&gt;3을 가진 사람이 모두 Pclass3에 있었다는 것을 보여준다. Pclass3(&gt;&gt;3)의 대가족이 모두 사망하는 일이 임박했다.</p>
<h3 id="Parch"><a href="#Parch" class="headerlink" title="Parch"></a>Parch</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pd.crosstab(data.Parch,data.Pclass).style.background_gradient(cmap=<span class="string">&#x27;summer_r&#x27;</span>)</span><br></pre></td></tr></table></figure>



<div style = overflow:scroll;>
<style  type="text/css" >
#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row0_col0,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row0_col1,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row0_col2{
            background-color:  #008066;
            color:  #f1f1f1;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row1_col0{
            background-color:  #cfe766;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row1_col1{
            background-color:  #c2e066;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row1_col2{
            background-color:  #dbed66;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row2_col0{
            background-color:  #dfef66;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row2_col1{
            background-color:  #e1f066;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row2_col2{
            background-color:  #e3f166;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row3_col0,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row4_col1,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row5_col0,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row5_col1,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row6_col0,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row6_col1,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row6_col2{
            background-color:  #ffff66;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row3_col1{
            background-color:  #fcfe66;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row3_col2,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row4_col0,#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row4_col2{
            background-color:  #fefe66;
            color:  #000000;
        }#T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row5_col2{
            background-color:  #fdfe66;
            color:  #000000;
        }</style><table id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002" ><thead>    <tr>        <th class="index_name level0" >Pclass</th>        <th class="col_heading level0 col0" >1</th>        <th class="col_heading level0 col1" >2</th>        <th class="col_heading level0 col2" >3</th>    </tr>    <tr>        <th class="index_name level0" >Parch</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002level0_row0" class="row_heading level0 row0" >0</th>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row0_col0" class="data row0 col0" >163</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row0_col1" class="data row0 col1" >134</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row0_col2" class="data row0 col2" >381</td>
            </tr>
            <tr>
                        <th id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002level0_row1" class="row_heading level0 row1" >1</th>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row1_col0" class="data row1 col0" >31</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row1_col1" class="data row1 col1" >32</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row1_col2" class="data row1 col2" >55</td>
            </tr>
            <tr>
                        <th id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002level0_row2" class="row_heading level0 row2" >2</th>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row2_col0" class="data row2 col0" >21</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row2_col1" class="data row2 col1" >16</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row2_col2" class="data row2 col2" >43</td>
            </tr>
            <tr>
                        <th id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002level0_row3" class="row_heading level0 row3" >3</th>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row3_col0" class="data row3 col0" >0</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row3_col1" class="data row3 col1" >2</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row3_col2" class="data row3 col2" >3</td>
            </tr>
            <tr>
                        <th id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002level0_row4" class="row_heading level0 row4" >4</th>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row4_col0" class="data row4 col0" >1</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row4_col1" class="data row4 col1" >0</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row4_col2" class="data row4 col2" >3</td>
            </tr>
            <tr>
                        <th id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002level0_row5" class="row_heading level0 row5" >5</th>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row5_col0" class="data row5 col0" >0</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row5_col1" class="data row5 col1" >0</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row5_col2" class="data row5 col2" >5</td>
            </tr>
            <tr>
                        <th id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002level0_row6" class="row_heading level0 row6" >6</th>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row6_col0" class="data row6 col0" >0</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row6_col1" class="data row6 col1" >0</td>
                        <td id="T_ccb5b4d6_1e5f_11eb_b25f_0242ac1c0002row6_col2" class="data row6 col2" >1</td>
            </tr>
    </tbody></table>



<p>크로스탭은 다시 더 큰 가족이 Pclass3에 있었다는 것을 보여준다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">1</span>,<span class="number">2</span>,figsize=(<span class="number">20</span>,<span class="number">8</span>))</span><br><span class="line">sns.barplot(<span class="string">&#x27;Parch&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>,data=data,ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Parch vs Survived&#x27;</span>)</span><br><span class="line">sns.factorplot(<span class="string">&#x27;Parch&#x27;</span>,<span class="string">&#x27;Survived&#x27;</span>,data=data,ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Parch vs Survived&#x27;</span>)</span><br><span class="line">plt.close(<span class="number">2</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_79_0.png" alt="png"></p>
<p>관측치:<br>여기에서도 결과는 꽤 비슷하다. 부모를 동반한 승객은 생존 가능성이 더 크다. 하지만 숫자가 늘어날수록 줄어든다.</p>
<p>생존 가능성은 배 안에 1-3명의 부모를 둔 사람에게 좋다. 혼자라는 것은 또한 치명적이고 누군가가 배에 4명 이상의 부모를 두고 있을 때 생존 가능성이 줄어든다는 것을 증명한다.</p>
<h3 id="운임–-gt-지속적-특징"><a href="#운임–-gt-지속적-특징" class="headerlink" title="운임–&gt; 지속적 특징"></a>운임–&gt; 지속적 특징</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">&#x27;Highest Fare was:&#x27;</span>,data[<span class="string">&#x27;Fare&#x27;</span>].<span class="built_in">max</span>()) <span class="comment">#최고 요금</span></span><br><span class="line">print(<span class="string">&#x27;Lowest Fare was:&#x27;</span>,data[<span class="string">&#x27;Fare&#x27;</span>].<span class="built_in">min</span>()) <span class="comment">#최저 요금</span></span><br><span class="line">print(<span class="string">&#x27;Average Fare was:&#x27;</span>,data[<span class="string">&#x27;Fare&#x27;</span>].mean()) <span class="comment">#평균 요금</span></span><br></pre></td></tr></table></figure>

<pre><code>Highest Fare was: 512.3292
Lowest Fare was: 0.0
Average Fare was: 32.2042079685746</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f,ax=plt.subplots(<span class="number">1</span>,<span class="number">3</span>,figsize=(<span class="number">20</span>,<span class="number">8</span>))</span><br><span class="line">sns.distplot(data[data[<span class="string">&#x27;Pclass&#x27;</span>]==<span class="number">1</span>].Fare,ax=ax[<span class="number">0</span>])</span><br><span class="line">ax[<span class="number">0</span>].set_title(<span class="string">&#x27;Fares in Pclass 1&#x27;</span>)</span><br><span class="line">sns.distplot(data[data[<span class="string">&#x27;Pclass&#x27;</span>]==<span class="number">2</span>].Fare,ax=ax[<span class="number">1</span>])</span><br><span class="line">ax[<span class="number">1</span>].set_title(<span class="string">&#x27;Fares in Pclass 2&#x27;</span>)</span><br><span class="line">sns.distplot(data[data[<span class="string">&#x27;Pclass&#x27;</span>]==<span class="number">3</span>].Fare,ax=ax[<span class="number">2</span>])</span><br><span class="line">ax[<span class="number">2</span>].set_title(<span class="string">&#x27;Fares in Pclass 3&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_83_0.png" alt="png"></p>
<p>Pclass1의 승객 요금에는 큰 배분이 있을 것으로 보이며, 이 배분은 기준이 감소함에 따라 계속 감소하고 있다. 이것 또한 지속적이기 때문에 우리는 바이닝을 사용하여 이산값으로 변환할 수 있다.</p>
<h3 id="모든-형상에-대한-간단한-관측치"><a href="#모든-형상에-대한-간단한-관측치" class="headerlink" title="모든 형상에 대한 간단한 관측치:"></a>모든 형상에 대한 간단한 관측치:</h3><p>성=남성에 비해 여성의 생존 가능성은 높다.</p>
<p>Pclass:일등석 승객이 되면 생존 가능성이 더 높아진다는 눈에 띄는 추세가 있다. Pclass3의 생존율은 매우 낮다. 여성의 경우 Pclass1에서 생존할 확률은 거의 1이며 Pclass2에서 생존할 확률도 높다. 돈이 이긴다!!!</p>
<p>나이: 5~10세 미만의 어린이들은 생존 확률이 높다. 15세에서 35세 사이의 승객들이 많이 죽었다.</p>
<p>시작됨: 이것은 매우 흥미로운 특징이다. Pclass1 승객의 대다수가 S. Q. 승객들이 모두 Pclass3 출신이었음에도 불구하고 C에서 생존할 가능성은 더 좋아 보인다.</p>
<p>Parch+SibSp: 1-2명의 형제자매가 있고, 기내에 스파우스를 두거나, 1-3명의 부모가 혼자 있거나, 대가족이 당신과 함께 여행하는 것보다 가능성이 더 높다.</p>
<h3 id="특색-간의-상관-관계"><a href="#특색-간의-상관-관계" class="headerlink" title="특색 간의 상관 관계"></a>특색 간의 상관 관계</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sns.heatmap(data.corr(),annot=<span class="literal">True</span>,cmap=<span class="string">&#x27;RdYlGn&#x27;</span>,linewidths=<span class="number">0.2</span>) <span class="comment">#data.corr()--&gt;상관 행렬</span></span><br><span class="line">fig=plt.gcf()</span><br><span class="line">fig.set_size_inches(<span class="number">10</span>,<span class="number">8</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/titanic/output_87_0.png" alt="png"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-10-29T07:28:15.778Z" title="2020-10-29T07:28:15.778Z">2020-10-29</time></span><span class="level-item">Updated&nbsp;<time dateTime="2020-10-30T01:08:25.984Z" title="2020-10-30T01:08:25.984Z">2020-10-30</time></span><span class="level-item">a minute read (About 124 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2020/10/29/hello-world/">Hello World</a></h1><div class="content"><p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><p>hihih</p>
<h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-06T08:58:19.289Z">2020-11-06</time></p><p class="title"><a href="/2020/11/06/Seaborn_with_Matplotlib_4/">Seaborn with Matplotlib (4)</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-06T08:58:19.271Z">2020-11-06</time></p><p class="title"><a href="/2020/11/06/Seaborn_with_Matplotlib_1/">Seaborn with Matplotlib (1)</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-06T08:58:19.271Z">2020-11-06</time></p><p class="title"><a href="/2020/11/06/Seaborn_with_Matplotlib_3/">Seaborn with Matplotlib (3)</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-06T08:58:19.271Z">2020-11-06</time></p><p class="title"><a href="/2020/11/06/Seaborn_with_Matplotlib_2/">Seaborn with Matplotlib (2)</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-05T05:16:07.477Z">2020-11-05</time></p><p class="title"><a href="/2020/11/05/home_credit_default_risk/">home_credit_default_risk</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Report" height="28"></a><p class="is-size-7"><span>&copy; 2020 choi</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>